<!DOCTYPE html>
<html lang="en">
<!-- widentrn.htm - HTML file for widentrn.bat,
     6th Sound-Builder Template - HTML5 version -->
<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>WIDEN</title>
<meta charset="UTF-8" />
	<link rel = "stylesheet"
	 type = "text/css"
	 href = "cdpcssdf.css" />
    <!-- might revise this to match orig .css better -->
<link rel="icon"  href="../images/cdp_favicon.ico">
    <style>
	a { text-decoration: none }
	a:hover { color:#FF3333; text-decoration: underline }          	
    </style>
</head>

<body>

<div id = "left"> <!-- Keep indexing on left ABOVE headlines so index goes to top of page -->
<p>
<IMG SRC="images/hg2sm150.gif" align="center"></a><br clear>
&nbsp;<b>H<small>ITHER</small> G<small>ATE</small> M<small>USIC</small></b>
</p>

  <p>
  <nav>
  <dl>
  <dt><a href="../../html/ccdpndex.htm" Target="_top"><b>Main Index</b></a>
  <dt><a href="../../html/tutorials.htm" Target="_top"><b>Tutorials Index</b></a> 
  <dt><a href="../../html/cgroundx.htm" Target="_top"><b>'Groucho' Index</b></a> 
  <dt><a href="../../html/cspecndx.htm" Target="_top"><b>Spectral Index</b></a> 
  <dt><a href="../../html/filestxt.htm" Target="_blank"><b>File Formats</b></a>
  <hr>
<dl>
<dt><a href="#START"><b>START</b></a>
<br /><br />
<dt>&nbsp;&nbsp;<a href="#STEP1"><b>1. COPY</b></a>
<dt>&nbsp;&nbsp;<a href="#STEP2"><b>2. ANALYSE</b></a>
<dt>&nbsp;&nbsp;<a href="#STEP3"><b>3. TRANSPOSE UP</b></a>
<dt>&nbsp;&nbsp;<a href="#STEP4"><b>4. TRANSPOSE DN</b></a>
<dt>&nbsp;&nbsp;<a href="#STEP5"><b>5. MIX</b></a>
<br /><br />
<dt><a href="#BATCH6"><b>BATCH FILE</b></a>
<br /><br />
<dt><a href="#PT6"><b>PLAY LIST</b></a>
<br><br>
<dt><a href="#SOUNDSHAPER"><b>Screenshot Updates</b></a>

<hr>
<dt><a href = "sdbatstemplatesindex.htm"><b>TEMPLATES INDEX</b></a>
<br>
<dt>&nbsp;&nbsp;<a href = "reentry.htm"><b>1. RE-ENTRY</b></a>
<dt>&nbsp;&nbsp;<a href = "churbles.htm"><b>2. CHURBLES</b></a>
<dt>&nbsp;&nbsp;<a href = "grnflow.htm"><b>3. GRAIN-FLOW</b></a>
<dt>&nbsp;&nbsp;<a href = "glissswp.htm"><b>4. GLISS-SWEEP</b></a>
<dt>&nbsp;&nbsp;<a href = "rmrepeat.htm"><b>5. RING-MOD REPEAT</b></a>
<dt>&nbsp;&nbsp;<a href = "widentrn.htm"><b>6. WIDEN</b></a>

</dl>


</div>  <!----------------- End of left index panel ----------------------->

<div id = "right"> <!-- Keep headlines here so index goes to top of page -->

   <div id = "head">


<p>
<IMG SRC="images/hg2sm150.gif" align="left"></a><br> &nbsp;&nbsp;&nbsp;
<b>H<small>ITHER</small> G<small>ATE</small> M<small>USIC</small></b>
</p>

<br>

<!-- ========================================================================= -->
<h1>
Sound-builder Template 6<br />'WIDEN'<br />
<h5>&#126; Processing Sequence, Step-by-Step &#126;</h5>
<h2>for Sound Design Workshops,<br>prepared by A Endrich</h2>
</h1>

<p align="center">
<i><b>Goal:</b> widen a sound with adjacent spectral domain transpositions.</i>
</p>

<p>
<div align="center">
<table border="0" cellpadding="3">
<!-- <caption><h3>This is a Table</h3></caption> -->

<tr>
<td align="left"><h3><a href="asrcmix.wav">Starting Point</a></h3></td>
<td align="right"><h3><a href="fwider.mp3">
End Result</a></h3></td>
</tr>

<tr>
<td colspan="2" align="center"><h3><a href="#PT6">All Steps Play 
Table</a></h3></td>
</tr>

</table>
</div>
</p>

<p>
<br />
</p>

   </div>  <!-- End of 'head' -->


<!-- ========================================================================= -->
<h2 id="START">Starting Point (varied inputs)</h2>

<blockquote>
<p>
The starting point can be any soundfile.  It doesn't matter if 
the end result is poor because the point is to explore what happens 
with different types of input soundfile.  The <b>processing sequence</b> 
is a template, an exploratory tool.  It is used not only to produce 
good end results, but also to learn what kind of inputs work well 
with the given sequence.
</p>

<p>
The input should be mono, nicely dovetailed and any reasonable length.
The aim here is to 'widen' a sound by transposing it while retaining 
the same length, a little above and a little below the original, and 
then mixing all three together.
</p>

<p>
Very tiny transpositions, such as 0.1 semitone (10 cents), give the 
sound a certain resonant aura.  This can be very useful with pitched 
sounds.  As the size of the transposition increases, and the overall 
sound 'widens', beat patterns begin to appear, especially with 
pitched material.  The batch file as realised here transposes 1 full 
semitone up and down, so that we begin to hear a certain roughness from 
the beat patterns produced.  It is worth exploring the WIDEN Sound-Builder 
Template not only with different source sounds, but also with various 
amounts of transposition.  The examples supplied use <i>asrcmix.wav</i> 
as the input.
</p>

<p>
The sequence can be realised one step at a time with a graphic interface 
or all at once with a batch file.  It would be very easy to edit this 
batch file in order to produce several amounts of transposition all at 
once.
</p>

<p>
(A batch file is an MS-DOS mechanism which runs commands.  It is a text 
file with a <b>.bat</b> extension.  It contains a series of commands 
and explanatory comments introduced with the word <b>rem</b>.  In 
the <i>Sound Loom</i> GUI, the processing sequence can be constructed 
as an <b>Instrument</b>.)
</p>

<p>
I prefer to use a naming convention which indicates which processing 
function has been used.  Thus, as a new sound grows, you can read the 
processing steps in the name itself.
</p>
</blockquote>

<p>
<br>
</p>


<!-- ========================================================================= -->
<h2 id="STEP1">Step 1: Copy</h2>

<blockquote>
<h3>
Make a copy of the input soundfile, giving it a single letter name.
</h3>

<p>
It is presumed that the input is mono and begins and ends smoothly, 
i.e., without a click or being suddenly cut off.  We only have to 
name the outfile.  The default values for the copy procedure are 
used. because no change to the format is being made, i.e., 
<i>sampletype</i> = 1, <i>header</i> = 0 and <i>formatout</i> = 0.  
The outfile name is specified.  The .wav extension is added 
automatically.
</p>

<blockquote>
<h4>Dialogue box:</h4>

<p align="center">
<IMG SRC="images/copysfx1.gif" align="center" hspace="15" vspace="10" alt="[default 
parameters]"><br clear>
<b>Default parameters</b></a><br> 
</p>

<p align="center">
<IMG SRC="images/fcopysfx.gif" align="center" hspace="15" vspace="10" alt="[new 
name specified]"><br clear>
<b>New name is 'f.wav'</b></a>
</p>

<h4>Command:</h4>

<p>
<code>rem function infile outfile<br>
copysfx asrcmix.wav f.wav
</code></p>
</blockquote>

</blockquote>

<p>
<br>
</p>

<!-- ========================================================================= -->
<h2 id="STEP2">Step 2: Analyse</h2>

<blockquote>
<h3>
Analyse the source
</h3>

<p>
We need to analyse to that we can use spectral domain transposition.  This 
enables us to make the sound higher or lower without changing its length.
</p>

<blockquote>
<h4>Dialogue box:</h4>

<p align="center">
<IMG SRC="images/fanal.gif" align="center" hspace="15" vspace="10" alt="[only  
outfile name needed]"><br clear>
<b>Convert to analysis data</b></a><br> 
</p>

<h4>Command:</h4>
<p><code>
rem function mode infile outfile<br>
pvoc anal 1 f f.ana 
</code></p>

<p>
No need to play it here &#150; it sounds just 
like the original.
</p>
</blockquote>

</blockquote>

<p>
<br>
</p>

<!-- ========================================================================= -->
<h2 id="STEP3">Step 3: Transpose upwards</h2>

<blockquote>
<h3>
Transpose a little bit higher, keeping the same length.
</h3>

<p>
This will give us another version of the sound at just a 
little higher pitch level.  When mixed with the original, 
it will 'widen' the sound upwards.  REPITCH TRANSPOSE is 
used to change the pitch level while retaining the same 
length.  REPITCH TRANSPOSEF could also be used when it 
is important to retain the formant structure of the sound.
</p>

<blockquote>
<h4>Dialogue box:</h4>

<p align="center">
<IMG SRC="images/fupabit.gif" align="center" hspace="15" vspace="10" 
alt="[Dialogue box for REPITCH TRANSPOSE]"><br clear>
<b>Spectral transposition upwards</b></a><br> 
</p>

<h4>Command:</h4>
<p><code>
rem function mode infile outfile<br />
repitch transpose 3 f.ana fupabit.ana 1<br />
pvoc synth fupabit.ana fupabit.wav
</code></p>

<p>
(We immediately resynthesise it because we need the 
<b>.wav</b> version for the mix.)
</p>

<p>
PLAY <a href="fupabit.mp3"><b>fupabit.mp3</b></a> 
(transposed higher)<br>
New name: 'f fup...'
</p>
</blockquote>

</blockquote>

<p>
<br>
</p>


<!-- ========================================================================= -->
<h2 id="STEP4">Step 4: Transpose downwards</h2>

<blockquote>
<h3>
Transpose a little bit lower, keeping the same length.
</h3>

<p>
This will give us another version of the sound at just a 
little lower pitch level.  When mixed with the original, 
it will 'widen' the sound downwards.  REPITCH TRANSPOSE is 
used to change the pitch level while retaining the same 
length.  REPITCH TRANSPOSEF could also be used when it 
is important to retain the formant structure of the sound.
</p>

<blockquote>
<h4>Dialogue box:</h4>

<p align="center">
<IMG SRC="images/fdownabit.gif" align="center" hspace="15" vspace="10" 
alt="[Dialogue box for REPITCH TRANSPOSE]">
<br clear><b>Spectral transposition downwards</b></a><br> 
</p>

<h4>Command:</h4>
<p><code>
rem function mode infile outfile<br />
repitch transpose 3 f.ana fdownabit.ana -1<br />
pvoc synth fdownabit.ana fdownabit
</code></p>

<p>
(We immediately resynthesise it because we need the 
<b>.wav</b> version for the mix.)
</p>

<p>
PLAY <a href="fdownabit.mp3"><b>fdownabit.mp3</b></a> 
(Transposed downwards, preserving duration)<br>
New name: 'f fdown...'
</p>
</blockquote>

</blockquote>

<p>
<br>
</p>

<!-- ========================================================================= -->
<h2 id="STEP5">Step 5: MIX</h2>

<blockquote>
<h3>
Mix upper, lower and original
</h3>

<p>
Now we need to mix it all together, layering the upper and 
lower versions around the original.  The mixfile <i>widentrn.mix</i> 
contains the names of the files, levels and pan information:<br />
<pre>
<font color="#FF0000">soundfiles              start chans levels  pan</font>
e:\sdbats\fupabit.wav   0     1     0.5     -1
e:\sdbats\f.wav         0     1     0.8      0
e:\sdbats\fdownabit.wav 0     1     0.5      1
</pre>
</p>

<blockquote>
<h4>Dialogue box:</h4>

<p align="center">
<IMG SRC="images/fwidenmix.gif" align="center" hspace="15" vspace="10" 
alt="[Dialogue box for SUBMIX MIX]"><br clear>
<b>Mix the 3 files together</b></a><br /> 
</p>

<h4>Command:</h4>
<p><code>
rem function mode infile outfile<br>
submix mix widentrn.mix fwider
</code></p>

<p>
PLAY <a href="fwider.mp3"><b>fwider.mp3</b></a> 
(the enhanced, 'widened' sound)<br>
New name: 'f wider'
</p>
</blockquote>

</blockquote>

<p>
<br>
</p>

<!-- ========================================================================= -->
<h2 id="BATCH6">Complete Sequence: Batch File <i>widen.bat</i></h2>
<h3 align="center">Use <i>widendel.bat</i> to remove the outputs</h3>
 
<p>
<blockquote>
<pre>
rem widen.bat - batch file to widen a sound with adjacent 
rem   transpositions;  forms Sound-Builder Template 6
rem very tight transpositions give the sound a resonant 
rem   aura, but wider transpositions start to produce 
rem   beats
rem Last updated: 20 August 2004

rem use widendel.bat to clear outputs between uses

rem Sources supplied:
rem   asrcmix.wav (12.6 sec.) - basic complex source sound
rem   aklcdp.wav  (1.38 sec) - drum riff
rem   bashdt.wav  (1.5 sec) - strong, metallic attacks
rem   frogcdt.wav (1.8 sec) - chirpy frog ribbets
rem   hoggdt.wav  (3.7 sec) - deep, rich hog grunt
rem   tomcdt.wav  (1.3 sec) - light drum tone 
rem   touccdt.wav (3.0 sec) - timbrally rich bird call
rem   whdtm.wav   (2.4 sec) - whirling tube

echo on

rem widen.bat - batch file to widen a sound with adjacent 
rem   transpositions;  forms Sound-Builder Template 6
rem very tight transpositions give the sound a resonant 
rem   aura, but wider transpositions start to produce 
rem   beats

echo on

rem STEP 1. COPY TO GENERIC NAME
copysfx asrcmix.wav f.wav

rem STEP 2. ANALYSE 
pvoc anal 1 f f.ana

rem STEP 3. TRANSPOSE UP (retaining same length)
repitch transpose 3 f.ana fupabit.ana 1.0
pvoc synth fupabit.ana fupabit.wav
del fupabit.ana

rem STEP 4. TRANSPOSE DOWN (retaining same length)
repitch transpose 3 f.ana fdownabit.ana -1.0
pvoc synth fdownabit.ana fdownabit.wav
del f.ana
del fdownabit.ana

rem STEP 5. MIX IT ALL TOGETHER
submix mix widentrn.mix fwider.wav

echo off
</pre>
</p>
</blockquote>

<p>
Further fine-tuning of the result might typically include adding some 
reverb and directional movement (panning).
</p>

<p id="PT6">
<div><table border="1" cellpadding="5" bgcolor="#B0E0E6">
<caption align="center"><h2>All Steps Play Table</h2></caption>

<tr>
<th align="center"><h3>STEP</h3></th>
<th align="center"><h3>PROCESS</h3></th>
<th align="center"><h3>OUTPUT</h3></th>
</tr>

<tr>
<td align="left"><a href="#STEP1">Step 1.</a></td>
<td align="center">Copysfx</td>
<td align="center"><a href="f.mp3">f.mp3</a></td>
</tr>

<tr>
<td align="left"><a href="STEP2">Step 2.</a></td>
<td align="center">Analyse</td>
<td align="center">f.ana</a></td>
</tr>


<tr>
<td align="left"><a href="STEP3">Step 3.</a></td>
<td align="center">Repitch Transpose</td>
<td align="center"><a href="fupabit.mp3">fupabit.ana</a></td>
</tr>


<tr>
<td align="left"><a href="STEP4">Step 4.</a></td>
<td align="center">Repitch Transpose</td>
<td align="center"><a href="fdownabit.mp3">fdownabit.ana</a></td>
</tr>


<tr>
<td align="left"><a href="STEP5">Step 5.</a></td>
<td align="center">Mix</td>
<td align="center"><a href="fwider.mp3">fwider.mp3</a></td>
</tr>

</table>
</div>
</p>


<!-- ********************************************************** -->
<hr>
<h2 id="SOUNDSHAPER">SCREENSHOT UPDATES</h2>
<p>(by Robert Fraser, March 2016)</p>
<p>
<b>The Soundshaper screenshots used in this tutorial are out of date in two respects:</b>
<ul>
<li>Output files are no longer named on Parameter Pages: instead, the output is saved to a temporary file and appears on the Main Page patchgrid in a new cell named after the process. <br>
If you want to save the output permanently, highlight the cell (if necessary) and click File/Save or CTRL+S to obtain a standard SAVE dialog:
	<br><br>
	<div style="text-align: left;"><img style="width: 500px;
                height: 285px;" alt="Save File"
                src="images/save1.jpg">
        </div>
	<br>
There is normally no need to do this until the end of the sequence.</li><br>

<li>FFT conversion (PVOC Analysis / Resynthesis) now uses current settings and the FFT page is only used to set these, not to perform a conversion, as shown. As the tutorial examples use default values, there is nothing to set!<br>
Furthermore, Soundshaper does these conversions in the background, so you do not even have to select ANALYSE or SYNTH &#150; just select the next process.</li>
</ul>
</p>

<p>
<b>To run the WIDEN chain of CDP processes in Soundshaper:</b><br>
<blockquote>
[After each step, you can play the result in the transport panel.]<br>
</blockquote>

<ul>
<li><b>STEP 1</b> (COPYSFX): Open the tutorial folder. Drag and drop the source <b>asrcmix.wav</b> onto Soundshaper's Main Page.<br> 
	Program runs COPYSFX and outputs to cell A_0.</li><br>
<li><b>Copy cell A_0 to B_0:</b> click on cell A_0; click the Copy Cell <b>START</b> button; click on cell B_0.<br>
	The copy is needed as we will be transposing the source up (STEP 2) and also down (STEP 3).</li><br>

<li><b>STEP 2</b> (PVOC ANALYSE): <b>You can skip this step!</b> <br>
	The settings used are the defaults, so there is nothing to set.<br>
	Soundshaper will run PVOC automatically before performing a spectral function.</li><br>

<li><b>STEP 3</b> (TRANSPOSE UP): Click on cell A_0.Select Spectral/Pitch/Transpose.<br>
	Parameter page (Mode 3 semitones): set parameter as in tutorial (Semitones: 1).<br> 
	Click OK to run; output appears in cell A_1 ("Transpose").</li><br>
<li><b>STEP 3b</b> (RE-SYNTHESISE): Hit F9 or click Spectral/PVOC/Synth. Output appears in cell A_2 ("Pvoc Synth"):<br><br>

<li><b>STEP 4</b> (TRANSPOSE UP): Click on cell B_0. Hit F8 (repeat process) or select Spectral/Pitch/Transpose.<br>
	Parameter page (Mode 3 semitones): set parameter as in tutorial (Semitones: -1).<br> 
	Click OK to run; output appears in cell B_1 ("Transpose").</li><br>
<li><b>STEP 4b</b> (RE-SYNTHESISE): Hit F9 or click Spectral/PVOC/Synth. Output appears in cell B_2 ("Pvoc Synth"):<br><br>

<li><b>STEP 5</b> (MIX): Click on Cell A_2. Select Edit/Mix/Mix. <br>
	'Add Input' dialog: click on cell A_0 (source) as 2nd input, then cell B_2 (2nd transposition) as 3rd input.<br>
	Mix Parameter page: all three inputs are listed in the left panel. 
	Click on the first (~A_2.wav) and set its parameters as in the tutorial (Level=0.5, Pan=-1):<br>

	<div style="text-align: center;"><img style="width: 500px;
                height: 147px;" alt="Widen Mix"
                src="images/widemix.jpg">
        </div>
	<br>

	Click on the second input (~A_0.wav) and set its parameters as in the tutorial (Level=0.8, Pan=0).<br>
	Click on the third input (~B_2.wav) and set its parameters as in the tutorial (Level=0.5, Pan=1).<br>
	Click the <b>MIX</b> button to perform the mix. Output appears in cell A_3 ("Mix"). Play the result.<br>

	<div style="text-align: center;"><img style="width: 272px;
                height: 105px;" alt="Widen"
                src="images/widen.jpg">
        </div>

	</li><br>

<li><b>SAVE FILE (OPTIONAL)</b>: Save the result to a permanent file. Hit CTRL+S or File / Save(As) to obtain a standard SAVE dialog.<br>
Enter a file name, e.g. <b>widentrn.wav</b> (or <b>fwider.wav</b> if you prefer). </li><br>

<li><b>SAVE PATCH (OPTIONAL)</b>: <b>Uncheck</b> "Include Sources", unless you want to save the copied source (~A_0.wav) with the patch.<br> Click the patch <b>SAVE</b> button (central panel). Select a save name (e.g. <b>widentrn.ssp</b>); click OK. Optionally enter a description; click OK.<br></b></li>
<br>
<li><b>RUN PATCH (OPTIONAL)</b>: To run the patch with a different source (assuming the patchgrid has not been cleared), click on cell A_0, select a source (e.g. by drag+drop) and click the central <b>RUN</b> button, with the "Whole Patch" checkbox checked.</li>
<br>
<li><b>RELOAD PATCH (OPTIONAL)</b>: If the patch is not on the grid, click the central <b>LOAD</b> button. Select the .ssp file (e.g. widentrn.ssp). If you have not saved the source (~A_0.wav), the patch will still run with it, provided it still exists in the same location. Otherwise, you will be prompted to select a source. To run the patch with a different source, see RUN PATCH above. </li>  

</ul>

</p>

<!-- ********************************************************** -->
  <div id = "footer">
   <p>
    <address>
    Last Updated 31 Mar. 2016 -- HTML5 version<br />  
    Created with funding from North Wiltshire District Council<br>
    Documentation: Archer Endrich; last updated: 20 August 2004<br>
    <b>mp3</b> format changes: 21 February 2010 (sources or near sources 
    are kept as <b>wav</b>)<br>    
    Revisions: Robert Fraser<br>
    Composers Desktop Project Ltd<br />
    Email: cdpse9@talktalk.net<br />
    &#169; Copyright 2003-2016 Archer Endrich, Chippenham, Wiltshire, England<br>
    </address>
   </p>
  </div>

</div> <!-- End of 'right' (contents) indentation -->

<!-- 
Outline for a Step:

<h2>
Step x: 
</h2>

<blockquote>
<h3>
w
</h3>

<p>
x
</p>

<p>
<b>Dialogue box:</b><br>
<IMG SRC=".gif"><b></b></a>
</p>

<p>
<b>Command:</b><br>
<code>
rem function mode infile outfile
y
</code></p>

</blockquote>

 -->

<!-- 
Play table outline

<p>
<div>
<a name="PTx"><table border="1" cellpadding="5"></a>
<caption align="center"><h2>All Steps Play Table</h2></caption>

<tr>
<th align="center"><h3>STEP</h3></th>
<th align="center"><h3>PROCESS</h3></th>
<th align="center"><h3>OUTPUT</h3></th>
</tr>

<tr>
<td align="left">Step x.</td>
<td align="center">y</td>
<td align="center"><a href="x.mp3">x.mp3</a> &nbsp; <a href="y.mp3">
y.mp3</a></td>
</tr>

</table>
</div>
</p>

 -->


</body>

</html>