<!DOCTYPE html>
<html lang="en">
<!-- cspecnu.htm - HTML5 version -->
<html>

<head>
<title>CDP SPECNU Functions</title>
<meta charset="UTF-8" />
	<link rel = "stylesheet"
	 type = "text/css"
	 href = "cdpmanshtml5.css" />
<link rel="icon"  href="images/cdp_favicon.ico">
    <style>
	a { text-decoration: none }
	a:hover { color:#FF3333;
          text-decoration: underline }          	
    </style>
</head>

<body>

<div id = "left"> <!-- Keep indexing on left ABOVE headlines so index goes to top of page -->

  <p>
  <div align = "center">
  <IMG SRC = "images/cdpcircs90.jpg"></a>
  </div>
  </p>

  <p>
  <nav>
  <!-- list-style-type NOT removing bullets in IE9, using Definition List -->
  <dl>
  <dt><a href="ccdpndex.htm" Target="_top"><b>Main Index</b></a>
  <dt><a href="cspecndx.htm" Target="_top"><b>Spectral Index</b></a> 
  <dt><a href="filestxt.htm" Target="_blank"><b>File Formats</b></a>
  <hr>
  <br />
  <dt><a href="#SPECNULIST"><b>SPECNU:</b></a>
  <dt>&nbsp;&nbsp;<a href = "#CLEAN"><b>CLEAN</b></a>
  <dt>&nbsp;&nbsp;<a href = "#RAND"><b>RAND</b></a>
  <dt>&nbsp;&nbsp;<a href = "#REMOVE"><b>REMOVE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SLICE"><b>SLICE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SQUEEZE"><b>SQUEEZE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SUBTRACT"><b>SUBTRACT</b></a>
  <br><br> 
<b>OTHERS:</b><br>
  <dt>&nbsp;&nbsp;<a href="#FRACTALSPECTRUM"><b>FRACTAL</b></a>
  <dt>&nbsp;&nbsp;<a href = "#MATRIX"><b>MATRIX</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SPECGRIDS"><b>SPECGRIDS</b></a>
  <dt>&nbsp;&nbsp;<a href="#SPECULATE"><b>SPECULATE</b></a>
  <br><br>
  <dt><a href = "#SPECNUTECHNICAL"><b>Cleaning Kit</b></a>

  </dl>
  </p>

</div>  <!-- End of left index panel -->

<div id = "right"> <!-- Keep headlines here so index goes to top of page -->

   <div id = "head">

   <!-- 
   <p><IMG SRC="images/cdpcircs.jpg" align=left ALT="CDP circles logo"></a></p>
   -->
   <br> 
    <div align=center>
    <img src="images/cdplogo2.jpg" ALT="CDP Logo">
    </div>

   <h1 align=center>
   CDP SPECNU: Cleaning and other Functions</h1>
   <h2 align=center><font color="#3366ff"> (with Command Line Usage)</font></h2>
   </div>  <!-- End of 'head' -->


<!-- ========================================================================= -->
<h2 align = "center" id="SPECNULIST">Functions to clean up analysis files</h2>

<p>
<em>(Names in brackets mean that these are separate programs.  The others are sub-modules of SPECNU.)</em>
</p>


	<blockquote>
	The SPECNU Group includes command line programs to perform various  
	audio cleaning procedures. The <i>Sound Loom</i> 
	GUI contains a comprehensive <b>Cleaning Kit</b> that employs these 
	programs as well as others, conveniently assembling a whole range of 
	functions for audio cleaning in one place.  This is described in the 
	<a href = "#SPECNUTECHNICAL"><b>Technical</b></a> section below.<br>
	Release 7 has added two other functions to the group: <b>RAND</b> and <b>SQUEEZE</b>.   
	</blockquote>
<dl>
<dt><a href="#FRACTALSPECTRUM"><b>FRACTAL SPECTRUM</b></a> <dd>Fractally distort spectrum by transposition</dd>
<dt><a href="#CLEAN">SPECNU <b>CLEAN</b></a> <dd>Eliminate from the source file any persisting signal that falls below a threshold (defined by the noise 
file)</dd>
<dt><a href="#MATRIX"><b>MATRIX</b></a> <dd>Matrix manipulation of spectrum</dd>
<dt><a href="#RAND">SPECNU <b>RAND</b></a> <dd>Randomise the order of spectral windows</dd>
<dt><a href="#REMOVE">SPECNU <b>REMOVE</b></a> <dd>Remove a pitched component from the 
spectrum of a sound</dd>
<dt><a href="#SLICE">SPECNU <b>SLICE</b></a> <dd>Divide an analysis file into individual 
frequency bands, saving each as a separate analysis file</dd>
<dd>OR: Invert spectral frquencies around a given frequency
<dt><a href="#SPECGRIDS"><b>SPECGRIDS</b></a> <dd>Partition a spectrum into parts, over a grid</dd>
<dt><a href="#SPECULATE"><b>SPECULATE</b></a> <dd> Generate versions of source with channel data progressively permutated </dd>
<dt><a href="#SQUEEZE">SPECNU <b>SQUEEZE</b></a> <dd>Squeeze the spectrum into a frequency range, around a specified frequency</dd>
<dt><a href="#SUBTRACT">SPECNU <b>SUBTRACT</b></a> <dd>Eliminate from the source file 
any persisting signal that falls below a threshold (defined by the 
<i>noisfile</i>)<br />AND subtract the amplitude of the noise in the 
<i>noisfile</i> from any source file signal that is passed</dd><br>
<dt><a href="#SPECNUTECHNICAL"><b>Technical Discussion</b></a> <dd>Additional 
information derived from the <b>Cleaning Kit</b> in <i>Sound Loom</i>.</dd>
</dl>

<p>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br />
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- ********************************************************** -->
<h2 id="FRACTALSPECTRUM">FRACTAL SPECTRUM &#150; Fractally distort spectrum by transposition</h2>

<h3>
Usage
</h3>
<b>fractal spectrum</b> <i>infile outfile shape dur</i> [<b>-m</b><i>maxfrac</i>] [<b>-t</b><i>str</i>] [<b>-i</b><i>warp</i>] [<b>-s</b>] [<b>-n</b>]
<br />

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file<br />
<i>outfile</i> &#150; output analysis file<br />
<i>shape</i> &#150; breakpoint textfile containing time-semitone transposition pairs, defining the contour of the largest fractal shape. <br>
&nbsp;&nbsp;&nbsp;&nbsp; Times must start at zero and increase, with the final time defining the duration of the pattern. <br>
&nbsp;&nbsp;&nbsp;&nbsp; Pitch range: -12 to 12 semitones; the value at the final time is ignored.<br>
<b>-m</b><i>maxfrac</i> &#150; maximum degree of fractalisation (time-variable). If not set (or zero), fractalisation proceeds until the minimum possible wavelength is reached. (Range: 0 to 1000)<br />
<b>-t</b><i>str</i> &#150; time stretch of fractal pattern (Range: 0, or 1 to 2; time-variable).  If set to zero, no timestretching is done.<br />
<b>-i</b><i>warp</i> &#150; interval warping of fractal pattern (Range: 0 to 8; time-variable).   If set to zero, no warping is done.<br />
<b>-s</b> &#150; shrink pitch-intervals as fractal time-scales shrink<br />
<b>-n</b> &#150; transposition only (Default: retain formant envelope)
</blockquote>

[Query:  is there a dur parameter as in WARP?]

<h3>
Understanding the FRACTAL SPECTRUM Process
</h3>

<blockquote>
<p>
FRACTAL SPECTRUM is a spectral version of <a href="cdistort.htm#FRACTALWAVE"><b>FRACTAL WAVE</b></a>, distorting the spectrum fractally by transposition. The breakpoint file <i>shape</i> defines a time and transposition contour; transposition happens over the total duration of this and is then repeated over every resulting sub-unit of the pattern, over every sub-sub-unit, etc. until the smallest time-unit is reached. 
</p><p>
The other parameters are optional. <i>Maxfrac</i> sets the degree of fractalisation, which otherwise proceeds until the minimum possible wavelength is reached; <i>str</i> time-stretches the fractal pattern, but not the sound. <i>warp</i> distorts the intervals defined in the <i>shape</i> pattern.

<p><p>
The process may best be understood by experimenting with a steady-pitched source and selecting the tranposition-only flag (<b>-n</b>). A burst of tones is produced at high speed, as defined by the <i>shape</i> datafile. This is not unlike the sister process FRACTAL WAVE (but faster). If the (<b>-n</b>) flag is then unset, the source's formant envelope is retained. With a speech source, the voice retains its overall integrity, but with pitch fluctations caused by the fractal transpositions.

</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>

</p>
</blockquote>
</p>
<b>SEE ALSO: </b> the soundfile version <a href="cdistort.htm#FRACTALWAVE"><b>FRACTAL WAVE</b></a>.
<p>


<p>
End of FRACTAL SPECTRUM 
</p>



<hr><!-- ****************************************************** -->

<h2 id="CLEAN">SPECNU CLEAN &#150; Eliminate from the source file any persisting 
signal that falls below a threshold (defined by the noise file)</h2>

<p>Note: The CDP Release 8 set includes a program called <b>SPECLEAN</b>, which appears to be identical to this function. </p>

<h3>
Usage
</h3>
<b>specnu clean</b> <i>sigfile noisfile outanalfile persist noisgain</i> 
<br />

<h3>
Parameters
</h3>

<blockquote>
<i>sigfile</i> &#150; analysis file of the source sound to be cleaned<br />
<i>noisfile</i> &#150; analysis file cut from the source sound, containing 
a sample of the noise (only) to be eliminated.  Try to find a section 
containing only that noise, e.g., at the beginning or end of the sound.<br />
<i>outanalfile</i> &#150; resulting cleaned sound<br />
<i>persist</i> &#150; minimum time (in ms.) for which the clean signal must persist <i>above the threshold level</i> if it is to be retained 
(Range 0 to 1000 ms.)<br />
<i>noisgain</i> &#150; multiplies the threshold noise-levels found in the 
<i>noisfile</i> by an amount you specify, before they are used for comparison 
with the source file. (Range: 1 to 40)<br />
	<p>
	<blockquote>
	Both input files are analysis files.  <i>Noisfile</i> is a sample 
	of noise (only) from the <i>sigfile</i>.
	</blockquote>
	</p>
</blockquote>

<h3>
Understanding the SPECNU CLEAN Process
</h3>

<blockquote>
<p>
This process enables sources (once analysed) to be cleaned, and is similar 
to the earlier version of SPEC CLEAN.  It differs from SPEC CLEAN by having a 
<i>persist</i> parameter.
</p>

<p>
Thus with SPECNU CLEAN you can specify how long a signal must <i>persist</i> 
before you will accept it as valid data (rather than simply noise to be eliminated).
</p>

<p>
This avoids the 'bubbling' problem of the original SPEC CLEAN. With SPEC 
CLEAN, when a signal was near the noise threshold, the spectrum might be 
judged as acceptable signal, or as noise, from one window to another, 
possibly changing rapidly between (accepted) signal and (eliminated) 
noise.  The result of this switching on and off of the signal in the 
output, is a 'bubbling' effect in the sound. The <i>persist</i> 
parameter ensures that the signal does not bubble in and out in this way.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This process is intended for cleaning up recordings made in noisy 
environments.  It may be used alongside various editing and filtering 
processes, to clean a source sound bit by bit.
</p>
</blockquote>

<p>
End of SPECNU CLEAN<br />
<a href="#SPECNULIST">Return</a> to List of functions for cleanup operations  
on analysis files<br />
<a href="ccdpndex.htm" Target = "_top"><b>Return</b></a> to Main Index 
for the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ********************************************************** -->
<h2 id="MATRIX">MATRIX &#150; Matrix manipulation of spectrum of sound</h2>

<h3>
Usage
</h3>
<b>matrix matrix 1</b>&nbsp;&nbsp;&nbsp; <i>infile outfiles analchans winoverlap</i> [<b>-c</b>]<br>
<b>matrix matrix 2</b>&nbsp;&nbsp;&nbsp; <i>infile outfile inmatrixfile</i> [<b>-c</b>]<br>
<b>matrix matrix 3,4</b> <i>infile outfiles analchans winoverlap</i>


<h3>
Modes
</h3>
<blockquote>
<b>1</b>&nbsp; Generates matrix, and transformed sound.<br>
<b>2</b>&nbsp; Use input matrix data to transform sound.<br>
<b>3</b>&nbsp; Exchange real and imaginary values in FFT output.<br>
<b>4</b>&nbsp; Invert phase in each channel, octave to octave<br>
</blockquote>


<h3>
Parameters
</h3>
<blockquote>
<i>infile</i> &#150; input soundfile (MONO) <br>
<i>outfile(s)</i> &#150; output soundfile (adds extension) and (Mode 1) <i>outname</i>.txt matrix file<br>
<i>analchans</i> &#150; number of analysis channels, as used in PVOC (Power-of-2: 4-16384)<br> 
<i>winoverlap</i> &#150; overlap of analysis windows, as used in PVOC (Range: 1-4)<br>
<i>inmatrixfile</i> &#150; text datafile generated by Mode 1<br>
<b>-c</b> &#150; Apply matrix-transform cyclically:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            window1 = spec * matrix  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            window2 = spec * matrix * matrix  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            window3 = spec * matrix * matrix * matrix  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            and so on.
</blockquote>



<h3>
Understanding the MATRIX  Process
</h3>

<blockquote>
<p>
...<br>
Mode 1 tends to produce extreme distortion, even with very low-level infile (t.b.c).

</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>

</p>
</blockquote>

<p>
End of MATRIX<br />
<a href="#SPECNULIST"><b>Return</b></a> to list of SPECNU functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> to Spectral Index
</p>
<hr><!-- ****************************************************** -->

<h2 id="RAND">SPECNU RAND &#150; Randomise the order of spectral windows</h2>

<h3>
Usage
</h3>
<b>specnu rand</b> <i>inanalfile outanalfile</i> [<b>-t</b><i>timescale</i>] [<b>-g</b><i>grouping</i>]
<br />

<p>
Example command line to randomise the order of spectral windows:<br>
	<blockquote>
	<b><code>specnu rand inanlfile outanalfile 0.5 50</code></b>
	</blockquote>
</p>

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input analysis file<br />
<i>outanalfile</i> &#150; output analysis file<br />
<b>-t</b><i>timescale</i> &#150; determines the number of windows locally-randomised.  Default:  all the windows are randomised<br />
<b>-g</b><i>grouping</i> &#150; consecutive windows are grouped into sets of size <i>grouping</i>.  These sets are randomised.  The default grouping is one window per set.
	<blockquote>
	<i>Timescale</i> may vary over time.
	</blockquote>
</blockquote>

<h3>
Understanding the SPECNU RAND Process
</h3>

<blockquote>
The degree of randomisation is controlled by the user.  By default a set contains only one window.  If all the windows are randomised, this means that the maximum randomisation is achieved.  The amount of randomisation can be reduced in two ways using the optional parameters.
	<ul>
	<li>Setting a <i>timescale</i> focuses the randomisation into specific time areas.  Thus, as you move forward through the input file, time-specific areas will be jumbled.</li>
	
	<li>Giving a value for <i>grouping</i> &gt; 1 keeps this number of consecutive windows the same, but then jumbles the sets of windows.</li>
	<ul>

</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
SPECNU RAND provides a way of texturing a sound.  Furthermore, as it is operating in the Spectral Domain, the process will create timbral variations.
</blockquote>

<p>
End of SPECNU RAND<br />
<a href="#SPECNULIST"><b>Return</b></a> to list of SPECNU functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ****************************************************** -->


<h2 id="REMOVE">SPECNU REMOVE &#150; Remove a pitched component from the 
spectrum of a sound</h2>

<h3>
Usage
</h3>
<b>specnu remove 1-2</b> <i>inanalfile outanalfile midimin midimax 
rangetop atten</i>
<br />

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Removes pitch and its harmonics up to a specified frequency 
limit<br />
<b>2</b>&nbsp; Removes everything besides the specified pitched material<br />
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input analysis file with pitched components<br />
<i>outanalfile</i> &#150; resulting analysis file with pitched component 
removed<br />
<i>midimin</i> &#150; minimum pitch to remove (MIDI pitch values 1-127)<br />
<i>midimax</i> &#150; maximum pitch to remove (MIDI pitch values 1-127) 
(all pitches between <i>midimin</i> and <i>midimax</i> are removed)<br />
<i>rangetop</i> &#150; frequency (hz) at which the search for associated 
harmonics (TO BE ELIMINATED) stops<br />
<i>atten</i> &#150; degree of attenuation of the suppressed components 
Range: 0 to 1 (1 = maximum attenuation, 0 = no attenuation)
<br />
	<p>
	<blockquote>
	The MIDI range between <i>minimin</i> and <i>midimax</i> should 
	be small.<br />
	If the range is an octave or more, the whole spectrum between  
	<i>midimin</i> and <i>rangetop</i> will be removed.
	</blockquote>
	</p>
</blockquote>

<h3>
Understanding the SPECNU REMOVE Process
</h3>

<blockquote>
<p>
SPECNU REMOVE will only work with stable, clearly-pitched components 
in the spectrum.  It allows unwanted signals with steady pitch to be removed 
from a source.  Deciding how many harmonics (and how large a pitch-range) 
should be eliminated is a matter of judgement based on listening to the 
results.  Removing more is not necessarily better as the resulting hole in 
the spectrum can appear to emphasize the very pitch(band) you wanted to 
eliminate.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This process is intended for cleaning up recordings made in noisy 
environments.  It is particularly useful for removing pitched components of 
speech from unwanted speaking voices behind a recording.  (Filtering 
processes can be used to remove unwanted sibillants).  It may be used 
alongside various editing and filtering processes, to clean a source sound 
bit by bit.  These various functions are integrated in the <i><b>Cleaning 
Kit</b></i> option on the <i>Music Testbed</i> of the <i>Sound Loom</i>.
</p>

<p>
Applied to a vocal sound, Mode <b>1</b> leaves a modest 'hole' in the 
sound.  Trevor Wishart writes:  "There are lots of complications in 
removing a pitch from a sound, which the user will discover.  If you 
remove too many harmonics, the hole itself seems to produce the very 
pitch you were trying to remove!  I have no idea why this is.  The 
high frequency limit should therefore be kept <i>as low as possible</i> 
if you are seriously attempting to remove an existing pitch element 
from a sound."
</p>

<p>
Mode <b>2</b>, in removing everything else, can leave a rather pinched 
voice, which may have compositional uses.
</p>
</blockquote>

<p>
End of SPECNU REMOVE<br />
<a href="#SPECNULIST">Return</a> to List of functions for interacting 
spectra at top of this file<br />
<a href="ccdpndex.htm"><b>Return</b></a> to Main Index for the CDP System.<br />
<a href="cspecndx.htm"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ****************************************************** -->

<h2 id="SLICE">SPECNU SLICE &#150; Divide an analysis file into individual 
frequency bands, saving each as a separate analysis file;<br>
invert spectrum around given frequency (mode 5)</h2>

<h3>
Usage
</h3>
<b>specnu slice 1-3</b> <i>inanalfile outanalfile bandcnt chanwidth</i><br />
<b>specnu slice 4</b> <i>inanalfile outanalfile pitchdata</i><br />
<b>specnu slice 5</b> <i>inanalfile outanalfile freq</i><br />
<br />


<h3>
Modes
</h3>

<blockquote>
<b>Mode 1</b>&nbsp; Moir&eacute;e slice &#150; alternate <i>chanwidth</i>-wide 
(groups of) channels are sent to the different output files.<br />

  <blockquote>
	For example: with <i>bandcnt</i> = 3 and <i>chanwidth</i> = 1, 
	groups of just 1 channel width are selected cyclically, to make 
	3 output files:
	<ul>
	<li>File 1 gets channels  0 : 3 : 6 : 9 : 12 : 15 : 18 ... etc.</li>
	<li>File 2 gets channels  1 : 4 : 7 : 10 : 13 : 16 : 19 ... etc.</li>
	<li>File 3 gets channels  2 : 5 : 8 : 11 : 14 : 17 : 20 ... etc.</li>
	</ul>

	With <i>bandcnt</i> = 2 and <i>chanwidth</i> = 2, groups of 2-channel 
	width are selected cyclically, to make 2 output files:

	<ul>
	<li>File 1 gets channels  0+1 : 4+5 : 8+9 : 12+13 : 16+17 ... etc.</li> 
	<li>File 2 gets channels  2+3 : 6+7 : 10+11 : 14+15 : 18+19 ... 
	etc.</li>
	</ul>

	With <i>bandcnt</i> = 5 and <i>chanwidth</i> = 4, groups of 4-channel 
	width are selected cyclically, to make 5 output files:

	<ul>
	<li>File 1 gets channels 0+1+2+3 : 20+21+22+23 ... etc.</li>
	<li>File 2 gets channels 4+5+6+7 : 24+25+26+27 ... etc.</li>
	<li>File 3 gets channels 8+9+10+11 : 28+29+30+31 ... etc.</li>
	<li>File 4 gets channels 12+13+14+15 : 32+33+34+35 ... etc.</li>
	<li>File 5 gets channels 16+17+18+19 : 36+37+38+39 ... etc.</li>
	</ul>
  </blockquote>

<b>Mode 2</b>&nbsp; Frequency band slice &#150; equivalent to Mode <b>1</b>. 
The <i>chanwidth</i> is defined as frequency (in Hz) rather than as a 
count of analysis channels  (Range: 43.066406 to 11025.0).<br />
<br />
<b>Mode 3</b>&nbsp; Pitch band slice &#150; similar to Mode <b>2</b>, but the 
<i>chanwidth</i> is now defined in semitones, and the slices are of equal 
<b>pitch width</b> (rather than of equal <b>frequency</b> width, as in 
Modes <b>1</b> and <b>2</b>.<br />
<br />
<b>Mode 4</b>&nbsp; Harmonics slice &#150; similar to Mode <b>2</b>, but each 
band is centered on a harmonic of the sound.  The position of the harmonics 
is determined from the <i>pitchdata</i> textfile (possibly extracted 
using <a href = "crepitch.htm#GETPITCH">REPITCH GETPITCH</a> &#150; 
using Mode <b>2</b> to produce a breakpoint text file).<br><br>
<b>Mode 5</b>&nbsp; Invert spectrum &#150; spectral frequencies are inverted, around a given frequency value.

</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input analysis file<br />
<i>outanalfile</i> &#150; multiple output analysis files:  the first file 
is as named, the second and subsequent files replace the last 
character of the first file's name with '1', '2', etc.<br />
<i>bandcnt</i> &#150; the number of output files (and the channel 
separation of the bands in the output sounds)<br />
<i>chanwidth</i> &#150; values differ in the various modes:
	<ul>
	<li>Mode <b>1:</b> <i>chanwidth</i> is the <b>number of 
	channels</b> in each band in each output sound</li>
	<li>Mode <b>2:</b> <i>chanwidth</i> is the <b>width in Hz</b> 
	of each band in each output sound</li>
	<li>Mode <b>3:</b> <i>chanwidth</i> is the <b>width in 
	semitones</b> of each band in each output sound</li>
	</ul>
<i>pitchdata</i> &#150; breakpoint text file containing <i>time pitch</i> 
value pairs<br>
<i>freq</i> (Mode 5) &#150;  the frequency around which to invert all spectral frequencies.

</blockquote>

<h3>
Understanding the SPECNU SLICE Process
</h3>

<blockquote>
<p>
This process slices a signal into a number of spectral components, that can then be reassembled into the original sound, or used in some other way.  The output sounds will contain a number of bands (<i>bandcnt</i>) and channel widths 
(<i>chanwidth</i>), depending on the user's selections, so each sound will be an amalgam of different parts of the original source.
</p>

<p>
It is not possible to predict which sound will appear higher or lower, as each sound is made up of slices taken from the whole range of the source.  Thus it all depends on what the source contains.  In the various band slices, there could be:
	<ul>
	<li>nothing at all (don't be surprised if you get a silent outfile)</li>
	<li>something, but a very low level (i.e., amplitude)</li>
	<li>something very prominent</li>
	<li>something that combines the contents of another band (in the 
	stack in question) to produce a prominent output.</li>
	</ul>
</p>

<p>
In Mode <b>4</b>, the lower the pitch of the source, the more outputs are 
produced because there are more potential harmonics before you reach the 
maximum frequency limit.  In fact, there can be a very large number of 
output files, many of which will be silent.  This process does not know if 
there is any energy at any particular harmonic.  It just tracks where the 
harmonics of the sound would be, and reports what it finds.  A pure sine 
tone for example is going to produce many silent outputs.  The number of 
silent outputs will be reduced if the sound has a very rich or bright 
spectrum, the program is of more use with this kind of input file.
</p>

<p>
Mode <b>5</b> does not produce multiple outputs and is, in effect, a separate function. The frequencies that make up the spectrum of a sound are inverted (turned upside-down) above and below the given frequency value, so that those that went upwards from this frequency now go down, and vice versa. A pitched sound will normally be turned into one with inharmonic partials. This is a powerful technique to create entirely new timbres from familiar sounds, and may be compared with <a href="cstrange.htm#SHIFT">STRANGE SHIFT</a>, which also creates inharmonic sounds. 
</p>

</blockquote>


<h3>
Musical Applications
</h3>

<blockquote>
<p>
At the moment it appears to be a way to get a number of tonally different 
versions of the input analysis file rather quickly.  The potential for 
composition lies in possible recombinations of these rather unpredictable 
slices, especially if they are processed separately before being 
recombined.
</p>

<p>
To give some idea of what might be done, consider that interesting IRCAM 
experiment where different rates of vibrato are applied to the odd and to 
the even harmonics of a vocal sound.  You start with the odd harmonics in 
the left channel and the even harmonics in the right channel.  With no 
vibrato, and you hear a (mono) voice at stage centre.  But when you apply 
a differentiated vibrato you hear a 'clarinet' in one channel and a 'cello' 
in the other.  This suggests the idea of generalising this approach, 
applying different processes to the different harmonics, and recombining 
the results, to see what happens.  Do you get an elaborate variation of 
the original sound or does the single original image split into several 
different images, and if so might this be musically useful?
</p>

<p>
The potentially large number of outputs suggests that it would be 
practical to approach using this program by means of batch processing, 
perhaps controlled by scripting with a batch file or higher level 
scripting language.  Scripting multi-sound playback, for example, 
would enable all the outputs to be heard in sequence, and this could 
then be extended to eliminating silent files or processing e.g., 
alternate files in different ways.
</p>
</blockquote>

<p>
End of SPECNU SLICE<br />
<a href="#SPECNULIST">Return</a> to List of functions for interacting 
spectra at top of this file<br />
<a href="ccdpndex.htm" Target = "_top"><b>Return</b></a> to Main Index 
for the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
</p>

<hr> <!-- *********************************************************** -->

<h2 id="SPECGRIDS">SPECGRIDS &#150; Partition a spectrum into parts, over a grid
</h2>

<em><b>This function is identical to <a href = "#SLICE">SPECNU SLICE</a>, Mode 1, as Trevor Wishart has confirmed.</b></em>

<h3>
Usage
</h3>
<b>specgrids specgrids</b> <i>inanalfile1 outanalfilesname outfilecnt changrouping</i>
<br />

<p>
Example command line to partition the spectrum:<br>
	<blockquote>
	<b><code>specgrids specgrids mysnd.ana  split.ana 8 8</code></b><br />
	(produces multiple output files: split0.ana, split1.ana, etc.)
	</blockquote>
</p>


<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile1</i> &#150; input (mono) analysis file<br />
<i>outanalfilename</i> &#150; root name for a series of output analysis files<br />
<i>outfilecnt</i> &#150; the number of output spectral files to create<br />
<i>chan-grouping</i> &#150; the number of adjacent channels per group in the output spectra
	<blockquote>
	<b>NB: The product of <i>outfilecnt</i> and <i>chan-grouping</i> must be an (even) divisor of the spectral channel-count, e.g., 512</b>.	
	</blockquote>

</blockquote>

<h3>
Understanding the SPECGRIDS Process
</h3>

<blockquote>
<p>
This program enables you to separate out different parts of a sounds spectrum and place these different parts over a multi-channel rig.  First it divides the spectrum of a set of disjunct spectra.  This means that the input analysis file needs to have distinctly different spectral features &#150; heard as timbral colours.
</p>

<p>
Each output spectrum will contain some selection of the spectral channels of the source, while setting the other channels to zero amplitude.  Between them, the complete set of output spectra contains all the channel info from the source.
</p>

<p>
Now you are in a position to resynthesise the different segment-streams separately and distribute the resulting soundfiles over a multichannel output.  Thus the spectrum of the original sound is distributed around the multichannel space.
</p>


</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
Let's look at this more closely.  If the input file has 16 channels "<b>abcdefghijklmnop</b>":
<ul>
<li>With 2 outfiles and <i>chan-grouping</i> = 1,<br />
the outfiles contain "<b>a-c-e-g-i-k-m-o</b>" and "<b>b-d-f-h-j-l-n-p</b>" respectively.</li>
<li>With 2 outfiles and <i>chan-grouping</i> = 2,<br />
the outfiles contain "<b>ab-ef-ij-mn</b>" and "<b>cd-gh-kl-op</b>".</li>
<li>With 2 outfiles and <i>chan-grouping</i> = 4,<br />
the outfiles contain "<b>abcd-ijkl</b>" and "<b>efgh-mnop</b>".</li>
<li>With 2 outfiles and <i>chan-grouping</i> = 8,<br />
the outfiles contain "<b>abcdefgh</b>" and "<b>mnopijkl</b>".</li>

<li>With 4 outfiles and <i>chan-grouping</i> = 1,<br />
the outfiles contain "<b>a-e-i-m</b>" "<b>b-f-j-n</b>" "<b>c-g-k-o</b>" and "<b>d-h-l-p</b>".</li>
<li>With 4 outfiles and <i>chan-grouping</i> = 2,<br />
the outfiles contain "<b>ab-ij</b>" "<b>cd-kl</b>" "<b>ef-mn</b>" and "<b>gh-op</b>".</li>
<li>With 4 outfiles and <i>chan-grouping</i> = 4,<br />
the outfiles contain "<b>abcd</b>" "<b>efgh</b>" "<b>ijkl</b>" and "<b>mnop</b>".</li>
</ul>
</blockquote>

<p>
End of SPECGRIDS<br />
<a href="#SPECLIST"><b>Return</b></a> to list of SPEC functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ========================================================================= -->
<h2 id="SPECULATE">SPECULATE &#150; Generate versions of source with channel data progressively permutated</h2>

<h3>
Usage
</h3>
<b>speculate speculate</b> <i>inanalfile outname minfrq maxfrq</i> [<b>-r</b>]


<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input frequency-analysis file 
<i>outname</i> &#150; generic name for the (numbered) output files to generate. Files are named &lt;outname&gt;_0, &lt;outname&gt;_1,... etc.<br>
<i>minfrq</i> &#150;  lowest frequency used for channel-permutations. (Range: 5-10000 Hz)<br>
<i>maxfrq</i> &#150;  highest frequency used for channel-permutations. (Range: 150-10000 Hz)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NB: <i>maxfrq</i> must be at least 129.199 Hz more than <i>minfrq</i>.<br>
<b>-r</b> &#150;  remove any other components.
</blockquote>



<h3>
Understanding the SPECULATE Process
</h3>

<blockquote>
<p>
SPECULATE progressively swaps channel data, following a permutation sequence like "Plain-Bob" bell-ringing. It produces an output file for each swap, so these typically number <b><i>several hundred</i></b> files, unless the frequency range is restricted (see <i>minfreq</i> and <i>maxfreq</i>).
</p><p>
The audio outputs start with the original sound and progressively become shriller (like successive high-pass filtering); once the sequence has passed the half-way point, this process is reversed and they become progressively more like the original again.
</p><p>
Setting the <b>-r</b> flag to "Remove other components" may reduce the number of output files. Every ten files or so will sound a little different, but it's hard to know how to handle such a vast amount of timbral variation. 
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
<b>SPECULATE</b> is a powerful way of producing scores of timbral variants of the source sound, if you can handle the sheer number of outputs. You might for example use
 <a href="cgroedit.htm#SPHINX"><b>SFEDIT SPHINX</b></a> to switch between some of them at various times.
</p>
</blockquote>

<p>
End of SPECULATE<br />
<a href="#SPECLIST"><b>Return</b></a> to list of SPEC functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
 
</p>


<hr><!-- ****************************************************** -->

<h2 id="SQUEEZE">SPECNU SQUEEZE &#150; Squeeze spectrum in frequency range, around a specified centre frequency</h2>

<h3>
Usage
</h3>
<b>specnu squeeze</b> <i>inanalfile outanalfile centrefrq squeeze</i><br />

<p>
Example command line to create the squeeze effect:<br>
	<blockquote>
	<b><code>specnu squeeze inanalfile outanalfile 341 0.4
</code></b>
	</blockquote>
</p>

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input analysis file<br />
<i>outanalfile</i> &#150; output analysis file<br />
<i>centrefrq</i> &#150;frequency in Hz around which frequency data is squeezed<br />
<i>squeeze</i> &#150; the amount the spectrum is squeezed (&lt; 1)
	<blockquote>
	All parameters may vary over time:<br />breakpoint files containing <i>time centrefrq</i> and <i>time squeeze</i> data columns separated by a space or a tab.
	</blockquote>
</blockquote>

<h3>
Understanding the SPECNU SQUEEZE Process
</h3>

<blockquote>
<p>
Note that the frequency at which the squeezing is to take place can be specified (<i>centrefrq</i>).  The result will be some form of intensification (aural density) in that part of the sound.  The degree of density will depend on the <i>squeeze</i> factor, higher factors yielding complex 'tones' in the midst of the overall sound.
</p>

<p>
At the time of writing, the program is producing output centred around 341Hz, only. However, combined with suitable transposition(s), e.g. using <a href = "crepitch.htm#TRANSPOSE">REPITCH TRANSPOSE</a>, it might still be a useful way to colour a sound.
</p>
</blockquote>

<!--
<h3>
Musical Applications
</h3>

<blockquote>
...
</blockquote>
-->

<p>
End of SPECNU SQUEEZE<br />
<a href="#SPECNULIST"><b>Return</b></a> to list of SPECNU functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ****************************************************** -->

<h2 id="SUBTRACT">SPECNU SUBTRACT &#150; Eliminate from the source file 
any persisting signal that falls below a threshold (defined by the 
<i>noisfile</i>) AND subtract the amplitude of the noise in the 
<i>noisfile</i> from any source file signal that is passed
</h2>

<h3>
Usage
</h3>
<b>specnu subtract</b> <i>sigfile noisfile outanalfile persist noisgain</i> 
<br />

<h3>
Parameters
</h3>

<p>
<blockquote>
<i>sigfile</i> &#150; input analysis file with noise to be removed<br />
<i>noisfile</i> &#150; a sample of noise, cut from the original signal, 
containing only (a sample of) the noise you wish to remove from the 
<i>sigfile</i></br />
<i>outanalfile</i> &#150; output analysis file with noise removed<br />
<i>persist</i> &#150; minimum time (in ms.) for which the clean signal must 
persist <i>above the threshold level</i> if it is to be retained. (Range 0 
to 1000 ms.)<br />
<i>noisgain</i> &#150; multiplies the threshold noise-levels found in the 
<i>noisfile</i> by an amount you specify, before they are used for 
comparison with the source file.  (Range: 1 to 40).
	<blockquote>
	<b>NB:</b> Both input files are analysis files.
	</blockquote>
</blockquote>

<h3>
Understanding the SPECNU SUBTRACT Process
</h3>

<blockquote>
<p>
This process is similar to SPECNU CLEAN.  SPECNU CLEAN assumes that, once 
your desired signal has reached an appropriate level it will mask any 
persisting background noise.  With very noisy environments, this may not be 
sufficient, and the entire noise signal will need to be subtracted from the 
source. This process is only useful where the noise in the signal is 
persistent (e.g. the noise of an air-conditioning unit.)
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This process is intended for cleaning up recordings made in noisy 
environments.  It may be used alongside various editing and filtering 
processes, to clean a source sound bit by bit. These various functions are 
integrated in the <i><b>Cleaning Kit</b></i> option on the <i>Music 
Testbed</i> of the <i>Sound Loom</i>.
</p>
</blockquote>

<p>
End of SPECNU SUBTRACT<br />
<a href="#SPECNULIST">Return</a> to List of functions for cleaning up 
analysis files<br />
<a href="ccdpndex.htm"><b>Return</b></a> to Main Index for the CDP System.<br />
<a href="cspecndx.htm"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ****************************************************** -->


<h2>
<a name = "SPECNUTECHNICAL">Additional information</a> about cleaning 
soundfiles in SoundLoom
</h2>

<p>
The four SPECNU cleaning functions and several others are integrated in the 
<b>Cleaning Kit</b> option on the <b>Music Testbed</b> of the 
<i>Sound Loom</i>.  The following screen indicates what is available:<br />
<br />
<div align = center>
<IMG SRC = "images/SL-CleaningKit.jpg" align = center></a><br />
</div>
</p>

<p>
The way these functions relate to the SPECNU programs is hidden to the 
user, as the <i>Sound Loom</i> Cleaning Kit builds the SPECNU functionality 
into a much broader context.  The input to the Cleaning Kit is a normal 
soundfile, not an analysis file, and when a selection is made and the 
CLEAN button is activated, new dialogues appear which enable you to enter 
data and complete the processing.
</p>

<p>
More information is included in a page from Trevor Wishart's website: <a href = "slcleaningkit.htm" Target="_blank"><b>SoundLoom Cleaning Kit</b></a>.  This document contains a great deal of useful 
information about potential problem areas in sounds and how one might 
deal with them.
</p>

<!-- ********************************************************** -->
  <div id = "footer">
   <p>
    <address>
    Last Updated 22 May 2023 for CDP8<br />
    Documentation: Archer Endrich<br />
    Revisions: Robert Fraser<br>
    All observations &amp; ideas for improvement appreciated<br />
    Composers Desktop Project Ltd<br />
    Email: cdpse9@gmail.com<br />
    &#169; Copyright 1998-2021 Archer Endrich &amp; CDP<br>
    </address>
   </p>
  </div>

</div> <!-- End of 'right' (contents) indentation -->

</body>

</html>