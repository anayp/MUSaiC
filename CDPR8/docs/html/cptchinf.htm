<!DOCTYPE html>
<html lang="en">
<!-- cptchinf.htm -->
<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>CDP PITCH INFO Functions</title>
<meta charset="UTF-8" />
	<link rel = "stylesheet"
	 type = "text/css"
	 href = "cdpmanshtml5.css" />
<link rel="icon"  href="images/cdp_favicon.ico">
    <style>
	a { text-decoration: none }
	a:hover { color:#FF3333;
          text-decoration: underline }          	
    </style>
</head>

<body>

<div id = "left"> <!-- Keep indexing on left ABOVE headlines so index goes to top of page -->

  <p>
  <div align = "center">
  <IMG SRC = "images/cdpcircs90.jpg"></a>
  </div>
  </p>

  <p>
  <nav>
  <!-- list-style-type NOT removing bullets in IE9, using Definition List -->
  <dl>
  <dt><a href="ccdpndex.htm" Target="_top"><b>Main Index</b></a>
  <dt><a href="cspecndx.htm" Target="_top"><b>Spectral Index</b></a> 
  <dt><a href="filestxt.htm" Target="_blank"><b>File Formats</b></a>
  <hr>
  <br />
  <dt><a href="#PITCHINFOLIST"><b>PITCHINFO:</b></a>
  <dt>&nbsp;&nbsp;<a href = "#CONVERT"><b>CONVERT</b></a>
  <dt>&nbsp;&nbsp;<a href = "#HEAR"><b>HEAR</b></a>
  <dt>&nbsp;&nbsp;<a href = "#INFO"><b>INFO</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SEE"><b>SEE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#ZEROS"><b>ZEROS</b></a>
  <!-- 
  <br /><br /> 
  <dt><a href = "#PINFTECHNICAL" ><b>Technical</b></a>
  <br /><br />
   -->
  </dl>
  </p>

</div>  <!-- End of left index panel -->

<div id = "right"> <!-- Keep headlines here so index goes to top of page -->

   <div id = "head">

   <!-- 
   <p><IMG SRC="images/cdpcircs.jpg" align=left ALT="CDP circles logo"></a></p>
   -->
   <div align=center>
   <br>
   <img src="images/cdplogo2.jpg" ALT="CDP Logo">
   </div>

   <h1 align=center>
   CDP Spectral Pitch Data Information</h1>
   <h2 align=center><font color="#3366ff"> (with Command Line Usage)</font></h2>
   </div>  <!-- End of 'head' -->

<!-- ========================================================================= -->
<h2 align = "center" id="PITCHINFOLIST">Functions to obtain information about spectral pitch data</h2>

<dl>
<dt><a href="#CONVERT"><b>CONVERT</b></a><dd>Convert a binary pitch data file to a <i>time frequency</i> breakpoint text file </dd>
<dt><a href="#HEAR"><b>HEAR</b></a><dd>Convert binary pitchfile to analysis test tone file (resynthesise to hear pitch)  </dd>
<dt><a href="#INFO"><b>INFO</b></a><dd>Display information about pitch data in a (binary) pitchfile  </dd>
<dt><a href="#SEE"><b>SEE</b></a><dd>Convert binary pitchfile or transposition file to a pseudo-soundfile, for viewing  </dd>
<dt><a href="#ZEROS"><b>ZEROS</b></a><dd>Show whether a pitch data file contains uninterpolated zeros (unpitched windows)  </dd>
<!-- 
<dt><a href="#PINFTECHNICAL"><b>Technical Discussion</b></a> <dd> Information 
About Spectral Pitch Data
 -->
</dl>


<hr><!-- ******************************************************* -->
 
<h2 id="CONVERT">PITCHINFO CONVERT &#150; Convert a binary pitch 
data file to a <i>time frequency</i> breakpoint text file
</h2>

<h3>
Usage
</h3>
<b>pitchinfo convert</b> <i>pitchfile outtextfile</i> [<b>-d</b><i>I</i>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150;  input binary pitch data file as produced by <a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a><br>
<i>outtextfile</i> &#150;  output breakpoint text file in the form: <i>Time 
Frequency(Hz)</i><br>
<b>-d</b><i>I</i> &#150;  <i>I</i> is the acceptable pitch error in the 
breakpoint file data-reduction process (<i>I</i> is given in semitones, 
where 1 = one semitone, 0.5 = &#188; tone, etc.).  Range: &gt; 0.0.  
Default:  eighth-tone = 0.250000.<br>
</blockquote>

<h3>
Understanding the PITCHINFO CONVERT Function
</h3>

<p>
PITCHINFO CONVERT converts the binary format of a 
REPITCH GETPITCH binary pitch contour file to a breakpoint text file 
format, which can then be viewed and edited with a text editor.
The <i>Data reduction</i> parameter controls the pitch resolution 
of the breakpoint data, reducing the amount of data displayed, and 
therefore making it easier to read the data.  Set the parameter so 
that you do not lose too much detail of pitch resolution.
</p>

<h3>
Musical Applications
</h3>

<p>
The list of times and frequencies can be useful when planning filtering 
operations, because it shows what the main pitch range of the sound is 
and when key frequency changes occur.
</p>

<h3>
Related functions
</h3>
<p>
<a href = "crepitch.htm#PCHTOTEXT"><b>PCHTOTEXT</b></a>, <a href = "cgropsow.htm#PTOBRK"><b>PTOBRK</b></a>, <a href = "crepitch.htm#BRKTOPI"><b>BRKTOPI</b></a>.  
</p>

<p>
End of PITCHINFO CONVERT<br>
<a href="#PITCHINFOLIST"><b>Return</b></a> to List of functions to obtain pitch 
data information at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr><!-- ******************************************************* -->
 
<h2 id="HEAR">PITCHINFO HEAR &#150; Convert binary pitchfile to analysis test 
tone file (resynthesise to hear pitch)
</h2>

<h3>
Usage
</h3>
<b>pitchinfo hear</b> <i>pitchfile outfile</i> [<b>-g</b><i>gain</i>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150;  input binary pitch data file, as output by 
<a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a><br>
<i>outfile</i> &#150;  output analysis file, ready for resynthesis and audition<br>
<b>-g</b><i>gain</i> &#150;  scales the amplitude of the <i>outfile</i>.  Must be 
&gt; 0.0 (Default: 1.0)<br>
</blockquote>

<h3>
Understanding the PITCHINFO HEAR Function
</h3>

<p>
Once the pitch contour of a sound has been extracted using 
<a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a>, 
the pitch contour can be heard by converting the binary 
<i>pitchfile</i> to a synthetic tone which follows the pitch contour.  
This provides a rapid aural check on the accuracy of the pitch-extraction 
process.  Remember that you need to resynthesise the <i>outfile</i>, 
or play it via <a href="csysutil.htm#PVPLAY"><b>PVPLAY</b></a>.
</p>

<p>
Note that, if unpitched windows are retained when using REPITCH GETPITCH, 
PITCHINFO HEAR will refuse to operate, returning the message:  "File ... 
contains unpitched windows:  cannot proceed."
</p>

<p>
Don't be too surprised by the output!  It follows the contour in a 
continuous manner, i.e., glissing from value to value.
</p>

<p>
A test file of this nature can also be produced directly by 
<a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a>.
</p>

<h3>
Musical Applications
</h3>

<p>
This function produces a synthetic tone which follows the pitch contour, 
enabling it to be heard.  This provides a rapid aural check on the 
accuracy of the pitch-extraction process. It can be important actually 
to hear what <a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a> has made of a particular source file, 
particularly if the pitch contour is going to be a key shaping device 
for another process.  (Formerly SPEC PAUD.)
</p>

<p>
The <i>outfile</i> produced by REPITCH GETPITCH can also be resynthesised 
for audition, or played via <a href="csysutil.htm#PVPLAY"><b>PVPLAY</b></a>.
</p>

<p>
End of PITCHINFO HEAR<br>
<a href="#PITCHINFOLIST"><b>Return</b></a> to List of functions to obtain pitch 
data information at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr><!-- ******************************************************* -->

<h2 id="INFO">PITCHINFO INFO &#150; Display information about pitch data 
in a (binary) pitchfile</h2>

<h3>
Usage
</h3>
<b>pitchinfo info</b> <i>pitchfile</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150;  input binary pitch data file, as output by 
<a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a><br>
</blockquote>

<h3>
Understanding the PITCHINFO INFO Function
</h3>

<p>
This function analyses the data in a binary pitchfile and reports on 
the mean pitch, the highest and lowest pitch (including when they 
occurred) in both frequency-in-Hz and MIDI note number formats.  It 
also displays the total range, in octaves and semitones.  The display 
is on-screen, not to a file.
</p>

<p>
Here is an example of the output of this function:<br>
<h3 align=center>PITCHINFO INFO Output Example</h3>
<p>
<div align=center>
<table border="1" cellpadding="5" bgcolor="#B0E0E6">
<tr>
<td>MAX PITCH: 343.59HZ</td>
<td>MIDI: 64.72</td>
<td>TIME 1.26</td>
</tr>
<tr>
<td>MIN PITCH : 79.97HZ</td>
<td>MIDI : 39.48</td>
<td>TIME 2.94</td>
</tr>
<tr>
<td>MEAN PITCH : 198.27HZ</td>
<td>MIDI : 55.20</td>
<td><br></td>
</tr>
<tr>
<td colspan=3><br></td>
</tr>
<tr>
<td colspan=3>TOTAL RANGE: 2 OCTAVES and 1.24 SEMITONES</td>
</tr>
</table>
</div>
</p>
</p>

<h3>
Musical Applications
</h3>

<p>
This output gives us a snapshot of the overall pitch range of a 
soundfile, with the times at which the highest and lowest pitches 
occur.  This can be particularly useful when, for example, defining 
a filterbank to operate on this file.  See, for example, <a href="cgrofilt.htm#USERBANK"><b>FILTER USERBANK</b></a>.
</p>

<p>
End of PITCHINFO INFO<br>
<a href="#PITCHINFOLIST"><b>Return</b></a> to List of functions to obtain pitch 
data information at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr><!-- ******************************************************* -->

 
<h2 id="SEE">PITCHINFO SEE &#150; Convert binary pitchfile or transposition 
file to a pseudo-soundfile, for viewing</h2>

<h3>
Usage
</h3>
<b>pitchinfo see 1</b> <i>pitchfile outsndfile scalefact</i><br>
<b>pitchinfo see 2</b> <i>transposfile outsndfile</i>
<br>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Use binary pitch data file as input and scale viewing range 
with <i>scalefact</i><br>
<b>2</b>&nbsp; Use binary transposition data file as input &#150; scaling is 
automatic.<br>  
&nbsp;&nbsp;&nbsp;&nbsp;<b>NB</b> &#150; this input transposition file is made by 
<a href="crepitch.htm#COMBINE"><b>REPITCH COMBINE</b></a> (or <a href="crepitch.htm#COMBINEB"><b>REPITCH COMBINEB</b></a>).<br>
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150;  input binary pitch data file (output by <a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a>)<br>
<i>scalefact</i> &#150;  viewing scale factor (must be &gt; 0.0)<br>
<i>transposfile</i> &#150;  binary pitch transposition file (output by <a href="crepitch.htm#COMBINE"><b>REPITCH COMBINE</b></a>&#47;B)<br>
<i>outsndfile</i> &#150;  a pseudo-soundfile ready for viewing by a soundfile 
view/edit program<br>
	<p>
	<blockquote>
	<b>Warning:</b>  do not attempt to play the <i>Outsndfile</i> 
	produced by PITCHINFO SEE.
	</blockquote>
	</p>
</blockquote>

<h3>
Understanding the PITCHINFO SEE Function
</h3>

<p>
In Mode <b>1</b>, <i>pitchfile</i> is a binary pitch data file.  
<i>Scalefact</i> (&gt; 0.0) multiplies pitch values, for ease of viewing.  
Pitch data scaled by (e.g.) 100 can be read directly from <i>outsndfile</i>, 
remembering to divide numeric values by 100 to return to their actual 
value.
</p>

<p>
In Mode <b>2</b>, <i>transposfile</i> is a binary transposition data file.  
Transposition data is automatically scaled to &#189; the maximum range 
and displayed in logarithmic format (0 = no transposition, + = up, 
- = down), giving a schematic idea ONLY, of transposition data.
</p>

<h3>
Musical Applications
</h3>

<p>
Open the pseudo-soundfile <i>outsndfile</i> for 
viewing with a sound viewer editor, such as CDP's VIEWSF.  
Remember that this is a pseudo-soundfile!  Its display 
is not sample-by-sample, but window-by-window.   
</p>

<p>
Also, as the amplitude range of soundfiles is -32768 to 32767 and the 
range of pitches is likely to be between 16Hz and ca 3500Hz, it may be 
a good idea to scale up the pitch data by e.g., a factor of 100.  It 
will then use the whole range of the pitch viewing screen, giving a 
clear indication of pitch contour, and the pitch data can be read off, 
to the 2<sup>nd</sup> decimal place &#150; remembering to divide the 
viewed values by 100 (whatever <i>scalefact</i> was), in order to get the 
real values.
</p>

<p>
If <i>scalefact</i> is too high, the values will be truncated, and you'll 
probably see some clipping (horizontal lines at the top).  Reduce the 
value for <i>scalefact</i> if this occurs. (This function was formerly SPEC PSEE.)
</p>

<p>
End of PITCHINFO SEE<br>
<a href="#PITCHINFOLIST"><b>Return</b></a> to List of functions to obtain pitch 
data information at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr><!-- ******************************************************* -->
 
<h2 id="ZEROS">PITCHINFO ZEROS &#150; Show whether a pitch data file contains 
uninterpolated zeros (unpitched windows)</h2>

<h3>
Usage
</h3>
<b>pitchinfo zeros</b> <i>pitchfile</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150;  input binary pitch data file as produced by <a href="crepitch.htm#GETPITCH"><b>REPITCH GETPITCH</b></a>
</blockquote>

<h3>
Understanding the PITCHINFO ZEROS Function
</h3>

<p>
When REPITCH GETPITCH analyses a sound for its pitch contour, it is looking 
for pitch data in each window.  If the data does not meet the criteria 
set for finding a pitch, and if the <b>-z</b> flag is set, it will 
retain these windows, setting them to -1.
</p>

<h3>
Musical Applications
</h3>

<p>
With this function you can see how well pitch is being extracted from 
your sound.  Is it that it does not have any significant pitch content, 
or have you perhaps set the parameters inappropriately?  And where exactly 
are these non-pitch events?
</p>


<p>
End of PITCHINFO ZEROS<br>
<a href="#PITCHINFOLIST"><b>Return</b></a> to List of functions to obtain pitch 
data information at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<!-- <hr> -->

<!-- 
<h2 id="PINFTECHNICAL">Technical Discussion about Obtaining Spectral 
Pitch Information</h2>

<p>
...
</p>

<p>
End of Technical Discussion<br>
<a href="#PITCHINFOLIST"><b>Return</b></a> to List of functions to obtain 
spectral pitch information at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>
 -->

<!-- ********************************************************** -->
  <div id = "footer">
   <p>
    <address>
    Last Updated 11 Apr 2023  (no content changes)<br />
    Documentation: Archer Endrich<br />
    Revisions: Robert Fraser<br>
    All observations &amp; ideas for improvement appreciated<br />
    Composers Desktop Project Ltd<br />
    Email: cdpse9@gmail.com<br />
    &#169; Copyright 1998-2021 Archer Endrich &amp; CDP<br>
    </address>
   </p>
  </div>

</div> <!-- End of 'right' (contents) indentation -->

</body>

</html>