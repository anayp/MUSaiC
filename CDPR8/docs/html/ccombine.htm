<!DOCTYPE html>
<html lang="en">
<!-- ccombine.htm - HTML5 version -->
<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>CDP COMBINE Functions</title>
<meta charset="UTF-8" />
	<link rel = "stylesheet"
	 type = "text/css"
	 href = "cdpmanshtml5.css" />
<link rel="icon"  href="images/cdp_favicon.ico">
    <style>
	a { text-decoration: none }
	a:hover { color:#FF3333;
          text-decoration: underline }          	
    </style>
</head>

<body>

<div id = "left"> <!-- Keep indexing on left ABOVE headlines so index goes to top of page -->

  <p>
  <div align = "center">
  <IMG SRC = "images/cdpcircs90.jpg"></a>
  </div>
  </p>

  <p>
  <nav>
  <!-- list-style-type NOT removing bullets in IE9, using Definition List -->
  <dl>
  <dt><a href="ccdpndex.htm" Target="_top"><b>Main Index</b></a>
  <dt><a href="cspecndx.htm" Target="_top"><b>Spectral Index</b></a> 
  <dt><a href="filestxt.htm" Target="_blank"><b>File Formats</b></a>
  <hr>
  <br>
  <dt><a href="#COMBINELIST"><b>COMBINE:</b></a>
  <dt>&nbsp;&nbsp;<a href = "#CROSS"><b>CROSS</b></a>
  <dt>&nbsp;&nbsp;<a href = "#DIFF"><b>DIFF</b></a>
  <dt>&nbsp;&nbsp;<a href = "#INTERLEAVE"><b>INTERLEAVE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#MAKE"><b>MAKE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#MAKE2"><b>MAKE2</b></a>
  <dt>&nbsp;&nbsp;<a href = "#MAX"><b>MAX</b></a>
  <dt>&nbsp;&nbsp;<a href = "#MEAN"><b>MEAN</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SUM"><b>SUM</b></a>
  <br><br />
  <b>OTHERS:</b><br>
  <dt>&nbsp;&nbsp;<a href = "#SPECROSS"><b>SPECROSS</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SPECSPHINX"><b>SPECSPHINX</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SPECTWIN"><b>SPECTWIN</b></a>
<br><br>
  <b>SEE ALSO:</b><br>
  <dt>&nbsp;&nbsp;<a href="cxreverb.htm#FASTCONV"><b>FASTCONV</b></a> 
  <br><br />
  <dt><a href="#COMBINETECHNICAL"><b>Technical</b></a>
  </dl>
  </p>

</div>  <!-- End of left index panel -->

<div id = "right"> <!-- Keep headlines here so index goes to top of page -->

   <div id = "head">

   <!-- 
   <p><IMG SRC="images/cdpcircs.jpg" align=left ALT="CDP circles logo"></a></p>
   -->
   <div align=center>
   <br>
   <img src="images/cdplogo2.jpg" ALT="CDP Logo">
   </div>

   <h1 align=center>
   CDP Functions to COMBINE Spectral Data</h1>
   <h2 align=center><font color="#3366ff"> (with Command Line Usage)</font></h2>
   </div>  <!-- End of 'head' -->


<!-- ========================================================================= -->
<h2 align = "center" id="COMBINELIST">Functions to COMBINE spectra from different 
sounds</h2>

<dl>
<dt><a href="#CROSS">COMBINE <b>CROSS</b></a> <dd>Replace spectral amplitudes of 1<sup>st</sup> file with those of 2<sup>nd</sup></dd>
<dt><a href="#DIFF">COMBINE <b>DIFF</b></a> <dd>Subtract one spectrum from another
<dt><a href="#INTERLEAVE">COMBINE <b>INTERLEAVE</b></a> <dd>Interleave (groups of) 
windows of several spectra
<dt><a href="#MAKE">COMBINE <b>MAKE</b></a> <dd>Generate spectrum from pitch &amp; formant data
<dt><a href="#MAKE2">COMBINE <b>MAKE2</b></a> <dd>Generate spectrum from pitch, formant &amp; envelope data
<dt><a href="#MAX">COMBINE <b>MAX</b></a> <dd>In each analysis channel, in each window, take the maximum value amongst the input files
<dt><a href="#MEAN">COMBINE <b>MEAN</b></a> <dd>Generate the spectral 'mean' of 2 sounds
<dt><a href="#SPECROSS"><b>SPECROSS</b></a> <dd>Interpolate partials of pitched <i>inanalfile1</i> towards those of pitched <i>inanalfile2</i></dd>
<dt><a href="#SPECSPHINX"><b>SPECSPHINX</b></a> <dd>Impose the channel amplitudes of inanalfile2 onto the channel frequencies of inanalfile1</dd>
<dt><a href="#SPECTWIN"><b>SPECTWIN</b></a> <dd>Combine the formant and&#47;or total spectral envelopes of two spectra</dd>
<dt><a href="#SUM">COMBINE <b>SUM</b></a> <dd>Find the sum of two spectra </dd>
<br>
<dt><a href="#COMBINETECHNICAL"><b>Technical Discussion</b></a> <dd>Interacting 
Spectra
<br><br>
<dt><b>SEE ALSO:</b>
<dt><a href="cxreverb.htm#FASTCONV"><b>[FASTCONV]</b></a><dd>Multi-channel FFT-based convolution</dd>

</dl>

<p>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- ****************************************************** -->
 
<h2 id="CROSS">COMBINE CROSS &#150; Replace spectral amplitudes of 
1<sup>st</sup> file with those of 2<sup>nd</sup></h2>

<h3>
Usage
</h3>
<b>combine cross</b> <i>infile infile2 outfile</i> [<b>-i</b><i>interp</i>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile, infile2</i> &#150; input analysis files made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<b>-i</b><i>interp</i> &#150; the degree of replacement (Range: 0 to 1)
	<p>
	<blockquote>
	<i>interp</i> may vary over time
	</blockquote>
	</p>
</blockquote>

<h3>
Understanding the COMBINE CROSS Process
</h3>

<blockquote>
<p>
Formerly SPECCROS, this function makes a weighted substitution of the 
amplitude of one spectral envelope for that of the other.  It is 
therefore a fairly straightforward way to achieve a crossover between 
the timbral characteristics of two different sounds.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
The spectral envelope contains the data for spectral peaks&#47;formants.  
Thus the transfer of timbral characteristics.  However, it is not a full 
substitution of the whole envelope, but only a (weighted) crossover.  It 
can therefore be used, for example, to prepare two sounds for morphing, 
especially when the timbral characteristics differ to a considerable 
extent.  By moving one sound gradually into the timbral field of the 
other prior to morphing, a smoother morph transition can be achieved.
</p>
</blockquote>

<p>
End of COMBINE CROSS<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- ****************************************************** -->
 
<h2 id="DIFF">COMBINE DIFF &#150; Find difference of two spectra</h2>

<h3>
Usage
</h3>
<b>combine diff</b> <i>infile infile2 outfile </i>
[<b>-c</b><i>crossover</i>] [<b>-a</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile, infile2</i> &#150; input analysis files made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<b>-c</b><i>crossover</i> &#150; the amount of the 2<sup>nd</sup> 
spectrum subtracted from the 1<sup>st</sup> (Range: 0 to 1)
	<p>
	<blockquote>
	<i>crossover</i> may vary over time
	</blockquote>
	</p>
<b>-a</b>  retain any subzero amplitudes produced (Default: set these to zero)
</blockquote>

<h3>
Understanding the COMBINE DIFF Process
</h3>

<blockquote>
<p>
In COMBINE DIFF one spectrum is subtracted from another on a channel-by-
channel basis (weighted by <i>crossover</i>).  If amplitude in any channel 
goes negative, you can opt whether or not to retain the negative 
amplitudes.
</p>

<p>
By default, the setting of any amplitudes &lt; 0 to 0 protects against 
negative overflow, but you can use the <b>-a</b> flag and see what 
happens.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This is a way to change a sound on a very experimental basis.  
</p>
</blockquote>

<p>
Also see: <a href="#SUM"><b>COMBINE SUM</b></a>.
</p>

<p>
End of COMBINE DIFF<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- *************************************************************** --> 

<h2 id="INTERLEAVE">COMBINE INTERLEAVE &#150; Interleave (groups of) windows of several spectra</h2>

<h3>
Usage
</h3>
<b>combine interleave</b> <i>infile infile2 [infile3 ...] outfile leafsize</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile(s)</i> &#150; an number of input files made with PVOC (at least two), which 
will be processed sequentially in the same order as given on the command 
line<br>
<i>outfile</i> &#150; output analysis file<br>
<i>leafsize</i> &#150; number of analysis windows in each leaf (group of windows)<br>
</blockquote>

<h3>
Understanding the COMBINE INTERLEAVE Process
</h3>

<blockquote>
<p>
COMBINE INTERLEAVE interleaves <i>N</i> 
spectra from <i>N</i> analysis files, thereby constructing a new analysis 
file as output.  The spectral characteristics of several sounds are thus 
amalgamated into one new sound.
</p>

<p>
The degree to which the original sounds are retained depends on the number of 
analysis windows used.
</p>

<p>
A <i>leafsize</i> is simply a specified group of analysis windows.  If 
<i>leafsize</i> is 1, then the windows from each file are interleaved one 
at a time.  If <i>leafsize</i> is 2, then the windows from each file are 
interleaved two at a time, etc.  Larger <i>leafsize</i> retains more 
recognisable chunks of the original sounds.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
With very small values for <i>leafsize</i>, the various sounds are mingled 
quite thoroughly and relatively smoothly &#150; relative to the nature of the 
input sounds, though a somewhat grainy effect may result.  With larger values 
for <i>leafsize</i>, say 8, 10, 20 or more, more of each component sound is 
heard in each leaf and the result is more like a churning or pulsating effect 
as the new soundfile oscillates among the sound material in the various 
source soundfiles.  To churn means to shake, stir or agitate violently, 
as when making butter from milk, which is nicely descriptive of what 
happens when several sound sources, each fairly strong, are interleaved 
in this way.  [It's one of my favourites! &#150; A.E].
</p>
</blockquote>

<p>
End of COMBINE INTERLEAVE<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- **************************************************** -->
 
<h2 id="MAKE">COMBINE MAKE &#150; Generate spectrum from pitch 
&amp; formant data only</h2>

<h3>
Usage
</h3>
<b>combine make</b> <i>pitchfile formantfile outfile</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150; a binary pitch data file (<b>.frq</b>) as produced 
by REPITCH GETPITCH, REPITCH GENERATE, REPITCH COMBINE Mode <b>2</b> or BRKTOPI <br /> 
<i>formantfile</i> &#150; a binary formant data file (<b>.for</b>) as produced 
by FORMANTS GET<br />  
<i>outfile</i> &#150; analysis file (<b>.ana</b>) which can be resynthesized 
with PVOC<br />
</blockquote>

<h3>
Understanding the COMBINE MAKE Process
</h3>

<blockquote>
<p>
MAKE combines a binary pitch data file (<b>.frq</b>) with a formant (spectral envelope) file (<b>.for</b>) to make a spectral file (<b>.ana</b>): <b>.frq</b> + <b>.for</b> = <b>.ana</b>.<br> 
Both input files must have been derived from the same PVOC settings.<br>
</p>

<p>
COMBINE MAKE provides the standard route back to sound, following the processes of the REPITCH suite. <a href="crepitch.htm#GETPITCH">REPITCH GETPITCH</a> extracts time-varying pitch data from a spectral analysis file and the REPITCH functions offer a number of ways to manipulate this information. Pitch-breakpoint files can also be edited manually and converted to binary pitch files (<b>.frq</b>) via the function BRKTOPI, or the latter can be synthesised by REPITCH GENERATE.  To get back to sound, the new pitch data file must be combined with a formant file (<b>.for</b>).
</p>

<p>  
COMBINE MAKE is also an interesting way to combine the pitch data and the timbral 
(formant) data from any two arbitrarily chosen sounds.
</p>
</blockquote>

<p>
End of COMBINE MAKE<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- ****************************************************** -->

<h2 id="MAKE2">COMBINE MAKE2 &#150; Generate a spectrum from only 
pitch, formant and envelope data</h2>

<h3>
Usage
</h3>
<b>combine make2</b> <i>pitchfile formantfile envfile outfile</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>pitchfile</i> &#150; a binary pitch data file (<b>.frq</b>) as produced 
by REPITCH GETPITCH, REPITCH GENERATE or REPITCH COMBINE, Mode <b>2</b><br />
<i>formantfile</i> &#150; a binary formant data file (<b>.for</b>) as 
produced by FORMANTS GET<br />
<i>envfile</i> &#150; a binary envelope file (<b>.evl</b>) produced &#47; 
modified in the Time Domain or derived from an analysis file (.ana) 
by REPITCH ANALENV<br />
<i>outfile</i> &#150; an analysis file <b>.ana</b> that can be resynthesised 
with PVOC
</blockquote>

<h3>
Understanding the COMBINE MAKE2 Process
</h3>

<blockquote>
<p>
<b>.frq</b> + <b>.for</b> + <b>.evl</b> = <b>.ana</b><br />
This function can be used to combine the pitch contour, formant 
envelope, and loudness envelope of different sounds, thereby 
transferring the characteristics of one sound onto another.
MAKE2 extends the functionality of MAKE by enabling (spectral) 
envelope data to be used as well.
</p>

<p>   
The source sound could also be recreated from the data in the pitch, 
formant and envelope files extracted from its own spectrum.  
This provides a way to check on the accuracy of the extraction &#150; 
small details, especially of noise sounds, often get changed.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
New sounds can be engineered with this procedure by combining three 
different features of up to three different sounds.  The pitch data file 
contains an extracted pitch contour, the formant data file contains 
the strongest, most resonant, frequency bands of the spectrum, and the 
envelope file contains the contour of the spectral envelope, the (changing) 
amplitude pattern made by the frequencies.  Given that you are alert to 
the distinctive characteristics of your sounds, this function provides 
a tremendously powerful tool with which to construct new sonic material.
</p>

<p>
This is important not just from a purely sonic point of view.  It is also 
an important tool for creating structural relationships between sounds, 
that is, the duplication of identical or similar shapes within a 
composition.  This can create obvious relationships or it can be used 
to create subtle, hardly perceptible connections.  Overall, the result 
is to achieve a sense of unity within the composition, even when diverse 
materials are being used.  We are familiar with this in note-based 
music, where motifs and themes can have similar components, contours etc.  
COMBINE MAKE and COMBINE MAKE2 therefore provide a vital compositional 
tools in the spectral realm.
</p>

<p>
Recreating the original sound from its own pitch, formant and envelope 
data provides a diagnostic tool for assessing how the analysis is coping 
with the frequency contents of a sound.
</p>
</blockquote>

<p>
End of COMBINE MAKE2<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- ****************************************************** -->

<h2 id="MAX">COMBINE MAX &#150; In each analysis channel, in each 
window, take the maximum value amongst the input files</h2>

<h3>
Usage
</h3>
<b>combine max</b> <i>infile infile2 [infile3 ...] outfile</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile, infile2 [infile3 ...]</i>&#150; arbitrary number of input analysis 
files<br>
<i>outfile</i>&#150; output analysis file
</blockquote>

<h3>
Understanding the COMBINE MAX Process
</h3>

<blockquote>
<p>
COMBINE MAX studies the data in all the input analysis files.  For each 
channel it retains only the single loudest spectral component <i>among 
all the input files</i>.  In spite of the loss of the other components, 
the sound often remains the same to a remarkable degree.  But how several 
sounds will merge in this way will be a little unpredictable:  because 
data from the files which DO NOT have the loudest spectral component will 
simply be omitted.
</p>

<p>
The spectral characteristics of the input sounds are just merged, producing 
an ultra-seamless mix.  The input sounds remain recognisable, just like 
an ordinary mix.  Note that this is different from the programs which 
transfer the spectrum or spectral envelope of a sound.  With the latter, 
the audible characteristics of one of the sounds are noticeably changed.
</p>

<p>
Rob Waring's wonderful <i>hornwhivoc</i> sound (included on the <i>Future Music</i> cover CD for December 1993), which we often use for demos, was made with this function.  
It merges a horn, a whistle and a voice &#150 timbrally very different sounds.  
</p>
</blockquote>

<p>
End of COMBINE MAX<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- ****************************************************** -->
 
<h2 id="MEAN">COMBINE MEAN &#150; Generate the spectral 'mean' of 
2 sounds</h2>

<h3>
Usage
</h3>
<b>combine mean mode</b> <i>infile infile2 outfile</i> 
[<b>-l</b><i>lofrq</i>] [<b>-h</b><i>hifrq</i>] [<b>-c</b><i>chans</i>] [<b>-z</b>]
<br>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; mean channel amp of 2 files : mean of two pitches<br>
<b>2</b>&nbsp; mean channel amp of 2 files : mean of two frequencies<br>
<b>3</b>&nbsp; channel amp from file 1 &nbsp;&nbsp;&nbsp;&nbsp;: mean of two 
pitches<br>
<b>4</b>&nbsp; channel amp from file 1 &nbsp;&nbsp;&nbsp;&nbsp;: mean of two 
frequencies<br>
<b>5</b>&nbsp; channel amp from file 2 &nbsp;&nbsp;&nbsp;&nbsp;: mean of two 
pitches<br>
<b>6</b>&nbsp; channel amp from file 2 &nbsp;&nbsp;&nbsp;&nbsp;: mean of two 
frequencies<br>
<b>7</b>&nbsp; max channel amp of 2 files : mean of two pitches<br>
<b>8</b>&nbsp; max channel amp of 2 files : mean of two frequencies<br>
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile, infile2</i> &#150; input analysis files made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<b>-l</b><i>lofrq</i> &#150; low frequency limit of channels to look at<br>
<b>-h</b><i>hifrq</i> &#150; high frequency limit of channels to look at<br>
<b>-c</b><i>chans</i>&#150;  number of significant channels to compare.  
Default:  ALL within range.<br>
<b>-z</b> zeroes channels OUTSIDE the frequency range specified<br>
</blockquote>

<h3>
Understanding the COMBINE MEAN Process
</h3>

<blockquote>
<p>
This program takes 2 input sounds and calculates the average of the 2 
signals, spectral window by spectral window.  The average in loudness 
between, for example, two speech sounds, should reach some vague mean 
between the formants of the speech components being used.  The frequency 
average is altogether more strange.  It may, for example, convert 
harmonic into inharmonic spectra.  Seriously wierd.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
It is not really possible to predict the results of this way to 
combine sounds, as they are so dependent on the nature of the sources.  
It is best to try it with the type of source file you favour and try 
to build up some experimental data about what happens.
</p>
</blockquote>

<p>
End of COMBINE MEAN<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr> <!-- *********************************************************** -->

<h2 id="SPECROSS">SPECROSS PARTIALS &#150; Interpolate partials of 
pitched <i>inanalfile1</i> towards those of pitched <i>inanalfile2</i>
</h2>

<h3>
Usage
</h3>
<b>specross partials</b> <i>inanalfile1 inanalfile2 outanalfile 
tuning minwin signois harmcnt lo hi thresh level interp</i>
<br />

<p>
Example command line to interpolate pitched partials between 
analysis files:<br>
	<blockquote>
	<b><code>specross partials p3c.ana horn2.ana p3xh2.ana 
	4 5 80 5 50 2000 0.2 1 0.2</code></b>
	</blockquote>
</p>


<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile1</i> &#150; first input analysis file towards which the 
partials are interpolated<br />
<i>inanalfile2</i> &#150; second input analysis file from which the partials 
are derived<br />
<i>outanalfile</i> &#150; output analysis file with the partials from 
the second file interpolated towards those of the first<br />
<i>tuning</i> &#150; the range in semitones within which the harmonics 
are 'in tune'; higher values are more 'forgiving' and use more of the 
second file (Range: 0.0 to 6.0, Default: 1)<br />
<i>minwin</i> &#150; the minimum number of adjacent windows that must 
be pitched, for a pitch-value to be registered (Default: 2)<br />
<i>signois</i> &#150; the signal-to-noise ration, in decibels (Default 80dB). 
Windows that are greater than <i>signois</i>dB below the maximum level 
in the sound are assumed to be noise, and any detected pitch is assumed 
to be spurious.<br />
<i>harmcnt</i> &#150; The number of the 8 loudest peaks in the spectrum 
which much be harmonics in order to confirm that the sound is pitched 
(Default 5)<br />
<i>lo</i> &#150; the lowest acceptable frequency for a pitch (Default: 
10Hz)<br />
<i>hi</i> &#150; the highest acceptable frequency for a valid pitch 
(Default: Nyquist/8, i.e., 2756.25 at a sample rate of 44100:  
sample rate divided by 2 and then divided by 8:  44100 &divide; 2 = 
22050 &divide; 8 = 2756.25.  The program adjusts <i>hi</i> according 
to the sample rate of the input file.)<br />
<i>thresh</i> &#150; the minimum acceptable level of any partial found, 
if it is to be used in reconstructed spectrum (level relative to loudest 
partial).  A lower value is more 'forgiving' and uses more of the 
second file.  A higher value accepts only the loudest partials.<br />
<i>level</i> &#150; the level of the output (Default: 1.0).  Use if 
reapplying <i>inanalfile1</i> to several <i>inanalfile2s</i>, whose relative 
level is important.<br />
<i>interp</i> &#150; the interpolation between <i>inanalfile2</i> and 
<i>inanalfile1</i>, which can vary through time.  Breakpoint time values 
will be scaled to the duration if <i>inanalfile1</i>.  A lower value 
reduces the effect of <i>inanalfile2</i>, i.e., it 'lets through' more 
of a recognisable second file, rather than just its partials. (Default? Range?)<br />
<b>-a</b> &#150; retain the loudness contour of <i>inanalfile2</i>, under 
the contour of <i>inanalfile1</i>.  What does this mean?<br />
<b>-p</b> &#150; extend the first stable pitch of <i>inanalfile1</i> to 
the start of the <i>outanalfile</i>
</blockquote>

<h3>
Understanding the SPECROSS PARTIALS Process
</h3>

<blockquote>

<p>
The importance of SPECROSS PARTIALS is that it is focusing on <b>pitched</b> sounds.  An interpolation is being between one sound and another: in this case, of the harmonic partials, i.e., those that are integer multiples.  These are heard as pitches because the partials fuse into a single (pitched) entity.  This is a welcome addition to the CDP transition programs, because the others deal with any partial, whether harmonic or inharmonic.
</p>

<p>
The harmonically-related partials taken from the pitched source in effect form a colouration, not unlike a formant.  This colouration is taken from the second sound and imposed on the first, thus re-colouring it.  If the <i>thresh</i> and <i>interp</i> parameters are set to high values, the partials-colouration is so strong that there is virtually nothing left audible from the rest of sound-2, only the colouration comes across to sound-1.  If the <i>thresh</i> and <i>interp</i> parameters are on the low side, some of the rest of the sound will come across as well.  The example command line uses lower values.
</p>

<p>
Other parameters such as <i>tuning</i> provide ways to fine-tune just how the harmonic qualities of sound2 are picked up.  A lower value here is more 'forgiving' and is likely to use more partials.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This program provides a tool to work with recolouring pitched sounds.  
The various parameters enable you to define how intensely this is done, 
how focused the result is on the harmonically related partials, and 
how much else of the second sound is used, making its presence more 
audible in the output sound.
</p>

<p>
Although designed for use with two pitched sounds, I tried recolouring the vocal file <i>count.ana</i> with the sound of a horn (<i>horn2.ana</i>, which was <i>horn.ana</i> + <i>horn.ana</i> joined with ANALJOIN JOIN).  The result was a highly modulated vocal sound with a significant amount of horn colouration &#150; a rather interesting result.
</p>

<p>
Also see a number of other programs that deal with data transfers between sounds:
	<ul>
	<li>
	<a href = "cmorph.htm#MORPH">MORPH MORPH</a> &#150; to 
	make gradual transitions between the spectrum of one file and 
	that of another.</li>
	<li>
	<a href = "cmorph.htm#NEWMORPH">NEWMORPH&#47;2</a> &#150; to 
	make gradual transitions between the spectral peaks of one file and 
	that of another.</li>
	<li>
	<a href = "cmorph.htm#BRIDGE">MORPH BRIDGE</a> &#150; to 
	make a gradual transition from one time-specified analysis window 
	to another.</li>
	<li>
	<a href = "cmorph.htm#GLIDE">MORPH GLIDE</a> &#150; to 
	make a gradual transition from a single analysis window 
	to another.</li>
	<li>
	<a href = "cformant.htm#VOCODE">FORMANTS VOCODE</a> &#150; to 
	impose the formants from the second sound onto the first.</li>
	<li>
	<a href = "ccombine.htm#CROSS">COMBINE CROSS</a> &#150; to 
	replace the channel amplitudes of the first file with those 
	of the second.</li>
	</ul>
It may be useful to compare the results obtained with SPECROSS PARTIALS 
with those of <a href = "chilite.htm#TRACE">HILITE TRACE</a>, which retains 
the <i>N</i> loudest partials &#150; any partial, without constraining 
them to harmonically related (i.e., pitched) partials.
</p>
</blockquote>

<p>
End of SPECROSS PARTIALS<br />
<a href="#SPECLIST"><b>Return</b></a> to list of SPEC functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr><!-- ****************************************************** -->

<h2 id="SPECSPHINX">SPECSPHINX &#150; Impose channel amplitudes of <i>inanalfile2</i> onto the channel frequencies of <i>inanalfile1</i> OR Multiply the spectra
</h2>

<h3>
Usage
</h3>
<b>specsphinx specsphinx 1</b> <i>inanalfile1 inanalfile2 outanalfile</i> [<b>-a</b><i>ampbalance</i>] [<b>-f</b><i>frqbalance</i>]<br />
OR:<br />
<b>specsphinx specsphinx 2</b> <i>inanalfile1 inanalfile2 outanalfile</i> [<b>-b</b><i>bias</i>] [<b>-g</b><i>gain</i>]<br />


<p>
Example command line to impose channel amplitudes:<br>
	<blockquote>
	<b><code>specsphinx specsphinx 1 in1.ana in2.ana out.ana -b0.5 -f0.5</code></b>
	</blockquote>
</p>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Impose channel amplitudes of <i>inanalfile2</i> onto the channel frequencies of <i>inanalfile1</i><br />
<b>2</b>&nbsp; Multiply the spectra
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile1</i> &#150; input analysis file 1<br />
<i>inanalfile2</i> &#150; input analysis file 2<br />
<i>outanalfile</i> &#150; output analysis file<br />
<b>-a</b><i>ampbalance</i> &#150; proportion of <i>inanalfile1</i>'s amplitudes that are retained.  Default = 0<br />
<b>-f</b><i>frqbalance</i> &#150; proportion of <i>inanalfile2</i>'s frequencies injected into the output spectrum.  Default = 0<br />
<b>-b</b><i>bias</i> &#150; When non-zero, it adds a proportion of the original files to the output:<br />
   &nbsp;&nbsp;&nbsp;<b>&lt; 1</b>: add <i>inanalfile1</i> to <i>outanalfile</i> in the proportion determined by the formula <code>-bias&#47;(1 + bias)</code><br />
   &nbsp;&nbsp;&nbsp;<b>&gt; 1</b>: add <i>inanalfile2</i> to <i>outanalfile</i> in the proportion determined by the formula <code>bias&#47;(1 - bias)</code><br />
<b>-g</b><i>gain</i> &#150; overall gain applied to the output
	<blockquote>
	 <i>ampbalance</i>, <i>frqbalance</i>, <i>bias</i> and <i>gain</i> may vary over time 
	</blockquote>
</blockquote>

<h3>
Understanding the SPECSPHINX Process
</h3>

<blockquote>
<P>
SPECSPHINX is one of three experimental programs designed to create spectra that are intermediate between two given spectra.  (The other two are <a href = "cmorph.htm#NEWMORPH">NEWMORPH</a> and <a href = "#SPECTWIN">SPECTWIN</a>.
</p>

<p>
Mode 1 is related to <a href="ccombine.htm#CROSS">COMBINE CROSS</a>, which replaces the channel amplitudes with those of Infile2. (Here, <i>ampbalance</i> sets the proportion of amplitudes to be retained.)
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
...
</blockquote>

<p>
End of SPECSPHINX<br />
<a href="#SPECLIST"><b>Return</b></a> to list of SPEC functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
</p>


<hr> <!-- ****************************************************** -->

<h2 id="SPECTWIN">SPECTWIN</a> &#150; Combine the formant and&#47;or total spectral envelopes of 2 spectra</h2>

<h3>
Usage
</h3>
<b>spectwin spectwin 1-4</b> <i>inanalfile1 inanalfile2 outanalfile</i> [<b>-f</b><i>frqint</i>] [<b>-e</b><i>envint</i>] [<b>-d</b><i>dupl</i> <b>-s</b><i>step</i> <b>-r</b><i>dec</i>] 
<br />

<p>
Example command line to create combined spectra:<br>
	<blockquote>
	<b><code>spectwin spectwin 1 in1.ana in2.ana out.ana</code></b>
	</blockquote>
</p>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Formant envelope of <i>inanalfile1</i> with the formant envelope of <i>inanalfile2</i><br />
<b>2</b>&nbsp; Formant envelope of <i>inanalfile1</i> with the total envelope of <i>inanalfile2</i> <br />
<b>3</b>&nbsp; Total envelope of <i>inanalfile1</i> with the formant envelope of <i>inanalfile2</i> <br />
<b>4</b>&nbsp; Total envelope of <i>inanalfile1</i> with the total envelope of <i>inanalfile2</i>
	<blockquote>
	The <b>formant envelope</b> traces out the envelope formed by the peaks in the spectrum.<br />
	The <b>total envelope</b> traces out the envelope formed by EVERY channel in the spectrum.
	</blockquote>
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile1</i> &#150; input analysis file 1<br />
<i>inanalfile2</i> &#150; input analysis file 2<br />
<i>outanalfile</i> &#150; output analysis file<br />
<b>-f</b><i>frqint</i> &#150; dominance of the spectral frequencies of <i>inanalfile2</i>.  (Range: 0 to 1.  Default: 1.0)<br />
<b>-e</b><i>envint</i> &#150; dominance of the spectral envelope of <i>inanalfile2</i>.  (Range: 0 to 1.  Default: 1.0)<br /><br>
Note that the next three optional parameters are linked:<br />
<b>-d</b><i>dupl</i> &#150; duplicate the sound of <i>inanalfile1</i> <i>dupl</i> times, at higher pitches (Range: 0 to 8) <br />
<b>-s</b><i>step</i> &#150; the transposition step in (fractions of) semitones at each duplication (Range: 0 to 48) <br />
<b>-r</b><i>dec</i> &#150; the amplitude level multiplier from one transposition to the next when creating the transposed duplications (Range: 0 to 1)
</blockquote>

<h3>
Understanding the SPECTWIN Process
</h3>

<blockquote>
SPECTWIN creates hybrid sounds by combining the formant envelopes and&#47;or total spectral envelopes of two files. <i>frqint</i> and <i>envint</i> specify the dominance of <i>inanalfile2</i>'s spectral frequencies and spectral envelope, respectively.  Various hybrids can be formed by reducing the effect of one of these.  Roughly speaking, if <i>envint</i> is at maximum and <i>frqint</i> is at minimum, the result is a transformation of <i>inanalfile1</i>  (heavily influenced by <i>inanalfile2</i>); if the reverse, the effect is a transformation of <i>inanalfile2</i>.
</p><p>
You can optionally duplicate Infile 1 <i>dupl</i> times at higher pitches; if chosen, the interval is set as <i>step</i> semitones and <i>dec</i> determines how much each duplicate should be attenuated (1 = no attenuation). 
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
This function can create a wide variety of hybrids between two sounds. If both sounds are the same, the duplication feature on its own is virtually the spectral equivalent of <a href="cgromody.htm#STACK"><b>MODIFY STACK</b></a>: in Modes 3 or 4, set <i>frqint</i> and <i>envint</i> to 0, and <i>dec</i> to a high value. This method can be used to add extra brightness to the timbre.
</p><p>
If one source file is longer than the other, the outfile length is that of the shorter file.  (R.F.)    
</blockquote>

<p>
End of SPECTWIN<br />
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting spectra at top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
</p>

<hr> <!-- *************************************************************** --> 

<h2 id="SUM">COMBINE SUM</a> &#150; Find the sum of two spectra</h2>

<h3>
Usage
</h3>
<b>combine sum</b> <i>infile infile2 outfile</i> <b>-c</b><i>crossover</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<b>-c</b><i>crossover</i>  <i>crossover</i> is the amount of 2<sup>nd</sup> 
spectrum which is added to the 1<sup>st</sup> (Range 0 to 1)
	<p>
	<blockquote>
	<i>crossover</i> may vary over time
	</blockquote>
	</p>
</blockquote>

<h3>
Understanding the COMBINE SUM Process
</h3>

<blockquote>
<p>
COMBINE SUM examines the amplitude levels in each channel of each of the 
two input analysis files.  Where they differ, it <b>adds</b> this difference 
to the 1<sup>st</sup> file, as weighted by <i>crossover</i>.  In other 
words, the result is <i>infile</i> plus the <b>difference</b> between it 
and <i>infile2</i>.  When resynthesising, watch out for clipping.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This is a way to adjust the timbre of a sound by adding to it some 
part of of the timbral features which belong to another sound.  Very often, 
the change is both major and relatively unpredictable.
</p>
</blockquote>

<p>
Also see: <a hre="#DIFF"><b>COMBINE DIFF</b>.
</p>

<p>
End of COMBINE SUM<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<hr><!-- ****************************************************** -->

<h2 id="COMBINETECHNICAL">Technical Discussion of Interacting Spectra</h2>

<blockquote>
<p>
As mentioned in the text for MAKE2, there are both sonic and compositional 
reasons for combining the features of different sounds.
</p>

<p>
Another application is for morphing, to create intermediate stages when 
morphing from one sound to another.  This presumes that a morph is meant 
to be perceptually different from a transition.  The latter implies a 
smooth changeover from the first to the second.  A morph, however, can 
imply a gradual and perceptible <i>reshaping</i> of the first with the 
features of the second.  All of the COMBINE functions can be explored 
with this in mind: sums (SUM), differences (DIFF), means (MEAN) of sounds, 
unpredictable mixes of the loudest frequencies (MAX), combinations of 
pitch traces, resonant frequencies and spectral amplitude contours 
MAKE and MAKE2), and even an intermediate stage that interleaves the 
two files (INTERLEAVE).
</p>
</blockquote>

<p>
End of Technical Discussion<br>
<a href="#COMBINELIST"><b>Return</b></a> to List of COMBINE functions for interacting 
spectra at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top"><b>Return</b></a> 
to Spectral Index
</p>

<!-- ********************************************************** -->
  <div id = "footer">
   <p>
    <address>
    Last Updated 27 Apr 2023 for CDP8<br />
    Documentation: Archer Endrich<br />
    Revisions: Robert Fraser<br>
    All observations &amp; ideas for improvement appreciated<br />
    Composers Desktop Project Ltd<br />
    Email: cdpse9@gmail.com<br />
    &#169; Copyright 1998-2021 Archer Endrich &amp; CDP<br>
    </address>
   </p>
  </div>

</div> <!-- End of 'right' (contents) indentation -->

</body>

</html>