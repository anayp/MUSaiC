<!DOCTYPE html>
<html lang="en">
<!-- cgrogrns.htm  - GRAIN HTML5 version -->
<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>CDP GRAIN Functions</title>
<meta charset="UTF-8" />
	<link rel = "stylesheet"
	 type = "text/css"
	 href = "cdpmanshtml5.css" />
<link rel="icon"  href="images/cdp_favicon.ico">
    <style>
	a { text-decoration: none }
	a:hover { color:#FF3333;
          text-decoration: underline }          	
    </style>
</head>

<body>

<div id = "left"> <!-- Keep indexing on left ABOVE headlines so index goes to top of page -->

  <p>
  <div align = "center">
  <IMG SRC = "images/cdpcircs90.jpg"></a>
  </div>
  </p>

  <p>
  <nav>
  <!-- list-style-type NOT removing bullets in IE9, using Definition List -->
  <dl>
  <dt><a href="ccdpndex.htm" Target="_top"><b>Main Index</b></a>
  <dt><a href="cgroundx.htm" Target="_top"><b>'Groucho' Index</b></a> 
  <dt><a href="filestxt.htm" Target="_blank"><b>File Formats</b></a>
  <hr>
  <br />
  <dt><a href="#GRAINLIST"><b>GRAIN:</b></a>
  <dt>&nbsp;&nbsp;<a href = "#ALIGN"><b>ALIGN</b></a>
  <dt>&nbsp;&nbsp;<a href = "#ASSESS"><b>ASSESS</b></a>
  <dt>&nbsp;&nbsp;<a href = "#COUNT"><b>COUNT</b></a>
  <dt>&nbsp;&nbsp;<a href = "#DUPLICATE"><b>DUPLICATE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#FIND"><b>FIND</b></a>
  <dt>&nbsp;&nbsp;<a href = "#GREV"><b>GREV</b></a>
  <dt>&nbsp;&nbsp;<a href = "#NOISE_EXTEND"><b>NOISE_EXTEND</b></a>
  <dt>&nbsp;&nbsp;<a href = "#OMIT"><b>OMIT</b></a>
  <dt>&nbsp;&nbsp;<a href = "#REMOTIF"><b>REMOTIF</b></a>
  <dt>&nbsp;&nbsp;<a href = "#REORDER"><b>REORDER</b></a>
  <dt>&nbsp;&nbsp;<a href = "#REPITCH"><b>REPITCH</b></a>
  <dt>&nbsp;&nbsp;<a href = "#REPOSITION"><b>REPOSITION</b></a>
  <dt>&nbsp;&nbsp;<a href = "#RERHYTHM"><b>RERHYTHM</b></a>
  <dt>&nbsp;&nbsp;<a href = "#REVERSE"><b>REVERSE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#R_EXTEND"><b>R_EXTEND</b></a>
  <dt>&nbsp;&nbsp;<a href = "#TIMEWARP"><b>TIMEWARP</b></a>
  <br /><br />
  <b>OTHERS:</b><br>
  <dt>&nbsp;&nbsp;<a href = "#GRAINEX"><b>GRAINEX</b></a>
  <dt>&nbsp;&nbsp;<a href = "#NEWTEX"><b>NEWTEX</b></a>
  <dt>&nbsp;&nbsp;<a href = "#WRAPPAGE"><b>WRAPPAGE</b></a>
  <br><br>
  <b>ALSO SEE:</b>
  <dt>&nbsp;&nbsp;<a href ="cgromody.htm#BRASSAGE"><b>MODIFY BRASSAGE</b></a> 
  <dt>&nbsp;&nbsp;<a href ="cgromody.htm#SAUSAGE"><b>MODIFY SAUSAGE</b></a> 
  <dt>&nbsp;&nbsp;<a href ="cgrnmill.htm"><b>GRAINMILL</b></a> 

  </dl>
  </p>

</div>  <!-- End of left index panel -->

<div id = "right"> <!-- Keep headlines here so index goes to top of page -->

   <div id = "head">

   <!-- 
   <p><IMG SRC="images/cdpcircs.jpg" align=left ALT="CDP circles logo"></a></p>
   -->
   <div align=center>
   <br>
   <img src="images/cdplogo2.jpg" ALT="CDP Logo">
   </div>

   <h1 align=center>CDP GRAIN Functions</h1>
   <h2 align=center><font color="#3366ff"> (with Command Line Usage)</font></h2>
   </div>  <!-- End of 'head' -->


<!-- ========================================================================= -->
<h2 align = "center" id="GRAINLIST">Granular Functions for soundfiles</a></h2>
<p>
The main granular program in CDP is <a href="cgromody.htm#BRASSAGE"><b>MODIFY BRASSAGE</b></a>.<br>
The GRAIN functions here are for manipulating grains in a "grainy" sound, normally one with gaps.<br>
Note that a sound can be quickly granulated with <a href="cgromody.htm#BRASSAGE"><b>MODIFY BRASSAGE</b></a> Mode 5 with a <i>density</i> value of 1.0 or less, which will introduce gaps between the grains:<br><br> 
&bsp;&nbsp;&nbsp;&nbsp;
<code>modify brassage 5 infile outfile density</code><br>
Alternatively, use<b>ENVNU PEAKCHOP</b> combined with <b>ENVEL REPLACE</b>.
</p>
<hr>
<p>
<b><i>Names in brackets mean that these are separate programs.  The others are functions within GRAIN.</i></b>
</p>

<dl>
<dt><a href="#ALIGN"><b>ALIGN</b></a> <dd>Synchronise grain onsets in
2<sup>nd</sup> grainy sound with those in the 1<sup>st</sup>
<dt><a href="#ASSESS"><b>ASSESS</b></a> <dd>Estimate best gate value for
grain extraction</dd>
<dt><a href="#COUNT"><b>COUNT</b></a> <dd>Count grains found in a sound (at given
<i>gate</i> and <i>minhole</i> values)</dd>
<dt><a href="#DUPLICATE"><b>DUPLICATE</b></a> <dd>Duplicate grains in a grainy
sound</dd>
<dt><a href="#GRAINEX"><b>[GRAINEX]</b></a> <dd>Find grains in a sound and extend the area that contains them</dd>
<dt><a href="#GREV"><b>GREV</b></a> <dd>Find and manipulate 'grains', using envelope 
troughs and zero-crossings</dd>
<dt><a href="#NEWTEX"><b>[NEWTEX]</b></a> <dd>Generate a texture of grains made from a source sound or sounds</dd>
<dt><a href="#NOISE_EXTEND"><b>NOISE_EXTEND</b></a> <dd>Find and time-stretch noise 
components in a sound</dd>
<dt><a href="#FIND"><b>FIND</b></a> <dd>Locate timings of grain-onsets
in a grainy sound</dd>
<dt><a href="#OMIT"><b>OMIT</b></a> <dd>Omit a proportion of grains from a grainy
sound</dd>
<dt><a href="#REMOTIF"><b>REMOTIF</b></a> <dd>Change pitch and rhythm of
grains in a grainy sound</dd>
<dt><a href="#REORDER"><b>REORDER</b></a> <dd>Reorder grains in a grainy
sound</dd>
<dt><a href="#REPITCH"><b>REPITCH</b></a> <dd>Repitch grains in a grainy
sound</dd>
<dt><a href="#REPOSITION"><b>REPOSITION</b></a> <dd>Reposition grain onsets
in a grainy sound</dd>
<dt><a href="#RERHYTHM"><b>RERHYTHM</b></a> <dd>Change rhythm of grains in
a grainy sound</dd>
<dt><a href="#REVERSE"><b>REVERSE</b></a> <dd>Reverse order of grains in
a grainy sound without reversing the grains themselves</dd>
<dt><a href="#R_EXTEND"><b>R_EXTEND</b></a> <dd>'Time-stretch' natural sounds 
like the rolled 'rrr' in speech</dd>
<dt><a href="#TIMEWARP"><b>TIMEWARP</b></a> <dd>Stretch (or shrink) the
duration of a grainy sound without stretching the grains themselves</dd>
<a href ="#WRAPPAGE"><b>[WRAPPAGE]</b></a> <dd>Granular reconstitution of one or more soundfiles over multi-channel space</dd>
<br>
<b>ALSO SEE:</b>
<dt><a href ="cgromody.htm#BRASSAGE"><b>MODIFY BRASSAGE</b></a> <dd>Granular reconstitution of a soundfile</dd>
<dt><a href ="cgromody.htm#SAUSAGE"><b>MODIFY SAUSAGE</b></a> <dd>Granular reconstitution of several soundfiles scrambled together</dd>
<dt><a href ="cgrnmill.htm"><b><i>GRAINMILL</i></b></a> <dd>Graphic program for BRASSAGE and SAUSAGE.</dd>
</dl>

<hr><!-- ********************************************************** -->

<h2 id="ALIGN">GRAIN ALIGN &#150; Synchronise grain onsets in
2<sup>nd</sup> grainy sound with those in the 1<sup>st</sup>
</h2>

<h3>
Usage
</h3>
<b>grain align</b> <i>infile1 infile2 outfile offset gate2</i>
[<b>-b</b><i>len</i>][<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile1</i> &#150; 1<sup>st</sup> input soundfile: provides
grain onset times<br>
<i>infile2</i> &#150; 2<sup>nd</sup> input soundfile: provides
the actual grains to be re-timed<br>
<i>outfile</i> &#150; output soundfile<br>
<i>offset</i> &#150; add this value to <b>all</b> grain
timings<br>
<i>gate2</i> &#150; minimum signal level to register grain in
<i>infile2</i>  (Range: 0 to 1)<br>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; minimum signal level to register
grain in <i>infile1</i>  (Range: 0 to 1, Default 0.3)<br>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile1</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br />
	<blockquote>
	<i>gate</i> and <i>gate2</i> may vary over time.
	</blockquote>
</blockquote>

<h3>
Understanding the GRAIN ALIGN Process
</h3>

<blockquote>
<p>
The timing of the grains of <i>infile2</i> is made to match those of
<i>infile1</i>.
</p>

<p>
It may be unwise not to specify a value for the optional parameter
<b>-l</b><i>gate</i> (gate level for <i>infile1</i>).
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
If you achieve an effective grain timing for two sounds, GRAIN ALIGN
makes it possible to create a subtle correspondence between the two
soundfiles.
</p>

<p>
For example, the fine attack-structure of the two sounds can be
synchronised, so that they appear to pulse in parallel.
</p>
</blockquote>

<p>
End of GRAIN ALIGN<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="ASSESS">GRAIN ASSESS &#150; Estimate best gate value for
grain extraction
</h2>

<h3>
Usage
</h3>
<b>grain assess</b> <i>infile</i><br />

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile in which to estimate a
useful gate value<br />
</blockquote>

<h3>
Understanding the GRAIN ASSESS Function
</h3>

<blockquote>

<p>
GRAIN ASSESS is a simple utility to provide useful information
when using the GRAIN set of programs.  You just provide an
input soundfile and it scans the file, displaying a report
such as:<br />
<code>
Maximum grains found = 21 at gate value 0.117100 and windowlen
50ms
</code><br />
The program is therefore assessing which <i>gate</i> value and
which <i>windowlength</i> value will result in the most grains.
You can then use this information in other GRAIN programs.
</p>

</blockquote>

<h3>
Musical Applications
</h3>


<blockquote>
<p>
For example, even as simple a program as GRAIN COUNT gives you the
option to specify a <i>gate</i> value.  GRAIN ASSESS provides the
value that will produce the most grains, and you can take it from
there.  <i>Windowlength</i> also affects the number of grains found.
If it is too long, it may count several grains as one, or if too short,
it may not find some of the grains.
</p>
</blockquote>

<p>
End of GRAIN ASSESS<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="COUNT">GRAIN COUNT &#150; Count grains found in a sound (at
given <i>gate</i> and <i>minhole</i> values)
</h2>

<h3>
Usage
</h3>
<b>grain count</b> <i>infile</i> [<b>-b</b><i>len</i>][<b>-l</b><i>gate</i>]
[<b>-h</b><i>minhole</i>] [<b>-t</b><i>winsize</i>] [<b>-x</b>]<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile in which to count the grains<br>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN COUNT Function
</h3>

<blockquote>
<p>
GRAIN COUNT displays the message: "<i>N</i> grains found at this gate
level."
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
GRAIN COUNT provides a check on the granularity of a file, and also
on the gate level at which a given number of grains is operational.
</p>
</blockquote>

<p>
End of GRAIN COUNT<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="DUPLICATE">GRAIN DUPLICATE &#150; Duplicate grains in a grainy
sound
</h2>

<h3>
Usage
</h3>
<b>grain duplicate</b> <i>infile outfile N</i> [<b>-b</b><i>len</i>] 
[<b>-l</b><i>gate</i>][<b>-h</b><i>minhole</i>] [<b>-t</b><i>winsize</i>] 
[<b>-x</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile<br>
<i>N</i> &#150; number of repetitions of each grain<br>
<b>-b</b><i>len</i> &#150; maximum time between grains.  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>N</i> and <i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN DUPLICATE Process
</h3>

<blockquote>
<p>
This process makes <i>N</i> copies of each grain, proceding through
the <i>infile</i> grain by grain.
</p>

<p>
You are recommended to use GRAIN COUNT with the <i>gate</i> flag to
determine which gate level works best with the file (produces a good
granulation of the source).  This <i>gate</i> level should be used with
GRAIN DUPLICATE.  Not using it appears to produce anomalous results,
such as no grain duplications and a long period of silence.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
The overall effect is that of rapid-fire repeats or a stuttering
effect, depending on the source.
</p>
</blockquote>

<p>
End of GRAIN DUPLICATE<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="FIND">GRAIN FIND &#150; Locate timings of grain-onsets
in a grainy sound
</h2>

<h3>
Usage
</h3>
<b>grain find</b> <i>infile out-textfile</i>  [<b>-b</b><i>len</i>] 
[<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>] [<b>-t</b><i>winsize</i>] 
[<b>-x</b>]
<br />

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile in which to find the grain-onsets<br>
<i>out-textfile</i> &#150; output textfile containing a list of times
in seconds at which each grain begins<br>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN FIND Function
</h3>

<blockquote>
<p>
This function locates and writes to a text file the time in seconds at
which each grain begins.  Again, the effective <i>gate</i> level
determined with GRAIN COUNT should be used.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
Examination of this text file provides a way to check on the results
of the various GRAIN functions which affect the grain timings.  The 
data can be used to retime the grains in another grainy sound.  See 
<a href="#REPOSITION">GRAIN REPOSITION</a>.
</p>
</blockquote>

<p>
End of GRAIN FIND<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="GRAINEX">GRAINEX EXTEND &#150; Find grains in a sound, and extend the area that surrounds them
</h2>

<h3>
Usage
</h3>
<b>grainex extend</b> <i>infile outfile wsiz trof plus stt end</i> 

<p>
Example command line to find and extend grain regions:
<blockquote>

	<code><b>grainex extend in.wav out.wav 30 0.5 2.5 1.5 3.5</b></code> <br>
OR:
<pre>                         WSIZ TROF PLUS STT END
<code><b>grainex extend inf outf  5    0.5  5    0   1</b></code> 
</pre>
</blockquote>
</p>


<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile in which to find the grains<br />
<i>outfile</i> &#150; output soundfile<br />
<i>wsiz</i> &#150; size of window in milliseconds, which determines the size of the grains to find (Range:  1.81406 to file-length &divide; 3ms)<br />
<i>trof</i> &#150; acceptable trough depth, relative to adjacent peaks (Range: &gt; 0 to &lt; 1 &#150; <i>Soundshaper</i> default: 0.5 &#150; see <a href = "#GREXNOTES">Note</a> below)<br />
<i>plus</i> &#150; how much duration to add to the source (Range: 0.000002 to 3600 secs)<br />
<i>stt</i> &#150; time of start of grain material within the source (Range: 0.0 to file-length in seconds)<br />
<i>end</i> &#150; time of end of grain material within the source (Range:  0 to file-length in seconds and &gt; <i>stt</i>)<br />
</blockquote>

<h3>
Understanding the GRAINEX EXTEND Process
</h3>

<blockquote>
<p>
For GRAINEX, as with the other GRAIN functions, you will need a reasonably grainy sound as an input, otherwise it won't be able to find any grains and you will probably see the message "Insufficient valid troughs in the file".
</p>

<p>
GRAINEX extends an area containing grains, the start and end times being set by the user. The grains are found by envelope troughs and zero-crossings.
</p>

<p>
When the above example command line was run with the input file <i>count.wav</i>, when the output sound got to the number 'three', it was repeated several times before continuing on with the rest of the count up to the number ten.  The input sound was 8.066 seconds long, and the output was 18.866 seconds long, i.e., considerably more than the 2.5 seconds specified.
</p>

<p>
<a name = "GREXNOTES"><b>NOTE</b></a><br />
It is possible to set <i>trof</i> too low. Being relative to the peak level, if the signal doesn't drop that far in level, you may get the Error Message: "Insufficient grains to proceed" or "INSUFFICIENT PEAKS IN THE FILE AREA SPECIFIED".
 </p>
</blockquote>



<h3>
Musical Applications
</h3>
<blockquote>
<p>
...
</p>
</blockquote>

<p>
End of GRAINEX EXTEND<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="GREV">GRAIN GREV &#150; Find and manipulate 'grains', 
using envelope troughs and zero-crossings
</h2>

<h3>
Usage
</h3>
<b>grain grev 1</b> <i>infile outfile wsiz trof gpcnt</i><br />
<b>grain grev 2</b> <i>infile outfile wsiz trof gpcnt repets</i><br />
<b>grain grev 3-4</b> <i>infile outfile wsiz trof gpcnt keep outof</i><br />
<b>grain grev 5</b> <i>infile outfile wsiz trof gpcnt tstretch</i><br />
<b>grain grev 6</b> <i>infile out_timesfile wsiz trof gpcnt</i><br />
<b>grain grev 7</b> <i>infile outfile in_timesfile wsiz trof gpcnt</i>

<p>
Example command line:
<blockquote>
<code><b>grain grev 2 infile outfile 10 0.5 4 3</b></code>
</blockquote>
</p>


<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; REVERSE &#150; the grain-units isolated are played in 
reverse order<br />
<b>2</b>&nbsp; REPEAT &#150; <i>gpcnt</i>-sized units are repeated<br />
<b>3</b>&nbsp; DELETE &#150; remove the specified number of units<br />
<b>4</b>&nbsp; OMIT &#150; replace specified number of units with silence<br />
<b>5</b>&nbsp; TIMESTRETCH &#150; the time expansion is happening in the troughs:  
the grains of sound are not themselves stretched<br />
<b>6</b>&nbsp; GET &#150; writes grain time-positions to a textfile<br />
<b>7</b>&nbsp; PUT &#150; places grains in time according to textfile
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile in which to count the grains<br />
<i>outfile</i> &#150; output soundfile produced by the program<br />
<i>out_timesfile</i> &#150; textfile produced by the program, containing 
times of grain positions<br />
<i>in_timesfile</i> &#150; textfile containg times at which the program 
is to place grains<br />
<i>wsiz</i> &#150; windowsize in milliseconds, determining the size of the 
grains to find<br />
<i>trof</i> &#150; the acceptable trough height, relative to adjacent 
peaks.  Range: greater than 0 to less than 1 (&gt; 0 Range &lt; 1)<br />
<i>gpcnt</i> &#150; ('groupcount') the number of grains to treat as a 
unit in the operations<br />
<i>repets</i> &#150; the number of repetitions of each unit<br />
<i>keep</i> &#150; <i>outof</i> &#150; the number of units to keep, 
e.g., 3 out of 5<br />
<i>tstretch</i> &#150; the amount to timestretch the output (grains NOT 
stretched)  Range: 0.01 to 100)
	<blockquote>
	<i>gpcnt</i>, <i>repets</i>, <i>keep</i> and <i>tstretch</i> can 
	vary over time.
	</blockquote>
</blockquote>

<h3>
Understanding the GRAIN GREV Process
</h3>

<blockquote>
<p>
This program was written to assist in separating the large-scale 'grains' 
in a stream of sound, e.g. the syllables of speech.  It can be a useful 
alternative to <a href="cgroedit.htm#SYLLABLES">SFEDIT SYLLABLES</a>, which 
is for the precise manual editing of syllabic units.
</p>

<p>
The other 'grain' programs rely on a gate which searches for moments when 
the input sound falls below a certain level, and then splices the sound at 
those points.  This works fine when the sound grains are fairly consistent 
(e.g. a sequence of pizzicato sounds).  
</p>

<p>
However, the syllables of speech are usually quite different from one 
another. So the gating procedure finds some good places to cut, and 
misses others. The 'grev' process does not depend on setting a gate level. 
It simply looks for troughs (low points) in the envelope (at a suitable 
timescale), then within those troughs, searches for a zero-crossing at the 
lowest point of the signal in the trough.
</p>

<p>
Once it finds these it can separate the grains with zero-length splices.
The key thing is to set the envelope window about three times smaller than 
the features (e.g. syllables) you want to tease out.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
Designed for spoken words, this program enables you to play with 
syllabic units with remarkable efficiency.  Although similar to 
others in the GRAIN set, it gives direct control over the syllabic 
content of speech.
</p>

<p>
Mode <b>2</b> reveals how this program works.  The example command 
line given above has these parameters: <i>wsiz</i> = 10 ms, 
<i>trof</i> = 0.5 (half-way can be a useful place to start with a 
parameter), <i>gpcnt</i> = 4 (four grains to a group), and 
<i>repets</i> = 3 (repeat the 4-grain-units 3 times).  When run, 
we find that the syllables of the spoken text are, for the most 
part, <b>clearly isolated</b> and repeat 3 times each without 
overlaps.  Thus the program is working effectively with the spaces 
between the syllables.
</p>

<p>
That this is the case is also shown by Mode <b>5</b>.  When run with the 
same parameter values (the last parameter being <i>tstretch</i> instead 
of <i>repets</i>, we find that the syllables do not repeat but are 
more spaced out in time. 
</p>

<p>
Modes <b>3</b> and <b>4</b> operate as expected, deleting grains or 
replacing them with silence.  Mode <b>1</b> plays back the isolated 
grains in reverse order, i.e., you hear syllabic fragments from the 
end of the file first and proceed back to the beginning &#150; but the 
text fragments themselves are 'forward' as normal.  Higher values for 
<i>wsiz</i> and <i>gpcnt</i> result in longer passages of the text 
treated as a unit, while smaller values fragment the text more.  It's 
a very odd effect.
</p>

<p>
Mode <b>6</b> provides a way to write grain-position times (shaped 
by the other parameters) to a file.  This file can then be used as 
input in Mode <b>7</b> with, e.g., another input sound or with 
different values for the other parameters, thus achieving results that 
are partly shaped and partly serendipitous.
</p>

<p>
Altogether, GRAIN GREV is a powerful tool with which to manipulate 
speech material.  On a deeper level, it can be used to musicalise 
speech and make formal connections with other shapes in your composition.
</p>

</blockquote>

<p>
End of GRAIN GREV<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="NEWTEX">NEWTEX &#150; Create a texture of grains made from a source or sounds
</h2>

<h3>
Usage
</h3>
<b>newtex newtex 1</b> <i>insndfile outsndfile transposes dur chans maxrange step spacetype</i> [<b>-s</b><i>splice</i>] [<b>-n</b><i>number</i>] [<b>-x</b>]
<br>&nbsp;&nbsp;EXTRA OPTIONAL FLAGS (if <i>spacetype</i>&gt;0):<br>&nbsp;
 [<b>-r</b><i>rotspeed</i>] [<b>-j</b>] [<b>-e</b><i>from</i> <b>-E</b><i>time</i>] [<b>-c</b><i>to</i> <b>-C</b><i>time</i>]<br />
<br />

<b>newtex newtex 2</b> <i>insndfile1 insndfile2 [insndfile3 ...] outsndfile  dur chans maxrange step spacetype delay</i> [<b>-s</b><i>splice</i>] [<b>-n</b><i>number</i>] [<b>-x</b>] 
<br>&nbsp;&nbsp;EXTRA OPTIONAL FLAGS (if <i>spacetype</i>&gt;0):<br>&nbsp;
[<b>-r</b><i>rotspeed</i>] [<b>-j</b>] [<b>-e</b><i>from</i> <b>-E</b><i>time</i>] [<b>-c</b><i>to</i> <b>-C</b><i>time</i>]<br />
<br />

<b>newtex newtex 3</b> <i>insndfile1 [insndfile2 ...] outsndfile transposes dur chans maxrange step spacetype</i> [<b>-s</b><i>splice</i>] [<b>-n</b><i>number</i>] [<b>-x</b>] 
<br>&nbsp;&nbsp;EXTRA OPTIONAL FLAGS (if <i>spacetype</i>&gt;0):<br>&nbsp;
[<b>-r</b><i>rotspeed</i>] [<b>-j</b>] [<b>-e</b><i>from</i> <b>-E</b><i>time</i>] [<b>-c</b><i>to</i> <b>-C</b><i>time</i>]
<br />


<p>
Example command line to create a combo grain texture :<br>
	<blockquote>
	<b><code>newtex newtex  3  insndfile.wav outsndfile.wav 30  4  3  0.1  0  0  1.5 0.35  -s36 </code></b><br />
i.e.:
<pre>
DUR  CHANS  MAXRANGE  STEP  SPACETYPE  LOC  AMB  GSTEP SPLICE 
30   4      3         0.1   0          0    1.5  0.35    36 
</pre>
This example takes short segments and scatters them randomly across the channels. Splice is quite long to give the segments a softer attack. It works well in stereo too, but 4 or more channels are worth generating to get a variety of segmentations. (The channels can be split, possibly processed and then re-combined or re-mixed in various ways.) 	</blockquote>
</p>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; The transpositions of <i>insndfile</i> are spread over N octaves and spatially, and fade in and out randomly.<br />
<b>2</b>&nbsp; <i>Insndfile</i> is read at its original rate (i.e., no transpositions), spread spatially, and fades in and out randomly.<br />
<b>3</b>&nbsp; <i>Insndfile</i> is read as 'drunken walks', spread spatially, and fades in and out randomly.<br />
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>insndfile(s)</i> &#150; input soundfile or soundfiles, depending on which Mode is used<br />
<i>outsndfile</i> &#150; the output textured soundfile<br />
<i>transposes</i> &#150; textfile containing a list of transposition <b>ratios</b> and relative levels, against time.<br />
  <ul>
  <li>The data is a text file of lines of data.</li>
  <li>Every line must have the same number of entries.</li>
  <li>The first entry on each line is a time.</li>
  <li>Times must start at zero and increase.</li>
  <li><b>All EVEN-numbered entries</b> are transposition levels.</li>
  <li>Transpositions must increase from entry to entry.</li>
  <li><b>All other ODD-numbered entries</b> are transposition <i>levels</i>.</li>
  <li>Levels should have values between <b>-1</b> and <b>1</b>.</li>
  <li>Octave (transposition) values invert the phase of the source.</li>
  </ul>

<i>dur</i> &#150; the duration of the output sound<br />
<i>chans</i> &#150; the number of output channels<br />
<i>maxrange</i> &#150; In <b>Mode 1</b> <i>maxrange</i> is the range in octaves of the transpositions of the input.<br />
&nbsp;&nbsp;&nbsp;&nbsp;In <b>Mode 2</b> <i>maxrange</i> is the number of simultaneous soundings of any source soundfile.<br />
<i>step</i> &#150; the average time between changes to the stream-content of the output.<br /> 
<i>splice</i> &#150; the splice-lengths in milliseconds for component entry and exit<br />
<i>number</i> &#150; the number of components chosen for each event<br />
<i>delay</i> &#150; the time delay between identical components<br />
<i>loc</i> &#150; the <i>locus</i> (time-location) from which to read sound segments.<br>  
&nbsp;&nbsp; <b>NB:</b> It is an important feature that <i>loc</i> is time-varying.<br />
<i>amb</i> &#150; the 'ambitus', i.e., the restricted time-range in milliseconds around the <i>locus</i> where reads can begin.<br>  
&nbsp;&nbsp; <b>NB:</b> It is an important feature that <i>amb</i> is time-varying.<br />
  &nbsp;&nbsp;&nbsp;&nbsp;  &bull;&nbsp;&nbsp;TIP:  Compare <i>locus</i> and <i>ambitus</i> with the parameters of the same name in <a href = "cgroextd.htm#DRUNK"><b>EXTEND DRUNK</b></a>.<br />
<i>gstep</i> &#150; the maximum size of the random steps between one read start and the next read.<br />
<b>-x</b> &#150; 'Xclusive':  change all components, as far as possible, from event to event<br />
<b>-j</b> &#150; 'Jump':  all components are assigned to the same location for any one event, and then it jumps to the next location<br />
<i>spacetype</i> &#150; the type of output spatialisation:<br>
&nbsp;&nbsp;&nbsp;&nbsp; 0   Spatial position set at random.<br>

&nbsp;&nbsp;&nbsp;&nbsp; <b>For 8-channel output only</b> (assumes an 8-speaker 'ring' formation):
  <ol>
  <li>  Positions alternate between Left and Right sides, but are otherwise random.</li>
  <li>  Positions alternate between Front and Back, but are otherwise random.</li>
  <li>  Rotating clockwise or anticlockwise.</li>
  <li>  Random permutations of all 8 channels.</li>
  <li>  As [4] plus all possible pairs of channels.</li>
  <li>  As [4] plus all possible meaningful small and large triangles.</li>
  <li>  As [4] plus square, diamond and all-at-once.</li>
  	In types 4 to 7, all members of the permutation are used before the next permutation starts.
  <li>  Alternate between all-left and all-right.</li>
  <li>  Alternate between all-front and all-back.</li>
  <li>  Alternate between all-square and all-diamond.</li>
  <li>  Rotate triangle formed by loudspeakers 2-apart clockwise.</li>
  <li>  Rotate triangle formed by loudspeakers 3-apart clockwise.</li>
  <li>  Rotate triangle formed by loudspeakers 2-apart anticlockwise.</li>
  <li>  Rotate triangle formed by loudspeakers 3-apart anticlockwise.</li>
  </ol>

<b>EXTRA OPTIONAL FLAGS</b> (only if <i>spacetype</i>&gt;0):<br>
<i>rotspeed</i> &#150; rotation speed for certain spatialisation types<br>
<b>-e</b><i>from</i> <b>-E</b><i>time</i>&#150; 'Emerge':  the sound emerges from channel <i>from</i> over time <i>time</i> at start<br>
<b>-c</b><i>from</i> <b>-C</b><i>time</i>&#150; 'Converge': the sound converges from channel <i>to</i> over time <i>time</i> at end
	<ul>
	<li>Flags with NO parameters must be placed AFTER any flags WITH parameters, on the command line.</li>
	
<li><i>maxrange</i>, <i>step</i>, <i>number</i>, <i>loc</i>, <i>amb</i> and <i>gstep</i>, can vary over time.</li>
	</ul>

</blockquote>

<h3>
Understanding the NEWTEX Process
</h3>

<blockquote>
NEWTEX is a powerhouse of a program that combines aspects of <a href = "cgromody.htm#BRASSAGE">MODIFY BRASSAGE</a>, <a href = "cextend.htm#DRUNK">EXTEND DRUNK</a> and <a href = "cgrotext.htm"TEXTURE>TEXTURE</a>.  It generates a (time-varying) texture from segments cut from a source sound or sounds. 
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
...
</blockquote>

<p>
End of NEWTEX NEWTEX<br />
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index<br />
</p>

<hr> <!-- ************************************************************* -->

<h2 id="NOISE_EXTEND">GRAIN NOISE_EXTEND &#150; Find and timestretch 
noise component in a sound
</h2>

<h3>
Usage
</h3>
<b>grain noise_extend</b> <i>infile outfile duration minfrq 
mindur maxdur</i> [<b>-x</b>]<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile in which to count the grains<br />
<i>outfile</i> &#150; output soundfile produced by the program<br />
<i>duration</i> &#150; duration of the noise part of the output soundfile<br />
<i>minfrq</i> &#150; the lowest 'frequency' in Hz acceptable as noise.  
Range:  1000 to 22050Hz.  (Try 6000Hz)<br />
<i>mindur</i> &#150; the minimum duration of signal in milliseconds 
acceptable as noise source.  Range:  0 to 50 milliseconds<br />
<i>maxdur</i> &#150; the maximum duration of signal in seconds acceptable 
as noise source.  Range:  0.0 to length of input soundfile (in seconds)<br />
<b>-x</b> &#150; keep only the extended noise.  The Default is to keep 
the rest of the input source sound as well.
</blockquote>

<h3>
Understanding the GRAIN NOISE_EXTEND Process
</h3>

<blockquote>
<p>
This process is complementary to <a href="#R_EXTEND"><b>GRAIN R_EXTEND</b></a>. It 
searches for sybillants in speech (or noise materials in any input sound) 
then allows them (and only them) to be sustained.
</p>

<p>
Note that different types of values are involved with the <i>mindur</i> 
and <i>maxdur</i> parameters.  The minimum duration is given in milliseconds, 
but the maximum duration, because you're thinking in terms of the length of 
the soundfile, is given in seconds.
</p>

<p>
The <b>-x</b> option enables you to save only the extended noise component, 
discarding the rest of the file.  When <b>-x</b> is not invoked, you hear 
the whole soundfile (up to the <i>maxdur</i> you specified) with that 
first (extended) noise component in its original position in the soundfile.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This program acually looks for and extends (only) the first noise 
component that it finds at the given parameter specifications.
</p>

<p>
The extended noise component, especially if saved on its own via the 
<b>-x</b> option, can be a useful bit of source material for other 
sound transformations.
</p>
</blockquote>

<p>
End of GRAIN NOISE_EXTEND<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="OMIT">GRAIN OMIT &#150; Omit a proportion of grains in a
grainy sound
</h2>

<h3>
Usage
</h3>
<b>grain omit</b> <i>infile outfile keep out-of</i> [<b>-b</b><i>len</i>]
[<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>] [<b>-t</b><i>winsize</i>] 
[<b>-x</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<i>keep</i> &#150; number of grains to keep from each set of
<i>out-of</i> grains
	<blockquote>
	<i>keep</i> may vary over time, but must not exceed
	<i>out-of</i>
	</blockquote>
<i>out-of</i> &#150; <i>keep</i> grains retained from start of
each set of <i>out-of</i> grains<br>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN OMIT Process
</h3>

<blockquote>
<p>
The key here is the <i>out-of</i> parameter.  This defines the size of
the group which serves as the unit of operations:  out of every unit,
<i>keep</i> grains are retained.  Thus, if 5 out of 10 are retained,
50&#37; of the file is omitted, if 7 out of 10 are retained, 3 out of
the 10 are omitted (30&#37;go), if 4 out of 10 are retained, 6 out of the
10 are omitted (60&#37; go).
</p>

<p>
What is significant about the <i>out-of</i> parameter is that its size
affects the result,  Thus, a large value for <i>out-of</i> with a smaller
value for <i>keep</i> , e.g., 20 and 10, will break up the file much
more than it would if <i>out-of</i> were smaller:  e.g., 4 and 2 &#150;
even though the proportion of omitted material is the same (50%).  This
is because larger continuous chunks of the source (10 grains rather than
2 grains) are lost in the former case.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
GRAIN OMIT provides a useful way to contract sound material 
without altering the sonic substance (i.e. the grains are 
not themselves, time-contracted).
</p>
</blockquote>

<p>
End of GRAIN OMIT<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="REMOTIF">GRAIN REMOTIF &#150; Change pitch and rhythm of
grains in a grainy sound
</h2>

<h3>
Usage
</h3>
<b>grain remotif mode</b> <i>infile outfile transpmultfile</i>
[<b>-b</b><i>len</i>] [<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]
<br>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Transform each grain in turn, without repeating any
grains: on reaching the end of the <i>transpmultfile</i> data,
cycle back to its start.<br>
<b>2</b>&nbsp; Transform grain in each specified way before
proceeding to the next grain.
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<i>transpmultfile</i> &#150; is a file containing <i>transposition
time</i> multiplier pairs.
	<ul>
	<li>transpositions are given as positive or negative
	    semitone shifts.</li>
	<li>the maximum transposition is 4 octaves up or down</li>
	<li>time multipliers change the duration between one
	    grain onset and the next grain onset.</li>
	<li>the maximum value for a multiplier is 1000</li>
	<li>the minimum value for a multiplier is 0.001000</li>
	<li>If any inter-grain time is reduced the minimum time
	    allowed for a grain (0.032 sec), it will be reset to
	    this minimum grain time.</li>
	</ul>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN REMOTIF Process
</h3>

<blockquote>
<p>
Implementing this process is really very easy.  The <i>transpmultfile</i>
does not have to match the number of grains in the <i>infile</i>.  You
just need to design the pitch and time shapes into which you want the
grains to flow.  The pitch transpositions are placed in the left column
as positive or negative semitones, and the time-multipliers are placed
in the right column, &gt; 1 to make the gap longer, &lt; 1 to make it
shorter.
</p>

<p>
Here is an example <i>transpmultfile</i> that rises, drops down 
below the original pitch level, and then rises back to the starting 
point, with the grains getting shorter and then longer again.
<pre>
<font color="#FF0000">
[transposition timing]
 (semitones)   (multiplier)</font>
0              1.0
1              0.9
2              0.8
3              0.7
2              0.6
1              0.5
0              0.4
-1             0.5
-2             0.6
-3             0.7
-2             0.8
-1             0.9
0              1.0
</pre>
</p>

<p>
The difference between the modes is dramatic.
	<ul>
	<li>In Mode <b>1</b> a single line of the <i>transpmultfile</i> 
	is applied to a single grain, the next line to the next grain etc., 
	cycling around the textfile until reaching the last grain of 
	<i>infile</i>.  Any difference in duration between <i>infile</i> 
	and <i>outfile</i> is due to the timing difference between the 
	grains.  You can make the shape occur once by having as many 
	lines in the textfile as there are grains in the 
	<i>infile</i>.</li><br />
	<br />
	<li>
	In Mode <b>2</b> ALL of the lines of the <i>transpmultfile</i> 
	are applied to each grain in turn.  Thus every grain repeats for 
	as many times as there are lines in the textfile, and one hears 
	the whole shape defined in the textfile repeated as many times 
	as there are grains in the <i>infile</i>.  This makes the 
	<i>outfile</i> much longer than the <i>infile</i>.</li>
	</ul>
</p>

<p>
Be careful with Mode <b>2</b>, because an over-long textfile will 
create a very long <i>outfile</i> (and be very repetitive).
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
GRAIN REMOTIF can be used to apply a gross shape to the grains of the 
<i>infile</i>, with controlled accelerandi or other timing changes.  
This shape can occur once, cycle around the textfile with one line per 
grain (Mode <b>1</b>), or the shape can occur once per grain: &nbsp;each 
grain repeats with transposition and timing differences as many times 
as there are lines in the textfile (Mode <b>2</b>).
</p>
</blockquote>

<p>
End of GRAIN REMOTIF<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top 
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a> 
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="REORDER">GRAIN REORDER &#150; Reorder grains in a grainy
sound
</h2>

<h3>
Usage
</h3>
<b>grain reorder</b> <i>infile outfile code</i> [<b>-b</b><i>len</i>]
[<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>] [<b>-t</b><i>winsize</i>] 
[<b>-x</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<i>code</i> &#150; a string such as <b>adb:c</b> indicating
how grains are to be reordered.
	<blockquote>
	The example means use grains 1 (<b>a</b>), 4 (<b>d</b>)
	and 2 (<b>b</b>) in sequence, then <br>&nbsp;&nbsp;&nbsp;begin
	this grain-jumping pattern again, <br>&nbsp;&nbsp;&nbsp;&nbsp;
	<b>but start at</b> grain 3 (<b>c</b>).
	</blockquote>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN REORDER Process
</h3>

<blockquote>
<p>
This is so much fun.  Comparable with <a href="cdistort.htm#SHUFFLE"><b>DISTORT SHUFFLE</b></a>, GRAIN REORDER
provides another way for controlled fragmentation.  The illustration
<i>code</i> used in the Usage causes a fair amount of fragmentation.
But a <i>code</i> such as <b>abcdefg:b</b> steps through 7 grains
in their normal sequence, then goes back to the 2<sup>nd</sup> grain
and proceeds to the 8<sup>th</sup> etc., moving gradually through
the whole <i>infile</i> in this way.  The <i>code</i> <b>gfedcba:b</b>
does the same thing, but places the grains in reverse order.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
So you can see that you can play with the shaping possibilities to
your heart's content, possibly making subtle correlations between
the shapes made by the grains and patterns made elsewhere in the music.
</p>
</blockquote>

<p>
End of GRAIN REORDER<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="REPITCH">GRAIN REPITCH &#150; Repitch grains in a grainy
sound
</h2>

<h3>
Usage
</h3>
<b>grain repitch mode</b> <i>infile outfile transpfile</i>
[<b>-b</b><i>len</i>] [<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]
<br>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Repitch each grain in turn, without repeating any
grains;  on reaching the end of the transposition list, cycle
back to its start.<br>
<b>2</b>&nbsp; Play grain at each transposed pitch, before
proceeding to the next grain.
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<i>transpfile</i> &#150; a file listing transpositions given
as positive or negative semitone shifts.  The maximum transposition
is 4 octaves up or down.<br>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN REPITCH Process
</h3>

<blockquote>
<p>
This function is like GRAIN REMOTIF but only deals with transposition
of the grains.  Again, the transpositions are handled in terms of
positive or negative numbers of semitones, so it is very simple to
create the required <i>transpfile</i>.  The transposition <b>pattern 
&#47; contour</b> in the <i>transpfile</i> is transferred to the grains, 
such as narrow and wavy, or wide and jagged.  This pattern can also  
serve as an important gestural or formal unifier in the composition.
</p>

<p>
The textfile can be written on a single line, with the values separated
by spaces.  Newlines are ignored.  For example:
<pre>
0 1 2 3 2 1 0 -1 -2 -3 -2 -1 0
</pre>
</p>

<p>
There may be some slight change in duration, proceeding from the
source to the <i>outfile</i>, due to the effect of transposition
on the final grain.  Otherwise the grain onset timings should
remain exactly as in the source sound.
</p>

<p>
The role of the two Modes is the same as in GRAIN REMOTIF, either taking
each grain in turn, or applying all the transpositions in the textfile
to each grain, repeating each grain as many times as there are
transpositions. 
</p>

<p>
Be careful with Mode <b>2</b>, because an overly long textfile will
create a very long <i>outfile</i> (and be very repetitive).  However, 
the pattern is very clear, and a part of it may be especially interesting 
and able to be CUT and used elsewhere.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
An ideal tool for creating staccato pitch figurations with clear 
contour shapes or even gestural potential.
</p>
</blockquote>

<p>
End of GRAIN REPITCH<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="REPOSITION">GRAIN REPOSITION &#150; Reposition grain onsets
in a grainy sound
</h2>

<h3>
Usage
</h3>
<b>grain reposition</b> <i>infile outfile timefile offset</i>
[<b>-b</b><i>len</i>] [<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input grainy soundfile<br />
<i>outfile</i> &#150; output soundfile with grain timing 
re-patterned<br />
<i>timefile</i> &#150; must contain a list of grain-onset times
in seconds.  If any inter-grain time is reduced the minimum time
allowed for a grain (0.032 sec), it will be reset to this
minimum grain time.<br>
<i>offset</i> &#150; add this value in seconds to <b>all</b>
grain timings &#150; in effect, begin to apply the <i>timefile</i> 
pattern at this point in the <i>infile</i>.<br />
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN REPOSITION Process
</h3>

<blockquote>
<p>
This process re-times the start-times of the grains in the 
soundfile according to the pattern of times specified in 
<i>timefile</i>.  The gaps between grain onsets can become 
larger or smaller in the <i>timefile</i>, but all onset 
times must increase &#150; otherwise you would be trying 
to go backwards:  e.g., 2.3 2.5 is OK, but 2.3 1.8 is not.

<p>
The <i>offset</i> parameter determines when after the start 
of the soundfile the <i>timefile</i> pattern is applied.  
If, for example, the <i>offset</i> is 2 (sec.) and there 
are grains before the 2 second point, you will hear these 
sound as normal, and then you will hear grains after the 
2 second point patterned by the <i>timefile</i>
</p>

<p>
It is useful to run <a href="cgrogrns.htm#FIND">GRAIN FIND</a> 
first, because it finds any grains in the soundfile and writes 
their start-times to a textfile.  You can then edit this 
textfile to create a <i>timefile</i> with your own timing pattern.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
GRAIN REPOSITION enables you to impose a rhythmic structure on 
the grains in a soundfile.  Considerably more subtle effects 
are also possible.  Trevor (Wishart) writes that it "provides 
a way to create a correlation between the fine attack structure 
and some other musical events.  For example, the repositioning 
data can be taken from another grainy sound (using GRAIN FIND) or 
any other timing data, allowing the fine attack structure of a 
grainy sound to be synchronised or coordinated with another sound 
or sound sequence."
</p>

<p>
Here's a simple procedure:<br />
	<ul>
	<li>A <i>timefile</i> for the grains in a soundfile is quickly
	made with GRAIN FIND.</li>
	<li>Then GRAIN REPOSITION is run twice, e.g., with an
	<i>offset</i> of 0.25 the first time, and 0.33 the second time.</li>
	<li>The two files can be mixed with <a href="cgromixr.htm#MERGE">
	<b>SUBMIX MERGE</b></a> and
	<li>You can then audition the result, hearing the double
	occurrence of the grains.</li>
	</ul>
</p>
</blockquote>

<p>
End of GRAIN REPOSITION<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="RERHYTHM">GRAIN RERHYTHM &#150; Change rhythm of grains in
a grainy sound
</h2>

<h3>
Usage
</h3>
<b>grain rerhythm mode</b> <i>infile outfile multfile</i>
[<b>-b</b><i>len</i>] [<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]
<br>

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Lengthen or shorten each grain in turn, without
repeating any grains;  on reaching the end of the
time-multipliers list, cycle back to its start.<br>
<b>2</b>&nbsp; Play grain at each specified retiming, before
proceeding to the next grain.
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<i>multfile</i> &#150; a file of listing duration-multipliers
to change the duration between one grain onset and the next
grain onset.
	<ul>
	<li>the maximum value for a multiplier is 1000</li>
	<li>the minimum value for a multiplier is 0.001000</li>
	<li>If any inter-grain time is reduced the minimum time
	    allowed for a grain (0.032 sec), it will be reset to
	    this minimum grain time.</li>
	</ul>
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN RERHYTHM Process
</h3>

<blockquote>
<p>
GRAIN RERHYTHM works in the same way as REMOTIF AND REPITCH, except
applied to the timing of the grains only.  Thus they retain their
original pitch but begin at different times, according to the data in
<i>multfile</i>.  It may be that the grain lengths appear to change,
because they begin to overlap one another:  i.e., the distance between
grain onsets changes, but the lengths of the grains are not meant to
change.
</p>


<p>
The two Modes also work in the same way, either applying the data in
the textfile to the grains sequentially, or repeating grains, applying
all the data in the textfile to each grain in turn.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
As pitch is not altered, the sense of movement is more directly
perceived.  The flow of the grains can be made to flex in supple or
in strongly contrasting ways.  
</p>

<p>
If there is a stuttering or rapidfire quality, it  may be caused by  
the process not adequately separating the grains.  If a group of grains 
are not seen as separate, they will behave as a single grain.  It is 
essential with grain processes to ensure that all the grains are clearly 
separated (i.e., set the appropriate gate level).  In some cases it will 
not be possible to get a totally satisfactory result (everything
depends on the nature of the source).  A little cosmetic editing may 
be required.
</p>
</blockquote>


<p>
Also see <a href="#TIMEWARP"><b>GRAIN TIMEWARP</b></a>.
</p>

<p>
End of GRAIN RERHYTHM<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="REVERSE">GRAIN REVERSE &#150; Reverse order of grains in
a grainy sound without reversing the grains themselves
</h2>

<h3>
Usage
</h3>
<b>grain reverse</b> <i>infile outfile</i>
[<b>-b</b><i>len</i>] [<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<b>-b</b><i>len</i> &#150; maximum time between grains  
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN REVERSE Process
</h3>

<blockquote>
<p>
Unlike MODIFY RADICAL Mode <b>1</b> (which plays the source sound
<b>itself</b> backwards, and thus can radically modify it), this
process plays each original grain in the normal way (not reversed
in time), but <b>reversed in order</b>.  This is much like the idea
of retrograding a melodic motif in traditional music (where the
sounds themselves are not reversed).
</p>

<p>
The original source is thus always clearly recognisable in the
output sound.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
The forwards orientation of each grain means that the attack transient
of the grains is retained.  Even through the grains are generally very
TW: Even though (Rather than 'even through')
short, it is a tribute to the acuteness of our hearing that their
forwards orientation makes such a difference in the recognisability of
the original.  GRAIN REVERSE, therefore, provides a wonderfully subtle
variant of the original.
</p>
</blockquote>

<p>
End of GRAIN REVERSE<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="R_EXTEND">GRAIN R_EXTEND &#150; 'Time-stretch' natural sounds 
like the rolled 'rrr' in speech
</h2>

<h3>
Usage
</h3>
<b>grain r_extend 1</b> <i>infile outfile stt end ts pr rep get 
asc psc</i> [<b>-x</b>]<br />
<b>grain r_extend 2-3</b> <i>infile outfile gate usz ts pr rep get 
asc psc skp at T by</i> [<b>-s</b>] [<b>-e</b>]<br />

<h3>
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Mark where the iterative part of the sound is located.<br />
<b>2-3</b>&nbsp; The program attempts to find the iterative part, using 
envelope tracing.
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile containing iterative material<br />
<i>outfile</i> &#150; output soundfile with the iterations extended<br />
<i>stt</i> &#150; (Mode <b>1</b>) - time of start of iterated material 
within source soundfile<br />
<i>end</i> &#150; (Mode <b>1</b>) - time of end of iterated material 
within source soundfile<br />
<i>gate</i> &#150; (Mode <b>2</b>) - minimum level in source soundfile 
for envelope tracing to kick in.  (Range: 0 to 1)<br />
<i>usz</i> &#150; (Mode <b>2</b>) - size of unit searched for, in 
milliseconds (15 for rolled 'rr')<br />
<i>ts</i> &#150; ('time-stretch') - multiplier that specifies how much 
to time-stretch the marked (or found) material<br />
<i>pr</i> &#150; guesstimate of the pitch-range of the iteration in 
the source, in octaves, or parts of octaves (try <i>pr</i> = 1).  This 
is the pitch range of the (low-frequency) iteration, NOT the resonant 
frequency.  E.g., for a rolled 'rrr', the frequency of the 'rrr' itself 
(even if unvoiced), and NOT the pitch of any sung note (if 'rrr' is 
voiced).  (Range: 0 to 4)<br />
<i>rep</i> &#150; ('repeats') - the iterated material is extended by 
reusing individual segments in a randomised pattern.  In this pattern, 
segment A may occur next to an identical copy of segment A, or not 
&#150; see more detailed explanation below.  (Range: 1 to 32767).  
Recommendation:  try <i>rep</i> = 1 or <i>rep</i> = 2.<br />
<i>get</i> &#150; guesstimate of the number of iterations you expect
to find (in the segment you've selected in the source &#150; listen 
to the source).  This helps to improve the accuracy of the search 
for iterated segment boundaries.  In Mode <b>2</b>, this is the 
<b>minimum</b> number of repeats you expect to find.<br />
<i>asc</i> &#150; random amplitude variation of the output segments.  
The value for <i>asc</i> multiplies the original segment amplitude 
by a random value in the range 1 to 1-<i>asc</i>.  (Range of 
<i>asc</i>: 0 to 1)<br />
<i>psc</i> &#150; random pitch variation of the output segments.  
The value for <i>psc</i> transposes the pitch by a random value 
in the range <b>-</b><i>psc</i> to <b>+</b><i>psc</i> semitones.  
(Range of <i>psc</i>: 0 to 24)<br />
<i>skp</i> &#150; the number of found (iterative) units to skip 
before processing<br />
<i>at T</i> &#150; iterative ritard, after <i>at</i> seconds to 
event-separation <i>T</i><br />
<i>by</i> &#150; ritard end point reached after a further <i>by</i> 
seconds;  <b><i>by</i> = 0 gives no ritard</b><br />
[<b>-x</b>] &#150; (Mode <b>1</b>) - keep rrr-extension only<br />
[<b>-s</b>] &#150; (Mode <b>2</b>) - keep sound <i>before</i> the 
extended material<br />
[<b>-e</b>] &#150; (Mode <b>2</b>) - keep sound <i>after</i> the 
extended material <br />
</blockquote>

<h3>
Understanding the GRAIN R_EXTEND Process
</h3>

<blockquote>
<p>
The key here is to listen to the source sound to ascertain where iterative 
material starts and ends.  'Iterative material' means a rapid pulsation as 
in a vocal rolled 'r', vocal grit generally, rattling train windows, etc. 
GRAIN R_EXTEND enables you to prolong this material, with subtle variants 
in order to make the flow supple.
</p>

<p>
Notice that <b><i>rep</i></b> introduces a varying degree of randomised 
order in the repetitions of the grain units, the randomisation increasing 
with higher values.  <i>Rep</i> has to do with how the grain sequence is 
generated by controlling how many identical grains can be adjacent.
	<ul>
	<li><b>Case 1:</b>
	   <ol>
	   <li>If you have 4 grains <code>1, 2, 3, 4</code>, these are 
	   played back in a random order, e.g., <code>3 - 1 - 4 - 
	   2</code>.</li><br />
	   
	   <li>Then another random order of the 4 is generated, e.g., 
	   <code> 2 - 4 - 3 - 1</code>, etc., until the (time-stretched) 
	   output duration is filled up.</li><br />
	   
	   <li><div align="left">When such permutations are put together, you might get a 
	   repetition of an element at the boundary between them, such as, 
	   using the two sequences above: <code>3 - 1 - 4 - 2 - 2 - 4 - 3 
	   - 1</code>.</li><br />
	   
	   <li>If in this case <i>rep</i> were to be set to 1, this 
	   sequence would not be permitted, i.e., the second adjacent '2' 
	   would be discarded.</li><br />
	   
	   <li><b>Thus <i>rep</i> determines how many such repetitions you 
	   allow.</b></li><br />
	   
	   </ol>
	</li>
	<li><b>Case 2:</b>
		<ol>
		<li>If you set <i>rep</i> to 2, instead of permutating 
		<code>1, 2, 3, 4</code>, we permutate <code>1, 1, 2, 2, 
		3, 3, 4, 4</code>, which generates a sequence in which 
		<b>any</b> element <b>might</b> repeat:  e.g., 
		<code>4 - 1 - 4 - 3 - 3 - 1 - 2 - 2</code> in which the 
		2 and the 3 are repeated.</li><br />
		
		<li>However, you could still get a second permutation 
		such as <code>2 - 1 - 3 - 4 - 3 - 1 - 4 - 2</code>, 
		which, when juxtaposed with the first permutation, 
		would place 3 2's adjacent to each other: 
		<code>4 - 1 - 4 - 3 - 3 - 1 - 2 - 2 - 2 - 1 - 3 - 4 - 
		3 - 1 - 4 - 2</code>.</li><br />
		
		<li>This would not be permitted if <i>rep</i> = 2, and 
		the 3<sup><small>rd</small></sup> 2 would be discarded.  
		You can see therefore, how <i>rep</i> is functioning.</li><br />
		
		<li><b>Thus <i>rep</i> is a function of the maximum internal 
		'loopiness' of the random sequence.</b></li>
		</ol>
	</li>
	</ul>
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
GRAIN R_EXTEND provides some middle ground between larger-scale segmentation
techniques and smaller-scale granulation techniques.  You can also focus on
a particular part of a sound and prolong it with variants without having
to cut and resplice the material.
</p>
</blockquote>

<p>
End of GRAIN R_EXTEND<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="TIMEWARP">GRAIN TIMEWARP &#150; Stretch (or shrink) the
duration of a grainy sound without stretching the grains themselves
</h2>

<h3>
Usage
</h3>
<b>grain timewarp</b> <i>infile outfile timestretch_ratio</i>
[<b>-b</b><i>len</i>] [<b>-l</b><i>gate</i>] [<b>-h</b><i>minhole</i>]
[<b>-t</b><i>winsize</i>] [<b>-x</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input soundfile to process<br />
<i>outfile</i> &#150; output soundfile<br />
<i>timestretch_ratio</i> &#150; the degree of stretching or
shrinking of the intergrain time
	<ul>
	<li><i>timestretch_ratio</i> may vary over time, using
	a data file containing <i>time timestretch_ratio</i>
	value pairs</li>

	<li>this ratio is a floating point multipler</li>
	<li>a value of 2 doubles the intergrain time</li>
	<li>a value of 0.5 halves the intergrain time</li>
	<li>the maximum value for a multiplier is 1000</li>
	<li>the minimum value for a multiplier is 0.001000</li>
	<li>If any intergrain time is reduced the minimum time
	    allowed for a grain (0.032 sec), it will be reset to
	    this minimum grain time.</li>
	</ul>
<b>-b</b><i>len</i> &#150; maximum time between grains 
(Range: 1 to duration of <i>infile</i>)<br />
<b>-l</b><i>gate</i> &#150; required signal level for grain to be
seen (Range: 0 to 1; the Default is 0.3)
	<blockquote>
	<i>gate</i> may vary over time.
	</blockquote>
<b>-h</b><i>minhole</i> &#150; minimum duration of holes between
grains (Minimum allowed value is 0.032 &#150; the Default)<br>
<b>-t</b><i>winsize</i> &#150; gate level tracks the signal
level, as found with a window size of <i>winsize</i> milliseconds
(Range: 0.0 to duration of <i>infile</i>)
	<blockquote>
	0.0 turns off tracking
	</blockquote>
<b>-x</b> &#150; ignore the last grain in the source<br>
</blockquote>

<h3>
Understanding the GRAIN TIMEWARP Process
</h3>

<blockquote>
<p>
Using a numerical value for <i>timestretch_ratio</i> applies a constant
multiplier to all the intergrain times.  Thus the grains come constantly
faster or slower, depending on the multiplier.
</p>

<p>
In the process the onset times of the grains are timewarped, <b>but
not the grains themselves</b>.  This is akin, for example, to playing
the same melody faster on the same instrument.  It therefore differs
from other timewarping processes, which also warp the internal
architecture of the sounds themselves.
</p>

<p>
Use of a breakpoint file adds considerable flexibility to the process
because the function will interpolate gradual changes between different
ratios at different times.  For example, moving from a multiplier of
1.0 to 2.0 over the time of the <i>infile</i> will produce a gradually
decelerando, or from 1.0 to 0.5, a gradual accelerando.  Similarly,
speeds can be stepped by applying different ratios at marginally
different times (it isn't logical to apply two different ratios at
precisely the same time).
</p>

<p>
As an example of stepped changes, the following breakpoint file doubles
the gap time for the first half of a 1.8 second <i>infile</i>, halves
the (original) gap time for 0.6 seconds, returning to the longer gaps
for the last part of the sound.  Between these times, the timing of the
grains remains constant.
<pre>
<font color="#FF0000">[time timestretch_ratio]</font>
0.0   2.0
0.9   2.0
1.01  0.5
1.60  0.5
1.61  2.0
</pre>
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This is an important tool for creating all kinds of rhythmic patterns.
</p>
</blockquote>

<p>
End of GRAIN TIMEWARP<br>
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a>
to Main Index for the CDP System.<br>
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index
</p>

<hr><!-- ********************************************************** -->

<h2 id="WRAPPAGE">WRAPPAGE &#150; Granular reconstitution of one or more soundfiles over multi-channel space
</h2>

<h3>
Usage
</h3>
<b>wrappage</b> <i>infile</i> [<i>infile2 ...</i>] <i>outfile centre outchans 
spread depth<br />
velocity hvelocity  density hdensity grainsize hgrainsize  
pitchshift hpitchshift amp hamp  bsplice hbsplice  esplice hesplice<br />
range jitter outlength</i><br />
[<b>-b</b><i>mult</i>] [<b>-e</b>] [<b>-o</b>]
<br />

<p>
Example command line to create multi-channel brassage:<br>
	<blockquote>
	<b><code>wrappage wrappage horn omahum seven hosmc 4.5 8 4 5 etc.</code></b>
	</blockquote>
</p>


<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input mono soundfile<br />
<i>infile2 ... </i> &#150; optional second and subsequent input 
soundfiles<br />
<i>outfile</i> &#150; output multi-channel soundfile &#150; 2 or more (filename 
must not end with a '1')<br />
<i>centre</i> &#150; central position of the output sound field image in 
the <i>outfile</i> (Range 0 to <i>outchans</i>).  Values &lt; 1 for 
<i>centre</i> are positions between the last channel and the first channel.  
<i>Centre</i> can be a numeric constant, or a breakpoint text file of 
<i>time centre direction</i> triples.  <i>Direction</i> has two 
settings:  <b>1</b> = clockwise, and <b>-1</b> = anticlockwise;  this 
is the direction of movement of <i>centre</i> from its previous 
position to its next position.<br />
<i>outchans</i> &#150; the number of channels in the output 
soundfile.<br />
<i>spread</i> &#150; the width (from far Left to far Right) of 
spatialisation around <i>centre</i>.<br />
<i>depth</i> &#150; the number of channels with sound, behind the 
leading edges of <i>spread</i>.  The <i>depth</i> parameter is not 
allowed to be larger than 2 * <i>spread</i>.  If it is, the program 
automatically truncates it to the maximum allowed value.<br />
<br />
<i>velocity</i> &#150; the speed of advance within the <i>infile(s)</i>, 
relative to outfile.  This value must be &gt;= 0.
	<blockquote>
	This is the inverse of a <i>timestretch</i> (i.e., 1&#47;n: higher
	values make the output shorter, lower values &#150; less than 1
	&#150; make it longer).  This permits an infinite timestretch.
	</blockquote>
<i>density</i> &#150; grain overlap.  Values &gt; 0 and  &lt; 1 leave intergrain 
silence.  Extremely small values don't perform 
predictably.<br />
<i>grainsize</i> &#150; grainsize in milliseconds (must be &gt; 2 * 
splicelen). (Default 50)<br />
<i>pitchshift</i> &#150; pitchshift in + or - (fractions of) 
semitones.<br />
<i>amp</i> &#150; gain on grains (Range 0 to 1) (Default 1.0).  Use 
if amplitude variation is required (over a range &amp;&#47;or in 
time).<br />
<i>bsplice</i> &#150; grain-startsplice length,in milliseconds 
(Default 5)<br />
<i>esplice</i> &#150; grain-endsplice length,in milliseconds 
(Default 5)<br />
<br />
<i>range</i> &#150; the length of time in milliseconds before 'now' 
in the <i>infile</i> in which the search for the next grain will 
take place (Default 0: stay at 'now')<br />
<i>jitter</i> &#150; randomisation of grain position (Range 0-1) 
(Default 0.5)<br />
<i>outlength</i> &#150;  maximum <i>outfile</i> duration in seconds 
(if end of data is not reached).  Set to zero (Default) to ignore.  
<b>NB:</b> if <i>velocity</i> at any point is 0, a value for 
<i>outlength</i> <b>must</b> be given.<br />
	<ul>
	<li><i>hvelocity, hdensity, grainsize, hpitchshift, hamp, hbplsice, 
	hesplice</i> &#150; allow a range of values to be specified for 
	any of the cooresponding parameters above.  For example, with 
	both <i>pitchshift</i> and <i>hpitchshift</i> set, a <b>random 
	value</b> for <i>pitchshift</i> is chosen somewhere between these 
	lower and upper limits.</li>

	<li><b>NB</b> <i>pitchshift</i> and <i>hpitchshift</i> can both 
	vary through time, i.e., use a breakpoint text file containing 
	<i>time pitchshift</i> value pairs.  The same is true of the 
	other low-high parameter pairs.</li>

	<li>All parameters except <i>outlength</i> and <i>outchan</i> can 
	vary through time.</li>
	</ul>
EXTRA OPTIONAL FLAGS:<br />
<b>-b</b><i>mult</i> &#150; enlarges the output buffers <i>mult</i> 
times.  This is to accommodate long silences which may appear in 
the output.<br />
<b>-e</b> &#150; use exponential splices (Default: linear)<br />
<b>-o</b> &#150; make parameters other than <i>velocity</i> relative 
to time in the <b>output</b> soundfile.  By default, these other 
parameters are read relative to time in the <b<input</b> soundfile, 
but <i>velocity</i> is AWAYS read relative to time in the 
<b<input</b> file.<br />
</blockquote>

<h3>
Understanding the WRAPPAGE Process
</h3>

<blockquote>
<p>
WRAPPAGE is the multi-channel equivalent of &nbsp;&nbsp;<a href ="cgromody.htm#BRASSAGE"><b>MODIFY BRASSAGE</b></a>.
</p><p>
How is a 'moving' multi-channel output is achieved? T. Wishart writes:<br />
The <i>centre</i> parameter of WRAPPAGE defines spatial position:  
i.e., the channel number at which the output sound field is <i>centred</i>.  
This <i>centre</i> can be made to move from one output channel to 
another by providing a data file of <i>time centre direction</i> 
value-triples. For example:<br />
<pre>
<font color = "#FF0000"><i>time centre direction</i></font>
0    2      1
2    4     -1
5    2      1
</pre>
</p><p>
The <i>centre</i> of the image starts (<i>time</i> 0 on line 1) 
at channel 2, and moves clockwise:  the last '1' on line 1 
indicates clockwise motion.  At 2 seconds (line 2) it reaches 
channel 4, and then begins to move anticlockwise (the '-1' on line 2), 
until, at 5 seconds (line 3) it arrives at channel 2.
</p>

<p>
The <i>spread</i> parameter of WRAPPAGE defines spatial spread:  
the width of the sound image, i.e., how many adjacent channels, or 
loudspeakers across which it spreads around this <i>centre</i>. 
Thus, for example, an image <i>centred</i> at 4 with a <i>spread</i> 
of 3 (in an 8-channel output space) would be spread across channels 
3, 4 and 5.
</p>

<p>
The moving image of 'wrappage' works in exactly the same way as that in 
MCHANPAN, but is in no way dependent on it.  WRAPPAGE produces the spatial 
motion itself. There is a difference, because MCHANPAN Mode 1 is moving 
a <b>single</b> (mono) source around the multi-channel space whereas 
WRAPPAGE is generating a sound-image of textured sounds which can not 
only move, but can change in width (as it moves or even when its' 
<i>centre</i> is stationary.  The wrappage sound image could fill the 
entire multi-channel space (centre it anywhere and, in an <i>N</i>-channel 
space, make the <i>spread</i> <i>N</i>), and this image could even 
rotate (keep the <i>spread</i> at maximum and move the <i>centre</i>).   
However, unless the sound elements of the texture were themselves long, 
this rotation might not be noticed: i.e., with very short sounds, it 
would not be possible to tell whether the whole texture was rotating 
or whether the individual elements were simply occuring in different 
positions, sounding much like a non-rotating texture of the same 
materials.
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
WRAPPAGE is essentially the same as <a href = "cgromody.htm#BRASSAGE">
<b>MODIFY BRASSAGE</b></a> in that it produces granulated soundfile output.  The 
difference lies in its multi-channel facilities, particularly the 
movement patterns that can be achieved with a breakpoint file input for 
the <i>centre</i> parameter:  defining with value triples the 
<i>time</i>, the <i>centre</i> position of the sound image (the 
channel), and the <i>direction</i> of movement.  A multi-channel output 
soundfile of <i>outchans</i> number of channels can be created.
</blockquote>

<p>
End of WRAPPAGE<br />
<a href="#GRAINLIST"><b>Return</b></a> to list of GRAIN functions at top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cgroundx.htm" Target="_top"><b>Return</b></a>
to 'Groucho' Time-Domain Index<br />
</p>





<!-- ********************************************************** -->
  <div id = "footer">
   <p>
    <address>
    Last Updated 4 Apr 2023 for CDP8<br />
    Documentation: Archer Endrich<br />
    Revisions: Robert Fraser<br>
    All observations &amp; ideas for improvement appreciated<br />
    Composers Desktop Project Ltd<br />
    Email: cdpse9@gmail.com<br />
    &#169; Copyright 1998-2023 Archer Endrich &amp; CDP<br>
    </address>
   </p>
  </div>

</div> <!-- End of 'right' (contents) indentation -->

</body>

</html>