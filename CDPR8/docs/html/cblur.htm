<!DOCTYPE html>
<html lang="en">
<!-- cblur.htm  - HTML5 version -->

<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>CDP BLUR Functions</title>
<meta charset="UTF-8" />
	<link rel = "stylesheet"
	 type = "text/css"
	 href = "cdpmanshtml5.css" />
<link rel="icon"  href="images/cdp_favicon.ico">
    <style>
	a { text-decoration: none }
	a:hover { color:#FF3333;
          text-decoration: underline }          	
    </style>
</head>

<body>

<div id = "left"> <!-- Keep indexing on left ABOVE headlines so index goes to top of page -->

  <p>
  <div align = "center">
  <IMG SRC = "images/cdpcircs90.jpg"></a>
  </div>
  </p>

  <p>
  <nav>
  <!-- list-style-type NOT removing bullets in IE9, using Definition List -->
  <dl>
  <dt><a href="ccdpndex.htm" Target="_top"><b>Main Index</b></a>
  <dt><a href="cspecndx.htm" Target="_top"><b>Spectral Index</b></a> 
  <dt><a href="filestxt.htm" Target="_blank"><b>File Formats</b></a>
  <hr>
  <br />
  <dt><a href="#BLURLIST"><b>BLUR:</b></a>
  <dt>&nbsp;&nbsp;<a href = "#AVRG"><b>AVRG</b></a>
  <dt>&nbsp;&nbsp;<a href = "#BLUR"><b>BLUR</b></a>
  <dt>&nbsp;&nbsp;<a href = "#CHORUS"><b>CHORUS</b></a>
  <dt>&nbsp;&nbsp;<a href = "#DRUNK"><b>DRUNK</b></a>
  <dt>&nbsp;&nbsp;<a href = "#NOISE"><b>NOISE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SCATTER"><b>SCATTER</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SHUFFLE"><b>SHUFFLE</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SPREAD"><b>SPREAD</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SUPPRESS"><b>SUPPRESS</b></a>
  <dt>&nbsp;&nbsp;<a href = "#WEAVE"><b>WEAVE</b></a>
   <br><br>
  <b>OTHERS:</b><br>
  <dt>&nbsp;&nbsp;<a href="#CALTRAIN"><b>CALTRAIN</b></a>
  <dt>&nbsp;&nbsp;<a href = "#SELFSIM"><b>SELFSIM</b></a>
  <dt>&nbsp;&nbsp;<a href="#SUPPRESSBND"><b>SUPPRESS</b></a>
  <br><br> 
  <dt><a href = "#BLURTECHNICAL"><b>TECHNICAL</b></a>

  </dl>
  </p>

</div>  <!-- End of left index panel -->

<div id = "right"> <!-- Keep headlines here so index goes to top of page -->

   <div id = "head">
   <!-- 
   <p><IMG SRC="images/cdpcircs.jpg" align=left ALT="CDP circles logo"></a></p>
   -->
   <div align=center>
   <br>
   <img src="images/cdplogo2.jpg" ALT="CDP Logo">
   </div>

   <h1 align=center>CDP BLUR (Time) Functions</h1>
   <h2 align=center><font color="#3366ff"> (with Command Line Usage)</font></h2>
   </div>  <!-- End of 'head' -->


<h2 align=center id="BLURLIST">
Functions which BLUR (Time) analysis data</h2>

<dl>
<dt><a href="#AVRG">BLUR <b>AVRG</b></a> <dd>Average spectral energy over <i>N</i> 
adjacent channels
<dt><a href="#BLUR">BLUR <b>BLUR</b></a> <dd>Blur the spectral data over time
<dt><a href="#CALTRAIN"><b>CALTRAIN</b></a> <dd>Time-blur the upper spectral channels</dd>
<dt><a href="#CHORUS">BLUR <b>CHORUS</b></a> <dd>Add random variation to amplitude 
or frequency in analysis channels
<dt><a href="#DRUNK">BLUR <b>DRUNK</b></a> <dd>Modify sound by a drunken walk along 
analysis windows
<dt><a href="#NOISE">BLUR <b>NOISE</b></a> <dd>Add noise to spectrum
<dt><a href="#SCATTER">BLUR <b>SCATTER</b></a> <dd>Randomly thin the spectrum
<dt><a href="#SELFSIM"><b>SELFSIM</b></a> <dd>Replace spectral windows with the most similar, louder window(s)</dd>
<dt><a href="#SHUFFLE">BLUR <b>SHUFFLE</b></a> <dd>Shuffle analysis windows according 
to a specific scheme
<dt><a href="#SPREAD">BLUR <b>SPREAD</b></a> <dd>Spread spectral peaks
<dt><a href="#SUPPRESS">BLUR <b>SUPPRESS</b></a> <dd>Suppress the most prominent 
channel data
<dt><a href="#SUPPRESSBND"><b>SUPPRESS PARTIALS</b></a> <dd>Suppress the most prominent partials in the frequency band indicated </dd>
<dt><a href="#WEAVE">BLUR <b>WEAVE</b></a> <dd>Weave amongst the analysis windows in 
a specified pattern
<br><br>
<dt><a href="#BLURTECHNICAL"><b>ANALYSIS WINDOWS:</b></a> <dd>Technical Discussion of Analysis Windows
</dl>

<p>
<a href="cspecndx.htm" Target="_top">Return</a> to Spectral Index<br>
</p>

<hr><!-- **************************************************** -->

<h2 id="AVRG">BLUR AVRG &#150; Average spectral energy over 
<i>N</i> adjacent channels<br></h2>

<h3>
Usage
</h3> 
<b>blur avrg</b> <i>infile outfile N</i><br>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>N</i> &#150; no. of adjacent channels &#150; must be &lt= half the no. of channels in the <i>infile</i>.<br>
	<blockquote>
	<i>N</i> may vary over time
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR AVERAGE Process
</h3> 

<blockquote>
<p>
The averaging of energy information causes high energy data to cross 
channels.  The result is the intrusion of timbral data into channels 
which previously didn't have that data.  Test results led to a 'roughening' 
of the sound, though without going as far as distorting it.
</p>

<p>
Note that this process relates to channels, not to windows (as does the 
BLUR BLUR process).  This means that the averaging directly affects the 
frequency components of the sound.  
</p>

<p>
The energy (amplitude) in adjacent channels is averaged out over 
<i>Average-span</i> adjacent channels, without affecting the frequencies 
of those channels.  The result is to broaden, or defocus, any energy 
peaks in the spectrum.
</p>

<p>
This reduces the frequency definition of the sound, which is why it is 
in the BLUR category and is, in effect, a type of filtering.
</p>
</blockquote>

<h3>
Musical Applications
</h3> 

<blockquote>
<p>
BLUR AVRG appears to be useful to enrich the timbre of a sound and 
make its texture rougher.
</p>
</blockquote>

End of BLUR AVRG<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions at top 
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr> <!-- ******************************************************** -->

<h2 id="BLUR">BLUR BLUR &#150;  Time-average the spectrum </h2>

<h3>		
Usage
</h3>
<b>blur blur</b> <i>infile outfile blurring</i><br>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>blurring</i> &#150; the number of windows over which to average the spectrum<br>
<br>
	<blockquote>
	<i>blurring</i> may vary over time:  provide the name of 
	a <i>time blurring</i> breakpoint file for this parameter.<br>
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR BLUR Process
</h3> 

<blockquote>
<p>
BLUR BLUR time-averages the spectrum.  It 'blurs' detail in the time dimension 
by interpolating between the spectral envelope values of the start and 
end windows <i>blurring</i> windows.  Note that it is not interpolating 
continuously over all the windows inbetween, just between the data in 
the start and end windows.  The overall result is somewhat affected by 
just how different the data is in these two windows.  The interpolation 
process produces a 'straight line' (linear) scale of values between the 
start and end points.
</p>

<p>
BLUR BLUR differs from <a href="chilite.htm#BLTR"><b>HILITE BLTR</b></a> in the 
absence of the 'trace' parameter.  This means that the blurring occurs 
without any reduction in the number of partials.
</p>
</blockquote>

<h3>
Musical Applications
</h3> 

<blockquote>
<p>
As with all of these programs, the result is greatly affected by the 
nature of the input sound.  The more windows blurred, the more blurring 
or smoothing of the sound you might expect to happen.  However, you 
might not notice much difference if the sound is already constant 
(or similar at the start and end points).  You will probably need a 
sound with a great deal of internal change for the blurring to have a 
perceptible effect.
</p>

<p>
The musical results of this process begin with a softening of the 
attack transients, so is highly effective with, for example, plucked 
or percussive sounds.  A time-varying transition from the original 
to a very blurred effect can be achieved by a simple breakpoint file 
which sets a low  value for <i>blurring</i> at the beginning of the 
sound and a high value at the end.  It is possible for the sound to 
disappear gradually into its own ambience.  This powerful technique 
can therefore useful in the creation of 'ambient' music, as well as 
any degree of softening of the original sound.
</p>
</blockquote>

<p>
Also see: <a href="chilite.htm#BLTR"><b>HILITE BLTR</b></a> and 
<a href="chilite.htm#TRACE"><b>HILITE TRACE</b></a>.
</p>

<p>
End of BLUR BLUR<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions  
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>


<hr><!-- ************************************************ -->
<h2 id="CALTRAIN">CALTRAIN &#150; Time-blur the upper spectral channels</h2>

<h3>
Usage
</h3>
<b>caltrain caltrain</b> <i>inanalfile outanalfile blurfact blurabov</i> [<b>-l</b><i>locut</i>]
<br >

<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input analysis file<br />
<i>outanalfile</i> &#150; output analysis file<br />
<i>blurfact</i> &#150; time over which the upper part of the spectrum is blurred (Range: 0 to end-of-file)<br />
<i>blurabov</i> &#150; Frequency above which the spectrum is blurred (Range: 0 to sample-rate/2, e.g. 22050)<br />
[<b>-l</b><i>locut</i>] &#150; Frequency below which bass is cut off. (Range: 0 to sample-rate/2; default: no bass cutoff)
<br />
</blockquote>

<h3>
Understanding the CALTRAIN Process
</h3>
<blockquote>
<p>
CALTRAIN appears to be a variant of <a href="#BLUR"><b>BLUR</b></a>, affecting partials above a given frequency. The result is normally a roughening or distortion of the sound in its upper frequencies.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
</p>
</blockquote>

<p>
End of CALTRAIN<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions  
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
 
</p>


<hr><!-- ****************************************************** -->

<h2 id="CHORUS">BLUR CHORUS &#150;  Chorusing by randomising 
amplitudes and&#47;or frequencies of partials</h2>

<h3>		
Usage
</h3>
<b>blur chorus 1</b> <i>infile outfile aspread</i><br>
<b>blur chorus 2-4</b> <i>infile outfile fspread</i><br>
<b>blur chorus 5-7</b> <i>infile outfile aspread fspread</i><br>

<h3>		
Modes
</h3>

<blockquote>
<b>1</b>&nbsp; Randomise partial amplitudes<br>
<b>2</b>&nbsp; Randomise partial frequencies<br>
<b>3</b>&nbsp; Randomise partial frequencies upwards only<br>
<b>4</b>&nbsp; Randomise partial frequencies downwards only<br>
<b>5</b>&nbsp; Randomise partial amplitudes AND frequencies<br>
<b>6</b>&nbsp; Randomise partial amplitudes, and frequencies upwards only<br>
<b>7</b>&nbsp; Randomise partial amplitudes, and frequencies downwards only<br>
</blockquote>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>aspread</i> &#150; maximum random scatter of partial-amps (Range 1-1028)<br>
<i>fspread</i> &#150; maximum random scatter of partial-frqs (Range 1-4)<br>
<br>
	<blockquote>
	<i>aspread</i> and <i>fspread</i> may vary over time<br>
	</blockquote>
</blockquote>

<h3>		
Understanding the BLUR CHORUS Process
</h3>

<blockquote>
<p>
Formerly SPECHORU, this process attempts to achieve a chorusing effect by 
randomising the amplitude and frequency values of the partials.  It is 
based on an idea of Stephen McAdams.  See his <i>Spectral Fusion and the 
Creation of Auditory Images</i> (1981).
</p>

<p>
If very large amplitude <i>aspread</i> values are used, the sound will turn 
to noise.  The ranges shown for <i>aspread</i> and <i>fspread</i> appear to 
be rather extreme, but they are rescaled within the program.  There is in 
fact no mathematical limit to the values which can be entered.  In practice, 
the 'chorusing' effect itself is achieved by values just a little above 1!.  
Values of 2 or 3 begin to create a granular effect, and values of 10, 100 
and 1000, for example, create more and more noise.
</p>
</blockquote>

<h3>		
Musical Applications
</h3>

<blockquote>
<p>
'Chorusing' is one of the standard effects used to enliven and enrich a 
sound.  It becomes available here in an open-ended context, where the 
effect can be driven beyond the usual bounds into granulation and noise 
effects, useful when a certain textural or gritty quality is needed.
</p>

<p>
In Mode 5, a burbly but comprehensible vocal transformation may occur 
with <i>aspread</i> = 30 and <i>fspread</i> = 4.
</p>
</blockquote>

<p>
End of BLUR CHORUS<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions at top 
of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr> <!-- ******************************************************** -->

<h2 id="DRUNK">BLUR DRUNK &#150; Modify sound by a drunken walk 
along analysis windows</h2>

<h3>
Usage
</h3>
<b>blur drunk</b> <i>infile outfile range starttime duration</i> [<b>-z</b>]
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>range</i>  &#150;the maximum step (in windows) for the drunken walk:  <= 64<br>
<i>starttime</i>&#150;  the time (in seconds) in the file at which the walk should 
begin<br>
<i>duration</i>&#150;  the required duration of the outfile after re-synthesis &shy 
it may be longer than <i>infile</i><br>
<b>-z</b>  eliminates zero steps (window-repeats) in the drunken walk<br>
</blockquote>

<h3>
Understanding the BLUR DRUNK Process
</h3>

<blockquote>
<p>
Beginning at <i>starttime</i>, a user-defined point in the <i>infile</i>, 
BLUR DRUNK moves through the file reading windows, but jumping either 
forwards or backwards, from one window to another, in a random way.  
The size of these random jumps cannot be greater than <i>range</i>.
This random process is known as a drunken walk.  It proceeds until 
the specified duration of the output sound has been generated.
</p>

<p>
If the process tries to leap right out of the soundfile at its end or 
its start, it is automatically reflected back into the sound near to 
the leap point.  The process never reads backwards through the file, 
though it may leap backwards before starting its next read.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
This process can be used to lurch about in a soundfile, producing a 
jumbled version of <i>infile</i> to varying degrees.  The salient 
parameter is <i>range</i>.  If <i>range</i> is small, the output will 
tend to linger around your start-point in the file, progressing very 
slowly away from it in an arbitrary direction.  This results in a mix 
of time-stretching and slow wandering through the source.  If 
<i>range</i> is large, the drunken walk tends to leap about wildly 
in the file, scrambling the source sound.
</p>
</blockquote>

<p>
End of BLUR DRUNK<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- **************************************************** -->

<h2 id="NOISE">BLUR NOISE &#150; Put noise in the spectrum</h2>

<h3>
Usage
</h3>
<b>blur noise</b> <i>infile outfile noise</i> 
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>noise</i> &#150; Range 0 (no noise in spectrum) to 1 (spectrum saturated 
with noise)<br>
	<blockquote>
	<i>noise</i> may vary over time
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR NOISE Process
</h3> 

<blockquote>
<p>
This functions enables one to move a sound source towards pure noise, 
by making the data in every channel &#150 
most of which is actually low level noise &#150; equally 
loud.  Total saturation will reduce all sounds to a very similar noise 
signal.  Partial or gradual saturation is possible, through the use of 
values less than 1 or by using a time-varying breakpoint file.  These 
work in the usual way, with gradual change between different time 
points to which are assigned different <i>noise</i> values.<br>
</p>
</blockquote>

<h3>
Musical Applications
</h3> 
<blockquote>

<p>
This technique can be used to cause sound material to emerge from 
obscurity to clarity, or <i>v.vs.</i>.  Also, a carefully chosen 
<i>noise</i> factor can be used to colour a sound or soften its edges.<br>
</p>
</blockquote>

<p>
End of BLUR NOISE<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- ****************************************************** -->

<h2 id="SCATTER">BLUR SCATTER &#150; Randomly thin the spectrum</h2>

<h3>
Usage
</h3>
<b>blur scatter</b> <i>infile outfile keep</i> [<b>-b</b><i>blocksize</i>] 
[<b>-r</b>] [<b>-n</b>] 
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>keep</i> &#150; number of (randomly chosen) blocks to keep in each 
spectral window (Range: 1 to no. of chans.)<br>
<b>-b</b><i>blocksize</i> &#150; frequency range of each block (default is width of 1 
analysis channel.  (Rounded internally to a multiple of channel width.)<br>
<b>-r</b>  number of blocks actually selected is randomised between 1 
and <i>keep</i><br>
<b>-n</b>  turn OFF normalisation of resulting sound<br>
	<blockquote>
	<i>keep</i> and <i>blocksize</i> may vary over time
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR SCATTER Process
</h3> 

<blockquote>
<p>
This function throws away a specified proportion of the analysis data 
in each window.  Unlike <a href="chilite.htm#TRACE"><b>HILITE TRACE</b></a>, 
the channels chosen to be suppressed are selected entirely at random. 
The spectrum is thus thinned out in an unpredictable fashion.
</p>

<p>
Remember that the number of channels in an analysis file is determined by 
the value for the <b>-N</b> flag of the Phase Vocoder (now referred to 
as <b>-c</b><i>points</i>).  For example, if it was <b>-c</b>1024, there 
will be 512 + 1 channels, each containing frequency and amplitude data.  
</p>

<p>
Before scattering, the channels are gathered together into blocks of 
adjacent channels, and these blocks-of-channels are then either retained 
or discarded (at random).
</p>

<p>
<i>Blocksize</i> sets how many of these channels form one block.  
<i>Keep</i> sets how many of these blocks (i.e., groups of channels) 
will be randomly chosen and retained from the total of 513.
</p>

<p>
The values for <i>keep</i> and <i>blocksize</i> therefore need to be 
worked out in relation to the value given for <b>-c</b>.  For example, 
retaining <i>keep</i> = 10 and <i>blocksize</i> = 6 will retain a total 
of 60 (randomly selected) channels from the analysis data.
</p>
</blockquote>

<h3>
Musical Applications
</h3> 

<blockquote>
<p>
The musical result will be more variable than HILITE TRACE.  The latter 
retains the <i>N</i> <b>loudest</b> channels, thus always keeping the 
most audibly prominent data of the original sound.  BLUR SCATTER may or 
may not pick up audibly prominent data as it makes its random selections.  
The original sound material will therefore be more variably retained 
or cast aside, and this variability can be increased by using a <i>time 
keep</i> and&#47;or a <i>time blocksize</i> breakpoint file.
</p>
</blockquote>

<p>
<b>SEE ALSO:</b>
<a href="chilite.htm#TRACE"><b>TRACE</b></a>,&nbsp;
<a href="#SUPPRESS"><b>BLUR SUPPRESS</b></a>,&nbsp;
<a href="#SUPPRESSBND"><b>SUPPRESS</b> (band)</a>
</p>

<p>
End of BLUR SCATTER<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- ****************************************************** -->

<h2 id="SELFSIM">SELFSIM &#150; Replace spectral windows with the most similar, louder window(s) of the same analysis file</h2>

<h3>
Usage
</h3>
<b>selfsim selfsim</b> <i>inanalfile outanalfile self-similarity-index</i>
<br />

<p>
Example command line to expand the area of similar windows :<br>
	<blockquote>
	<b><code>selfsim selfsim in.ana out.ana 2</code></b>
	</blockquote>
</p>


<h3>
Parameters
</h3>

<blockquote>
<i>inanalfile</i> &#150; input (mono) analysis file<br />
<i>outanalfile</i> &#150; output (mono) analysis file<br />
<i>self-similarity-index</i> &#150; the number of similar windows to replace.  Value = 1 uses the loudest window to replace the most similar window, then the next loudest window to replace the window most similar to it, and so on, with appropriate overall-loudness scaling.  With value = 2, the loudest windows replaces the <b>two</b> most similar windows, and so on.  Thus, if window A replaces window B, and window C is most similar to window B, then window A also replaces window C, etc.<br />
</blockquote>

<h3>
Understanding the SELFSIM Process
</h3>

<blockquote>
<p>
This process systematically replaces spectral windows that are less prominent (i.e.,not as loud, no special peaks ...) with spectral windows in the same file that are more prominent in some way <i>and are the most similar to them in spectral envelope </i>.  At the same time it scales amplitudes for any overall difference between the two windows.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
It is important to observe the effect of higher values for the <i>self-similarity-index</i>.  You might describe this program as a feature repeater.  On the one hand it is looking for prominent windows and extending their presence in the sound.  On the other hand, these prominent windows are also examined for similarity of spectral envelope.  Thus the features of this spectral envelope are repeated more often in the resulting sound &#150; hence the 'self-similar' idea.  The overall effect is going to depend on the nature of the prominent windows, and one can expect that a fairly steady-state sound will not be much affected by this process.  Try it on exciting sounds!
</p>
</blockquote>

<p>
End of SELFSIM<br />
<a href="#SPECLIST"><b>Return</b></a> to list of SPEC functions at 
top of this file<br />
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> to Main Index for 
the CDP System.<br />
<a href="cspecndx.htm" Target = "_top"><b>Return</b></a> to Spectral Index
</p>

<hr><!-- ****************************************************** -->
 
<h2 id="SHUFFLE">BLUR SHUFFLE &#150; Shuffle order of analysis 
windows in file</h2>

<h3>
Usage
</h3>
<b>blur shuffle</b> <i>infile outfile domain-image grpsize</i> 
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>domain-image</i> &#150; this consists of two strings of letters, separated 
by a hyphen ('-');  the first string is the <i>domain</i> and the 
second string is the <i>image</i>, e.g., 'abc-abbabcc'.
	<blockquote>
	The <i>domain</i> letters represent a group of consecutive 
<i>infile</i> analysis windows, e.g., 'abcd'.<br>
	The <i>image</i> is any permutation of, or selection from, 
these <i>domain</i> letters &shy these letters may be omitted or 
repeated in the <i>image</i> string, e.g., 'aaaaaaaadaaa'.
	</blockquote>
<i>grpsize</i> &#150; the number of analysis windows corresponding to each 
letter of <i>domain</i>.
	<blockquote>
	Each letter then represents a group of <i>grpsize</i> windows 
and the whole group is treated as one unit in the shuffling process.
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR SHUFFLE Process
</h3>

<blockquote>
<p>
SHUFFLE shuffles windows in a PVOC analysis data file.  This is a 
spectral version of 'brassage' (see <a href="cgromody.htm#BRASSAGE"><b>MODIFY BRASSAGE</b></a> and <a href="cgromody.htm#SAUSAGE"><b>MODIFY SAUSAGE</b></a>).  As with most of these programs, 
the degree of audible difference is going to depend on how much the sound 
changes in the first place.  Shuffling spectral windows in a fairly 
uniform sound may not have much effect.  Experimenting with this program 
ought to lead to the unexpected.
</p>

<p>
To illustrate how this works, suppose there is a <i>domain</i> of 
three letters:  A B C.  This means that there will be three consecutive 
windows, numbered 1 2 3 in the order in which they occur in the 
analysis file.
</p>

<p>
If the <i>image</i> is ordered C B A, then these three windows will 
be rearranged in the output into the order 3 2 1.
</p>

<p>
<i>grpsize</i> has not been set in this example, so the default of 1 is 
operating.  If we then set <i>grpsize</i> to, say 3, the A will stand for 
3 windows, starting with 1 2 3, B for windows 4 5 6, and C for windows 
7 8 9.  When the shuffling takes place according to the <i>Image</i> 
<b>CBA</b>, the result will be 7 8 9, 4 5 6, 1 2 3.  The process continues 
in this way throughout the analysis file.  Larger values for <i>grpsize</i> 
(e.g., 20) can lead to the repetition of fragments of sound material.  
The following table summarises these inputs. 
</p>

<div align=center>
<table border=2>
<caption><b>BLUR SHUFFLE EXAMPLE</b></caption>
<tr align=center>
	<th><i>Domain</i></th> 
	<th><i>Image</i></th> 
	<th><i>Groupsize</i></th> 
</tr>
<tr align=center>
	<td>ABC</td>
	<td>CBA</td>
	<td>3</td>
</tr>
<tr align=center>
	<td>123 456 789</td>
	<td>789 456 123</td>
	<td><br></td>
</tr>
</table>
</div>

<p>
The command line for the above would be:<br>
<code>blur shuffle infile outfile ABC CBA 3</code><br><br>
Note that the size of the <i>domain</i> and the value for <i>grpsize</i> 
are limited by the amount of RAM available on your computer.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
The <i>domain-image</i> parameter is what makes SHUFFLE particularly useful.  
The <i>domain</i> identifies a series of consecutive windows, and the 
<i>image</i> defines the order of those windows (some may be omitted).  Then 
this whole pattern repeats as a block, affecting each consecutive set of 
windows in the source file.  The control over re-ordering makes it possible 
to jumble, retrograde, mix forwards and backwards etc. the successive 
windows.  An increasing <i>grpsize</i> makes more of the source audible at 
any given time, which means that one can play with the degree to which the 
source can be identified.
</p>

<p>
Thus one is stepping through the source in chunks of varying size and 
re-ordering the contents of those chunks.  The re-orderings play with 
familiarity, create repeatable sub-patterns, and will lead to additional 
timbral changes depending on the degree to which differing spectral data 
get mixed together.
</p>
</blockquote>

<p>
End of BLUR SHUFFLE<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- **************************************************** -->

<h2 id="SPREAD">BLUR SPREAD &#150; Spread peaks of spectrum, 
introducing controlled noisiness</h2>

<h3>
Usage
</h3>
<b>blur spread</b> <i>infile outfile</i> <b>-f</b><i>N</i> &#124; 
<b>-p</b><i>N</i> <b>-i</b> [<b>-s</b><i>spread</i>]<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<b>-f</b><i>N</i>  extract formant envelope linear frequency-wise,
using 1 point for every <i>N</i> equally-spaced frequency channels<br>
<b>-p</b><i>N</i>  extract formant envelope linear pitch-wise, using 
<i>N</i> equally-spaced pitch bands per octave<br>
<b>-i</b>  quicksearch for formants (less accurate)<br>
<b>-s</b><i>spread</i>  degree of spreading of spectrum (Range 0-1; 
Default is 1).<br>
	<blockquote>
	<i>spread</i> may vary over time
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR SPREAD Process
</h3> 

<blockquote>
<p>
This process introduces noise into the spectrum in a way which is 
coherent with (i.e., related to) the spectral envelope.  The spectral 
envelope (formants) in each window is retained, and the level in 
every channel is made to approximate this average spectral contour 
to a greater or lesser extent, depending on <i>spread</i>.  This 
process tends to exaggerate the less prominent (noise) constituents 
of the spectrum.
</p>
</blockquote>

<h3>
Musical Applications
</h3> 

<blockquote>
<p>
This is a distortion technique which can be handled in a very sensitive 
manner because <i>spread</i> can be so finely adjusted, or altered in 
a time-varying manner.  If applied to speech, the noise introduces 
a certain edginess, so if an effect such as unvoiced speech is sought, 
FORMANTS VOCODE is recommended, which allows some low or high frequency 
filtering.
</p>
</blockquote>

<p>
End of BLUR SPREAD<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- ****************************************************** -->
 
<h2 id="SUPPRESS">BLUR SUPPRESS &#150; Suppress the <i>N</i> 
loudest partials (on a window by window basis)</h2>

<h3>
Usage
</h3>
<b>blur suppress</b> <i>infile outfile N</i><br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>N</i> &#150; the number of spectral components to reject<br>
	<blockquote>
	<i>N</i> may vary over time<br>
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR SUPPRESS Process
</h3>

<blockquote>
<p>
This process is the opposite of <a href="chilite.htm#TRACE"><b>HILITE TRACE</b></a>, 
which retains the <i>N</i> loudest partials.  Whereas with TRACE 
many components have to be removed before the sound starts to 
be seriously affected, here the change to <i>infile</i> will be 
more immediate when a relatively small value for <i>N</i> is used.  
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
The loudest partials will not necessarily relate to either the 
higher or lower parts of the frequency spectrum.  They will relate 
simply to whatever is most audible &shy prominent &shy in the sound, 
such as possibly the fundamental of a pitched sound.  This will 
have the effect of revealing the more strictly timbral aspects of 
the sound.
</p>

<p>
This process can also be useful in preparing a sound for another process 
which will benefit from suppressing its more audible features.  As an 
example of this, ... (I did a sound in which I couldn't get rid of 
the fundamental, which was reinforced by the process, when I really 
wanted to bring out other things.)
</p>
</blockquote>

<p>
<b>SEE ALSO:</b>
<a href="chilite.htm#TRACE"><b>TRACE</b></a>,&nbsp;
<a href="chilite.htm#BLTR"><b>BLTR</b></a>,&nbsp;
<a href="#SUPPRESSBND"><b>SUPPRESS</b> (band)</a>
</p>

</p>

<p>
End of BLUR SUPPRESS<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- ========================================================================= -->
<h2 id="SUPPRESSBND">SUPPRESS PARTIALS&#150; Suppress the most prominent partials in the frequency band indicated</h2>

<h3>
Usage
</h3>
<b>suppress partials</b> <i>inanal outanal timeslots lofrq hifrq chancnt</i>


<h3>
Parameters
</h3>

<blockquote>
<i>inanal</i> &#150;  input analysis file<br>
<i>outanal</i> &#150;  output analysis file<br>
<i>timeslots</i> &#150; datafile of (from-to) time-pairs between which bands are suppressed.<br>   
<i>lofrq</i>  &#150; low frequency limit of band where partials to be suppressed. (Range: 5 to 22050 Hz)<br>  
<i>hifrq</i> &#150;  high frequency limit of band where partials to be suppressed.(Range: 5 to 22050 Hz)<br> 
<i>chancnt</i> &#150; number of most prominent analysis channels in band to be suppressed. (Range: 1 to no. of channels, e.g. 513)<br>  


</blockquote>

<h3>
Understanding the SUPPRESS PARTIALS Process
</h3>

<blockquote>
<p>
SUPPRESS PARTIALS suppresses the most prominent partials in a specified frequency band, at given times. <i>Lofrq</i> and <i>hifrq</i> set the lower and upper limits of the frequency band, while <i>chancnt</i> gives the number of spectral channels in that band that you wish to suppress.  The <i>timeslots</i> datafile gives the times that these are to be suppressed. For the whole file, enter 0 and its approx. end time.
</p><p>
Care must be taken in setting the number of channels (<i>chancnt</i>) correctly to avoid a CDP Error. Divide the frequency band by the channel bandwidth (for the PVOC resolution in use) to give the number of channels in the band. 
</p><p>
Suppressing the normally weaker upper partials will make very little difference to the sound. The greatest timbral change is through selective high-pass filtering, that is, in eliminating some of the lower partials, under 1000Hz.
</p><p>
SUPPRESS PARTIALS expands the provision of the earlier BLUR SUPPRESS, which suppresses the most prominent N partials, channel by channel.
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
...
</p>
</blockquote>

<p>
<b>SEE ALSO:</b>
<a href="chilite.htm#TRACE"><b>HILITE TRACE</b></a>,&nbsp;
<a href="chilite.htm#BLTR"><b>HILITE BLTR</b></a>,&nbsp;
<a href="#SCATTER"><b>BLUR SCATTER</b></a>,&nbsp;
<a href="#SUPPRESS"><b>BLUR SUPPRESS</b></a>,&nbsp;
</p>

<p>
End of SUPPRESS PARTIALS<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- ****************************************************** -->
 
<h2 id="WEAVE">BLUR WEAVE</a> &#150; Modify sound by weaving amongst 
analysis windows</h2>

<h3>
Usage
</h3>
<b>blur weave</b> <i>infile outfile weavfile</i>
<br>

<h3>
Parameters
</h3>

<blockquote>
<i>infile</i> &#150; input analysis file made with PVOC<br>
<i>outfile</i> &#150; output analysis file<br>
<i>weavfile</i> contains a list of integers which define successive 
<b>steps</b> (in windows) through the input file. The start window 
is always numbered '0'.  Steps may be forward or backwards, 
adding the positive or negative integer of the weave formula to the number 
of the window at which one has arrived to show which will be the next 
window selected (see tables below).  The step sequence is repeated until 
the end of the <i>infile</i> is reached.<br>
	<blockquote>
	The weave must obey the following rules:<br>
		<blockquote>
		RULE 1:  NO step can exceed 127 forwards or -128 backwards<br>
		RULE 2:  NO window reached in a weave can be BEFORE 
		the start window of the weave.<br>
		RULE 3:  FINAL window must be AFTER the weave start window.<br>
		<br>
		Otherwise, weave may be forward or backward, or remain at 
		same window.
		</blockquote>
	</blockquote>
</blockquote>

<h3>
Understanding the BLUR WEAVE Process
</h3>

<blockquote>
<p>
BLUR WEAVE is similar to SHUFFLE but is a smoother process which plots a 
regular course through the analysis windows, weaving backwards and forwards 
as instructed by the <i>weavfile</i>.  Note that the weave process enables 
one to jump to points forwards or backwards in the soundfile, <i>at which 
point it takes a single window</i>.  Thus one of the keys to understanding 
WEAVE is to realise that it only takes one window at a time after it 
has moved somewhere.  It doesn't fill in with the windows inbetween.
The <i>weavfile</i> therefore creates a sequence of single windows 
taken from various points relative to the start window.  This is what 
makes it a form of brassage in the spectral dimension.  The pattern in 
the <i>weavfile</i> then repeats, starting from the window it has now 
reached.
</p>

<p>
BLUR WEAVE can shorten or lengthen a sound:
<blockquote>
	<b>Shorten:</b>  suppose <i>3 windows are selected in a way which spans a 
	total of 7 windows.</i>  For example, the weave pattern 3, -1, 5, starting 
	from window 0 will take 3 steps, thus moving to window 3 (and selecting it 
	for use in the <i>outanalysisfile</i>), move back one (3-1=2) and take window 
	2, and move forward 5 (2+5=7) and take window 7.  Thus only 3 out of the 7 
	possible windows are written to the <i>outfile</i>, making the latter 
	shorter by a ratio of 3:7.<br>

	<p>
	<table align=center border="2" cellpadding="3" bgcolor="#B0E0E6">
	<caption align=bottom><i>weavfile</i> produces reduction by 0.43</caption>
	<tr align=center>
		<th colspan=2><b>new window count</b></th>
		<td><b>0</b></td>
		<td><b>1</b></td>
		<td><b>2</b></td>
		<td><b>3</b></td>
	</tr>
	<tr align=center>
		<th rowspan="8"><b>source window</b></th>
		<td><b>0</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>1</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>2</b></td>
		<td><br /></td>
		<td><br /></td>
		<td>-1</td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>3</b></td>
		<td><br /></td>
		<td>3</td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>4</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>5</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>6</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>7</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><b>5</b></td>
	</tr>
	</table>
	</p>

	<b>Lengthen:</b>  suppose <i>a few windows are used over and over</i> 
	(the hovering effect mentioned above), such as with the step pattern 
	2 -1 1 -1 1 -1 1 -1 1 2.  Here 3 windows are expanded to 10, a ratio 
	of 10:3.<br>

	<p>
	<table align=center border="2" cellpadding="3" bgcolor="#B0E0E6">
	<caption align=bottom><i>weavfile</i> produces expansion by 3.33</caption>
	<tr align=center>
		<th colspan=2><b>new window count</b></th>
		<td><b>0</b></td>
		<td><b>1</b></td>
		<td><b>2</b></td>
		<td><b>3</b></td>
		<td><b>4</b></td>
		<td><b>5</b></td>
		<td><b>6</b></td>
		<td><b>7</b></td>
		<td><b>8</b></td>
		<td><b>9</b></td>
		<td><b>10</b></td>
	</tr>
	<tr align=center>
		<th rowspan="5"><b>source window</b></th>
		<td><b>0</b></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>1</b></td>
		<td><br /></td>
		<td><br /></td>
		<td>-1</td>
		<td><br /></td>
		<td>-1</td>
		<td><br /></td>
		<td>-1</td>
		<td><br /></td>
		<td>-1</td>
		<td><br /></td>
		<td><br /></td>
	</tr>
	<tr align=center>
		<td><b>2</b></td>
		<td><br></td>
		<td>2</td>
		<td><br></td>
		<td>1</td>
		<td><br></td>
		<td>1</td>
		<td><br></td>
		<td>1</td>
		<td><br></td>
		<td>1</td>
		<td><br></td>
	</tr>
	<tr align=center>
		<td><b>3</b></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
	</tr>
	<tr align=center>
		<td><b>4</b></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td><br></td>
		<td>2</td>
	</tr>	
	</table>
	</p>
</blockquote>
</p>
</blockquote>

<h3>
Musical Applications
</h3>

<blockquote>
<p>
WEAVE can be used to shorten or extend a sound and&#47or to blur its 
characteristics:  by taking windows out of sequence, earlier (backwards) 
or later (forwards) in the source.  Windows taken from relatively distant 
locations of course mix up the sound quite a bit.  A very different effect 
is achieved by having the windows hover around a certain area.  The fact 
that the pattern repeats leads to additional possibilities to create 
pulsations in the sound, though the timbral effect is likely to vary due 
to changing spectral content as the weave moves through the source.
</p>
</blockquote>

<p>
End of BLUR WEAVE<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<hr><!-- **************************************************** -->

<h2 id="BLURTECHNICAL">Technical Discussion of Analysis Windows</h2>

<p>
These various functions to shuffle windows provide a tremendously varied 
set of tools with which to re-pattern the stream of analysis data.  Before 
comparing them to one another, let's take a moment to revise just what 
a window is and just what of the original sound it encapsulates.
</p>

<p>
A window contains the spectral data in all the channels for a given 
duration of <i>infile</i>.  If the number of samples used for the 
window is 1024 (indicated by the <b>-c</b><i>points</i> flag &#150; 
formerly the <b>-N</b> flag), then the number of channels is 1024 
divided by 2 (= 512) plus an extra channel (= 513).
</p>

<p>
This number divided by the sample rate gives the duration of one window.  
E.g., 512/44100 = 0.01163 sec.  The hamming window usually used envelopes 
these samples in a certain way to maximise amplitude but avoid clicks by 
starting from and returning to 0.  (The windows are made to overlap in order 
to avoid holes created by the enveloping.)  Therefore, shuffling windows 
means moving about these little chunks of time, <i>with all the timbral 
data &#150; the changing frequency&#47amplitude content contained 
therein</i>.  The new juxtapositions of this timbral data are likely to 
lead to new colours in the output sound.
</p>

<p>
A brief overview of the SHUFFLE functions can help to clarify how they 
differ, and therefore what one may expect to gain by using each of them.

<dl>
<dt><b>DRUNK</b><dd>jump about within specific spans of file, always reading 
forward, and change the location of these spans.  This can provide a 
series of lurching dislocations, really pulp up the sound to create a 
new timbral entity.

<dt><b>SHUFFLE</b><dd>re-order <i>domain</i> windows according to <i>image</i> 
pattern, with <i>grpsize</i> windows for each domain element;  the order 
of windows can therefore be made to go backwards as well as forwards, but 
the implementation of the pattern always moves constantly forward.  
Disjunctions, retrogrades, tiny repeating patterns etc. all become possible.

<dt><b>WEAVE</b><dd>contraction is likely to create a new timbral entity, while 
expansion will augment the original with repeating sub-patterns.
</dl>
</p>

<p>
End of Technical Discussion<br>
<a href="#BLURLIST">Return</a> to List of BLUR functions 
at top of this file<br>
<a href="ccdpndex.htm" Target="_top"><b>Return</b></a> 
to Main Index for the CDP System.<br>
<a href="cspecndx.htm" Target="_top">Return</a> 
to Spectral Index
</p>

<!-- ********************************************************** -->
  <div id = "footer">
   <p>
    <address>
    Last Updated 3 Apr 2023 for CDP8<br />
    Documentation: Archer Endrich<br />
    Revisions: Robert Fraser<br>
    All observations &amp; ideas for improvement appreciated<br />
    Composers Desktop Project Ltd<br />
    Email: cdpse9@gmail.com<br />
    &#169; Copyright 1998-2023 Archer Endrich &amp; CDP<br>
    </address>
   </p>
  </div>

</div> <!-- End of 'right' (contents) indentation -->


</body>

</html>
